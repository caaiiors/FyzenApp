function Jb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}(function(){const n=document.createElement("link").relList;if(!(n&&n.supports&&n.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&e(i)}).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const r=(function(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o})(t);fetch(t.href,r)}})();var av,ov,lv,cv,uv={exports:{}},Rl={},hv={exports:{}},Ke={};function vk(){if(av)return Ke;av=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator,b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function _(j,B,Z){this.props=j,this.context=B,this.refs=T,this.updater=Z||b}function D(){}function O(j,B,Z){this.props=j,this.context=B,this.refs=T,this.updater=Z||b}_.prototype.isReactComponent={},_.prototype.setState=function(j,B){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,B,"setState")},_.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")},D.prototype=_.prototype;var z=O.prototype=new D;z.constructor=O,S(z,_.prototype),z.isPureReactComponent=!0;var P=Array.isArray,N=Object.prototype.hasOwnProperty,I={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function R(j,B,Z){var ue,ce={},pe=null,be=null;if(B!=null)for(ue in B.ref!==void 0&&(be=B.ref),B.key!==void 0&&(pe=""+B.key),B)N.call(B,ue)&&!A.hasOwnProperty(ue)&&(ce[ue]=B[ue]);var we=arguments.length-2;if(we===1)ce.children=Z;else if(1<we){for(var Ce=Array(we),_e=0;_e<we;_e++)Ce[_e]=arguments[_e+2];ce.children=Ce}if(j&&j.defaultProps)for(ue in we=j.defaultProps)ce[ue]===void 0&&(ce[ue]=we[ue]);return{$$typeof:n,type:j,key:pe,ref:be,props:ce,_owner:I.current}}function C(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}var V=/\/+/g;function fe(j,B){return typeof j=="object"&&j!==null&&j.key!=null?(function(Z){var ue={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(ce){return ue[ce]})})(""+j.key):B.toString(36)}function Te(j,B,Z,ue,ce){var pe=typeof j;pe!=="undefined"&&pe!=="boolean"||(j=null);var be=!1;if(j===null)be=!0;else switch(pe){case"string":case"number":be=!0;break;case"object":switch(j.$$typeof){case n:case e:be=!0}}if(be)return ce=ce(be=j),j=ue===""?"."+fe(be,0):ue,P(ce)?(Z="",j!=null&&(Z=j.replace(V,"$&/")+"/"),Te(ce,B,Z,"",function(_e){return _e})):ce!=null&&(C(ce)&&(ce=(function(_e,ht){return{$$typeof:n,type:_e.type,key:ht,ref:_e.ref,props:_e.props,_owner:_e._owner}})(ce,Z+(!ce.key||be&&be.key===ce.key?"":(""+ce.key).replace(V,"$&/")+"/")+j)),B.push(ce)),1;if(be=0,ue=ue===""?".":ue+":",P(j))for(var we=0;we<j.length;we++){var Ce=ue+fe(pe=j[we],we);be+=Te(pe,B,Z,Ce,ce)}else if(Ce=(function(_e){return _e===null||typeof _e!="object"?null:typeof(_e=v&&_e[v]||_e["@@iterator"])=="function"?_e:null})(j),typeof Ce=="function")for(j=Ce.call(j),we=0;!(pe=j.next()).done;)be+=Te(pe=pe.value,B,Z,Ce=ue+fe(pe,we++),ce);else if(pe==="object")throw B=String(j),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return be}function Re(j,B,Z){if(j==null)return j;var ue=[],ce=0;return Te(j,ue,"","",function(pe){return B.call(Z,pe,ce++)}),ue}function ke(j){if(j._status===-1){var B=j._result;(B=B()).then(function(Z){j._status!==0&&j._status!==-1||(j._status=1,j._result=Z)},function(Z){j._status!==0&&j._status!==-1||(j._status=2,j._result=Z)}),j._status===-1&&(j._status=0,j._result=B)}if(j._status===1)return j._result.default;throw j._result}var Ie={current:null},st={transition:null},Y={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:st,ReactCurrentOwner:I};function q(){throw Error("act(...) is not supported in production builds of React.")}return Ke.Children={map:Re,forEach:function(j,B,Z){Re(j,function(){B.apply(this,arguments)},Z)},count:function(j){var B=0;return Re(j,function(){B++}),B},toArray:function(j){return Re(j,function(B){return B})||[]},only:function(j){if(!C(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Ke.Component=_,Ke.Fragment=t,Ke.Profiler=i,Ke.PureComponent=O,Ke.StrictMode=r,Ke.Suspense=h,Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,Ke.act=q,Ke.cloneElement=function(j,B,Z){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var ue=S({},j.props),ce=j.key,pe=j.ref,be=j._owner;if(B!=null){if(B.ref!==void 0&&(pe=B.ref,be=I.current),B.key!==void 0&&(ce=""+B.key),j.type&&j.type.defaultProps)var we=j.type.defaultProps;for(Ce in B)N.call(B,Ce)&&!A.hasOwnProperty(Ce)&&(ue[Ce]=B[Ce]===void 0&&we!==void 0?we[Ce]:B[Ce])}var Ce=arguments.length-2;if(Ce===1)ue.children=Z;else if(1<Ce){we=Array(Ce);for(var _e=0;_e<Ce;_e++)we[_e]=arguments[_e+2];ue.children=we}return{$$typeof:n,type:j.type,key:ce,ref:pe,props:ue,_owner:be}},Ke.createContext=function(j){return(j={$$typeof:l,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:j},j.Consumer=j},Ke.createElement=R,Ke.createFactory=function(j){var B=R.bind(null,j);return B.type=j,B},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(j){return{$$typeof:u,render:j}},Ke.isValidElement=C,Ke.lazy=function(j){return{$$typeof:g,_payload:{_status:-1,_result:j},_init:ke}},Ke.memo=function(j,B){return{$$typeof:m,type:j,compare:B===void 0?null:B}},Ke.startTransition=function(j){var B=st.transition;st.transition={};try{j()}finally{st.transition=B}},Ke.unstable_act=q,Ke.useCallback=function(j,B){return Ie.current.useCallback(j,B)},Ke.useContext=function(j){return Ie.current.useContext(j)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(j){return Ie.current.useDeferredValue(j)},Ke.useEffect=function(j,B){return Ie.current.useEffect(j,B)},Ke.useId=function(){return Ie.current.useId()},Ke.useImperativeHandle=function(j,B,Z){return Ie.current.useImperativeHandle(j,B,Z)},Ke.useInsertionEffect=function(j,B){return Ie.current.useInsertionEffect(j,B)},Ke.useLayoutEffect=function(j,B){return Ie.current.useLayoutEffect(j,B)},Ke.useMemo=function(j,B){return Ie.current.useMemo(j,B)},Ke.useReducer=function(j,B,Z){return Ie.current.useReducer(j,B,Z)},Ke.useRef=function(j){return Ie.current.useRef(j)},Ke.useState=function(j){return Ie.current.useState(j)},Ke.useSyncExternalStore=function(j,B,Z){return Ie.current.useSyncExternalStore(j,B,Z)},Ke.useTransition=function(){return Ie.current.useTransition()},Ke.version="18.3.1",Ke}function im(){return ov||(ov=1,hv.exports=vk()),hv.exports}var p=(cv||(cv=1,uv.exports=(function(){if(lv)return Rl;lv=1;var n=im(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,h,m){var g,v={},b=null,S=null;for(g in m!==void 0&&(b=""+m),h.key!==void 0&&(b=""+h.key),h.ref!==void 0&&(S=h.ref),h)r.call(h,g)&&!o.hasOwnProperty(g)&&(v[g]=h[g]);if(u&&u.defaultProps)for(g in h=u.defaultProps)v[g]===void 0&&(v[g]=h[g]);return{$$typeof:e,type:u,key:b,ref:S,props:v,_owner:i.current}}return Rl.Fragment=t,Rl.jsx=l,Rl.jsxs=l,Rl})()),uv.exports),U=im();const xk=Jb(U);var dv,fv,pv,mv,gv,Nu={},yv={exports:{}},Ln={},vv={exports:{}},xv={};function bk(){return fv||(fv=1,vv.exports=(dv||(dv=1,(function(n){function e(j,B){var Z=j.length;j.push(B);e:for(;0<Z;){var ue=Z-1>>>1,ce=j[ue];if(!(0<i(ce,B)))break e;j[ue]=B,j[Z]=ce,Z=ue}}function t(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var B=j[0],Z=j.pop();if(Z!==B){j[0]=Z;e:for(var ue=0,ce=j.length,pe=ce>>>1;ue<pe;){var be=2*(ue+1)-1,we=j[be],Ce=be+1,_e=j[Ce];if(0>i(we,Z))Ce<ce&&0>i(_e,we)?(j[ue]=_e,j[Ce]=Z,ue=Ce):(j[ue]=we,j[be]=Z,ue=be);else{if(!(Ce<ce&&0>i(_e,Z)))break e;j[ue]=_e,j[Ce]=Z,ue=Ce}}}return B}function i(j,B){var Z=j.sortIndex-B.sortIndex;return Z!==0?Z:j.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],m=[],g=1,v=null,b=3,S=!1,T=!1,_=!1,D=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function P(j){for(var B=t(m);B!==null;){if(B.callback===null)r(m);else{if(!(B.startTime<=j))break;r(m),B.sortIndex=B.expirationTime,e(h,B)}B=t(m)}}function N(j){if(_=!1,P(j),!T)if(t(h)!==null)T=!0,Y(I);else{var B=t(m);B!==null&&q(N,B.startTime-j)}}function I(j,B){T=!1,_&&(_=!1,O(V),V=-1),S=!0;var Z=b;try{for(P(B),v=t(h);v!==null&&(!(v.expirationTime>B)||j&&!Re());){var ue=v.callback;if(typeof ue=="function"){v.callback=null,b=v.priorityLevel;var ce=ue(v.expirationTime<=B);B=n.unstable_now(),typeof ce=="function"?v.callback=ce:v===t(h)&&r(h),P(B)}else r(h);v=t(h)}if(v!==null)var pe=!0;else{var be=t(m);be!==null&&q(N,be.startTime-B),pe=!1}return pe}finally{v=null,b=Z,S=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var A,R=!1,C=null,V=-1,fe=5,Te=-1;function Re(){return!(n.unstable_now()-Te<fe)}function ke(){if(C!==null){var j=n.unstable_now();Te=j;var B=!0;try{B=C(!0,j)}finally{B?A():(R=!1,C=null)}}else R=!1}if(typeof z=="function")A=function(){z(ke)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,st=Ie.port2;Ie.port1.onmessage=ke,A=function(){st.postMessage(null)}}else A=function(){D(ke,0)};function Y(j){C=j,R||(R=!0,A())}function q(j,B){V=D(function(){j(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_continueExecution=function(){T||S||(T=!0,Y(I))},n.unstable_forceFrameRate=function(j){0>j||125<j||(fe=0<j?Math.floor(1e3/j):5)},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(j){switch(b){case 1:case 2:case 3:var B=3;break;default:B=b}var Z=b;b=B;try{return j()}finally{b=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(j,B){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Z=b;b=j;try{return B()}finally{b=Z}},n.unstable_scheduleCallback=function(j,B,Z){var ue=n.unstable_now();switch(Z=typeof Z=="object"&&Z!==null&&typeof(Z=Z.delay)=="number"&&0<Z?ue+Z:ue,j){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return j={id:g++,callback:B,priorityLevel:j,startTime:Z,expirationTime:ce=Z+ce,sortIndex:-1},Z>ue?(j.sortIndex=Z,e(m,j),t(h)===null&&j===t(m)&&(_?(O(V),V=-1):_=!0,q(N,Z-ue))):(j.sortIndex=ce,e(h,j),T||S||(T=!0,Y(I))),j},n.unstable_shouldYield=Re,n.unstable_wrapCallback=function(j){var B=b;return function(){var Z=b;b=B;try{return j.apply(this,arguments)}finally{b=Z}}}})(xv)),xv)),vv.exports}function wk(){if(pv)return Ln;pv=1;var n=im(),e=bk();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var u=!(typeof window>"u"||window.document===void 0||window.document.createElement===void 0),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function b(s,a,c,f,y,x,k){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=y,this.mustUseProperty=c,this.propertyName=s,this.type=a,this.sanitizeURL=x,this.removeEmptyString=k}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){S[s]=new b(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];S[a]=new b(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){S[s]=new b(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){S[s]=new b(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){S[s]=new b(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){S[s]=new b(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){S[s]=new b(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){S[s]=new b(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){S[s]=new b(s,5,!1,s.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function _(s){return s[1].toUpperCase()}function D(s,a,c,f){var y=S.hasOwnProperty(a)?S[a]:null;(y!==null?y.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&((function(x,k,M,F){if(k==null||(function(H,G,te,X){if(te!==null&&te.type===0)return!1;switch(typeof G){case"function":case"symbol":return!0;case"boolean":return!X&&(te!==null?!te.acceptsBooleans:(H=H.toLowerCase().slice(0,5))!=="data-"&&H!=="aria-");default:return!1}})(x,k,M,F))return!0;if(F)return!1;if(M!==null)switch(M.type){case 3:return!k;case 4:return k===!1;case 5:return isNaN(k);case 6:return isNaN(k)||1>k}return!1})(a,c,y,f)&&(c=null),f||y===null?(function(x){return!!h.call(v,x)||!h.call(g,x)&&(m.test(x)?v[x]=!0:(g[x]=!0,!1))})(a)&&(c===null?s.removeAttribute(a):s.setAttribute(a,""+c)):y.mustUseProperty?s[y.propertyName]=c===null?y.type!==3&&"":c:(a=y.attributeName,f=y.attributeNamespace,c===null?s.removeAttribute(a):(c=(y=y.type)===3||y===4&&c===!0?"":""+c,f?s.setAttributeNS(f,a,c):s.setAttribute(a,c))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(T,_);S[a]=new b(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(T,_);S[a]=new b(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(T,_);S[a]=new b(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){S[s]=new b(s,1,!1,s.toLowerCase(),null,!1,!1)}),S.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){S[s]=new b(s,1,!1,s.toLowerCase(),null,!0,!0)});var O=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),P=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),C=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),Re=Symbol.for("react.memo"),ke=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),st=Symbol.iterator;function Y(s){return s===null||typeof s!="object"?null:typeof(s=st&&s[st]||s["@@iterator"])=="function"?s:null}var q,j=Object.assign;function B(s){if(q===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);q=a&&a[1]||""}return`
`+q+s}var Z=!1;function ue(s,a){if(!s||Z)return"";Z=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(H){var f=H}Reflect.construct(s,[],a)}else{try{a.call()}catch(H){f=H}s.call(a.prototype)}else{try{throw Error()}catch(H){f=H}s()}}catch(H){if(H&&f&&typeof H.stack=="string"){for(var y=H.stack.split(`
`),x=f.stack.split(`
`),k=y.length-1,M=x.length-1;1<=k&&0<=M&&y[k]!==x[M];)M--;for(;1<=k&&0<=M;k--,M--)if(y[k]!==x[M]){if(k!==1||M!==1)do if(k--,0>--M||y[k]!==x[M]){var F=`
`+y[k].replace(" at new "," at ");return s.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",s.displayName)),F}while(1<=k&&0<=M);break}}}finally{Z=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?B(s):""}function ce(s){switch(s.tag){case 5:return B(s.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return s=ue(s.type,!1);case 11:return s=ue(s.type.render,!1);case 1:return s=ue(s.type,!0);default:return""}}function pe(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case N:return"Fragment";case P:return"Portal";case A:return"Profiler";case I:return"StrictMode";case fe:return"Suspense";case Te:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case C:return(s.displayName||"Context")+".Consumer";case R:return(s._context.displayName||"Context")+".Provider";case V:var a=s.render;return(s=s.displayName)||(s=(s=a.displayName||a.name||"")!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Re:return(a=s.displayName||null)!==null?a:pe(s.type)||"Memo";case ke:a=s._payload,s=s._init;try{return pe(s(a))}catch{}}return null}function be(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=(s=a.render).displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(a);case 8:return a===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function we(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":case"object":return s;default:return""}}function Ce(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function _e(s){s._valueTracker||(s._valueTracker=(function(a){var c=Ce(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),y=""+a[c];if(!a.hasOwnProperty(c)&&f!==void 0&&typeof f.get=="function"&&typeof f.set=="function"){var x=f.get,k=f.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return x.call(this)},set:function(M){y=""+M,k.call(this,M)}}),Object.defineProperty(a,c,{enumerable:f.enumerable}),{getValue:function(){return y},setValue:function(M){y=""+M},stopTracking:function(){a._valueTracker=null,delete a[c]}}}})(s))}function ht(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return s&&(f=Ce(s)?s.checked?"true":"false":s.value),(s=f)!==c&&(a.setValue(s),!0)}function ze(s){if((s=s||(typeof document<"u"?document:void 0))===void 0)return null;try{return s.activeElement||s.body}catch{return s.body}}function Ge(s,a){var c=a.checked;return j({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??s._wrapperState.initialChecked})}function re(s,a){var c=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;c=we(a.value!=null?a.value:c),s._wrapperState={initialChecked:f,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function me(s,a){(a=a.checked)!=null&&D(s,"checked",a,!1)}function ee(s,a){me(s,a);var c=we(a.value),f=a.type;if(c!=null)f==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+c):s.value!==""+c&&(s.value=""+c);else if(f==="submit"||f==="reset")return void s.removeAttribute("value");a.hasOwnProperty("value")?Ae(s,a.type,c):a.hasOwnProperty("defaultValue")&&Ae(s,a.type,we(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function le(s,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,c||a===s.value||(s.value=a),s.defaultValue=a}(c=s.name)!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,c!==""&&(s.name=c)}function Ae(s,a,c){a==="number"&&ze(s.ownerDocument)===s||(c==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+c&&(s.defaultValue=""+c))}var Pe=Array.isArray;function Oe(s,a,c,f){if(s=s.options,a){a={};for(var y=0;y<c.length;y++)a["$"+c[y]]=!0;for(c=0;c<s.length;c++)y=a.hasOwnProperty("$"+s[c].value),s[c].selected!==y&&(s[c].selected=y),y&&f&&(s[c].defaultSelected=!0)}else{for(c=""+we(c),a=null,y=0;y<s.length;y++){if(s[y].value===c)return s[y].selected=!0,void(f&&(s[y].defaultSelected=!0));a!==null||s[y].disabled||(a=s[y])}a!==null&&(a.selected=!0)}}function We(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return j({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function dt(s,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(t(92));if(Pe(c)){if(1<c.length)throw Error(t(93));c=c[0]}a=c}a==null&&(a=""),c=a}s._wrapperState={initialValue:we(c)}}function Xt(s,a){var c=we(a.value),f=we(a.defaultValue);c!=null&&((c=""+c)!==s.value&&(s.value=c),a.defaultValue==null&&s.defaultValue!==c&&(s.defaultValue=c)),f!=null&&(s.defaultValue=""+f)}function ot(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function At(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vt(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?At(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var kt,bt,Jt=(bt=function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for((kt=kt||document.createElement("div")).innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=kt.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}},typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,f){MSApp.execUnsafeLocalFunction(function(){return bt(s,a)})}:bt);function hn(s,a){if(a){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3)return void(c.nodeValue=a)}s.textContent=a}var Gt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yt=["Webkit","ms","Moz","O"];function Kt(s,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||Gt.hasOwnProperty(s)&&Gt[s]?(""+a).trim():a+"px"}function Vn(s,a){for(var c in s=s.style,a)if(a.hasOwnProperty(c)){var f=c.indexOf("--")===0,y=Kt(c,a[c],f);c==="float"&&(c="cssFloat"),f?s.setProperty(c,y):s[c]=y}}Object.keys(Gt).forEach(function(s){yt.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),Gt[a]=Gt[s]})});var Ft=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Or(s,a){if(a){if(Ft[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Xn(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=null;function fr(s){return(s=s.target||s.srcElement||window).correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Fn=null,En=null,rn=null;function Ls(s){if(s=vl(s)){if(typeof Fn!="function")throw Error(t(280));var a=s.stateNode;a&&(a=$c(a),Fn(s.stateNode,s.type,a))}}function cs(s){En?rn?rn.push(s):rn=[s]:En=s}function Ri(){if(En){var s=En,a=rn;if(rn=En=null,Ls(s),a)for(s=0;s<a.length;s++)Ls(a[s])}}function _a(s,a){return s(a)}function Os(){}var Qo=!1;function pr(s,a,c){if(Qo)return s(a,c);Qo=!0;try{return _a(s,a,c)}finally{Qo=!1,(En!==null||rn!==null)&&(Os(),Ri())}}function Vs(s,a){var c=s.stateNode;if(c===null)return null;var f=$c(c);if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(f=!((s=s.type)==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(t(231,a,typeof c));return c}var Aa=!1;if(u)try{var us={};Object.defineProperty(us,"passive",{get:function(){Aa=!0}}),window.addEventListener("test",us,us),window.removeEventListener("test",us,us)}catch{Aa=!1}function Yo(s,a,c,f,y,x,k,M,F){var H=Array.prototype.slice.call(arguments,3);try{a.apply(c,H)}catch(G){this.onError(G)}}var Fs=!1,Di=null,Pa=!1,Us=null,Ic={onError:function(s){Fs=!0,Di=s}};function Xo(s,a,c,f,y,x,k,M,F){Fs=!1,Di=null,Yo.apply(Ic,arguments)}function Un(s){var a=s,c=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do 4098&(a=s).flags&&(c=a.return),s=a.return;while(s)}return a.tag===3?c:null}function Vr(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate)!==null&&(a=s.memoizedState),a!==null)return a.dehydrated}return null}function ja(s){if(Un(s)!==s)throw Error(t(188))}function _c(s){return(s=(function(a){var c=a.alternate;if(!c){if((c=Un(a))===null)throw Error(t(188));return c!==a?null:a}for(var f=a,y=c;;){var x=f.return;if(x===null)break;var k=x.alternate;if(k===null){if((y=x.return)!==null){f=y;continue}break}if(x.child===k.child){for(k=x.child;k;){if(k===f)return ja(x),a;if(k===y)return ja(x),c;k=k.sibling}throw Error(t(188))}if(f.return!==y.return)f=x,y=k;else{for(var M=!1,F=x.child;F;){if(F===f){M=!0,f=x,y=k;break}if(F===y){M=!0,y=x,f=k;break}F=F.sibling}if(!M){for(F=k.child;F;){if(F===f){M=!0,f=k,y=x;break}if(F===y){M=!0,y=k,f=x;break}F=F.sibling}if(!M)throw Error(t(189))}}if(f.alternate!==y)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?a:c})(s))!==null?Jo(s):null}function Jo(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=Jo(s);if(a!==null)return a;s=s.sibling}return null}var Zo=e.unstable_scheduleCallback,el=e.unstable_cancelCallback,tl=e.unstable_shouldYield,nl=e.unstable_requestPaint,Nt=e.unstable_now,Ac=e.unstable_getCurrentPriorityLevel,Ra=e.unstable_ImmediatePriority,mr=e.unstable_UserBlockingPriority,In=e.unstable_NormalPriority,Mi=e.unstable_LowPriority,zs=e.unstable_IdlePriority,Bs=null,Xe=null,dn=Math.clz32?Math.clz32:function(s){return s>>>=0,s===0?32:31-(Li(s)/Oi|0)|0},Li=Math.log,Oi=Math.LN2,rl=64,Da=4194304;function Vi(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&s;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&s;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Ma(s,a){var c=s.pendingLanes;if(c===0)return 0;var f=0,y=s.suspendedLanes,x=s.pingedLanes,k=268435455&c;if(k!==0){var M=k&~y;M!==0?f=Vi(M):(x&=k)!==0&&(f=Vi(x))}else(k=c&~y)!==0?f=Vi(k):x!==0&&(f=Vi(x));if(f===0)return 0;if(a!==0&&a!==f&&(a&y)===0&&((y=f&-f)>=(x=a&-a)||y===16&&4194240&x))return a;if(4&f&&(f|=16&c),(a=s.entangledLanes)!==0)for(s=s.entanglements,a&=f;0<a;)y=1<<(c=31-dn(a)),f|=s[c],a&=~y;return f}function cd(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;default:return-1}}function sl(s){return(s=-1073741825&s.pendingLanes)!==0?s:1073741824&s?1073741824:0}function $s(){var s=rl;return!(4194240&(rl<<=1))&&(rl=64),s}function gr(s){for(var a=[],c=0;31>c;c++)a.push(s);return a}function qs(s,a,c){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),(s=s.eventTimes)[a=31-dn(a)]=c}function La(s,a){var c=s.entangledLanes|=a;for(s=s.entanglements;c;){var f=31-dn(c),y=1<<f;y&a|s[f]&a&&(s[f]|=a),c&=~y}}var it=0;function il(s){return 1<(s&=-s)?4<s?268435455&s?16:536870912:4:1}var al,Fr,yr,Pc,Oa,Hs=!1,Fi=[],_n=null,An=null,vr=null,hs=new Map,gt=new Map,Ur=[],ud="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ol(s,a){switch(s){case"focusin":case"focusout":_n=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":hs.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":gt.delete(a.pointerId)}}function Ws(s,a,c,f,y,x){return s===null||s.nativeEvent!==x?(s={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:x,targetContainers:[y]},a!==null&&(a=vl(a))!==null&&Fr(a),s):(s.eventSystemFlags|=f,a=s.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),s)}function ll(s){var a=Hi(s.target);if(a!==null){var c=Un(a);if(c!==null){if((a=c.tag)===13){if((a=Vr(c))!==null)return s.blockedOn=a,void Oa(s.priority,function(){yr(c)})}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated)return void(s.blockedOn=c.tag===3?c.stateNode.containerInfo:null)}}s.blockedOn=null}function ds(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var c=Ua(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(c!==null)return(a=vl(c))!==null&&Fr(a),s.blockedOn=c,!1;var f=new(c=s.nativeEvent).constructor(c.type,c);Ct=f,c.target.dispatchEvent(f),Ct=null,a.shift()}return!0}function xr(s,a,c){ds(s)&&c.delete(a)}function jc(){Hs=!1,_n!==null&&ds(_n)&&(_n=null),An!==null&&ds(An)&&(An=null),vr!==null&&ds(vr)&&(vr=null),hs.forEach(xr),gt.forEach(xr)}function br(s,a){s.blockedOn===a&&(s.blockedOn=null,Hs||(Hs=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,jc)))}function Gs(s){function a(y){return br(y,s)}if(0<Fi.length){br(Fi[0],s);for(var c=1;c<Fi.length;c++){var f=Fi[c];f.blockedOn===s&&(f.blockedOn=null)}}for(_n!==null&&br(_n,s),An!==null&&br(An,s),vr!==null&&br(vr,s),hs.forEach(a),gt.forEach(a),c=0;c<Ur.length;c++)(f=Ur[c]).blockedOn===s&&(f.blockedOn=null);for(;0<Ur.length&&(c=Ur[0]).blockedOn===null;)ll(c),c.blockedOn===null&&Ur.shift()}var zr=O.ReactCurrentBatchConfig,fs=!0;function Rc(s,a,c,f){var y=it,x=zr.transition;zr.transition=null;try{it=1,Fa(s,a,c,f)}finally{it=y,zr.transition=x}}function Va(s,a,c,f){var y=it,x=zr.transition;zr.transition=null;try{it=4,Fa(s,a,c,f)}finally{it=y,zr.transition=x}}function Fa(s,a,c,f){if(fs){var y=Ua(s,a,c,f);if(y===null)wd(s,a,f,Br,c),ol(s,f);else if((function(k,M,F,H,G){switch(M){case"focusin":return _n=Ws(_n,k,M,F,H,G),!0;case"dragenter":return An=Ws(An,k,M,F,H,G),!0;case"mouseover":return vr=Ws(vr,k,M,F,H,G),!0;case"pointerover":var te=G.pointerId;return hs.set(te,Ws(hs.get(te)||null,k,M,F,H,G)),!0;case"gotpointercapture":return te=G.pointerId,gt.set(te,Ws(gt.get(te)||null,k,M,F,H,G)),!0}return!1})(y,s,a,c,f))f.stopPropagation();else if(ol(s,f),4&a&&-1<ud.indexOf(s)){for(;y!==null;){var x=vl(y);if(x!==null&&al(x),(x=Ua(s,a,c,f))===null&&wd(s,a,f,Br,c),x===y)break;y=x}y!==null&&f.stopPropagation()}else wd(s,a,f,null,c)}}var Br=null;function Ua(s,a,c,f){if(Br=null,(s=Hi(s=fr(f)))!==null)if((a=Un(s))===null)s=null;else if((c=a.tag)===13){if((s=Vr(a))!==null)return s;s=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return Br=s,null}function cl(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ac()){case Ra:return 1;case mr:return 4;case In:case Mi:return 16;case zs:return 536870912;default:return 16}default:return 16}}var wr=null,Ui=null,zi=null;function Bi(){if(zi)return zi;var s,a,c=Ui,f=c.length,y="value"in wr?wr.value:wr.textContent,x=y.length;for(s=0;s<f&&c[s]===y[s];s++);var k=f-s;for(a=1;a<=k&&c[f-a]===y[x-a];a++);return zi=y.slice(s,1<a?1-a:void 0)}function $i(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode)===0&&a===13&&(s=13):s=a,s===10&&(s=13),32<=s||s===13?s:0}function qi(){return!0}function $r(){return!1}function fn(s){function a(c,f,y,x,k){for(var M in this._reactName=c,this._targetInst=y,this.type=f,this.nativeEvent=x,this.target=k,this.currentTarget=null,s)s.hasOwnProperty(M)&&(c=s[M],this[M]=c?c(x):x[M]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?qi:$r,this.isPropagationStopped=$r,this}return j(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=qi)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=qi)},persist:function(){},isPersistent:qi}),a}var za,Ba,Ks,Sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sn=fn(Sr),Qs=j({},Sr,{view:0,detail:0}),Dc=fn(Qs),Er=j({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nt,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ks&&(Ks&&s.type==="mousemove"?(za=s.screenX-Ks.screenX,Ba=s.screenY-Ks.screenY):Ba=za=0,Ks=s),za)},movementY:function(s){return"movementY"in s?s.movementY:Ba}}),d=fn(Er),w=fn(j({},Er,{dataTransfer:0})),E=fn(j({},Qs,{relatedTarget:0})),L=fn(j({},Sr,{animationName:0,elapsedTime:0,pseudoElement:0})),Q=j({},Sr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),W=fn(Q),he=fn(j({},Sr,{data:0})),Ne={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Be={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ve={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lt(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):!!(s=ve[s])&&!!a[s]}function nt(){return lt}var at=j({},Qs,{key:function(s){if(s.key){var a=Ne[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=$i(s))===13?"Enter":String.fromCharCode(s):s.type==="keydown"||s.type==="keyup"?Be[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nt,charCode:function(s){return s.type==="keypress"?$i(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?$i(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),mt=fn(at),ft=fn(j({},Er,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=fn(j({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nt})),Ys=fn(j({},Sr,{propertyName:0,elapsedTime:0,pseudoElement:0})),kT=j({},Er,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),CT=fn(kT),NT=[9,13,27,32],hd=u&&"CompositionEvent"in window,ul=null;u&&"documentMode"in document&&(ul=document.documentMode);var IT=u&&"TextEvent"in window&&!ul,Kg=u&&(!hd||ul&&8<ul&&11>=ul),Qg=" ",Yg=!1;function Xg(s,a){switch(s){case"keyup":return NT.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jg(s){return typeof(s=s.detail)=="object"&&"data"in s?s.data:null}var $a=!1,_T={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zg(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!_T[s.type]:a==="textarea"}function e0(s,a,c,f){cs(f),0<(a=Uc(a,"onChange")).length&&(c=new sn("onChange","change",null,c,f),s.push({event:c,listeners:a}))}var Mc=null,hl=null;function AT(s){v0(s,0)}function Lc(s){if(ht(Ka(s)))return s}function PT(s,a){if(s==="change")return a}var t0=!1;if(u){var dd;if(u){var fd="oninput"in document;if(!fd){var n0=document.createElement("div");n0.setAttribute("oninput","return;"),fd=typeof n0.oninput=="function"}dd=fd}else dd=!1;t0=dd&&(!document.documentMode||9<document.documentMode)}function r0(){Mc&&(Mc.detachEvent("onpropertychange",s0),hl=Mc=null)}function s0(s){if(s.propertyName==="value"&&Lc(hl)){var a=[];e0(a,hl,s,fr(s)),pr(AT,a)}}function jT(s,a,c){s==="focusin"?(r0(),hl=c,(Mc=a).attachEvent("onpropertychange",s0)):s==="focusout"&&r0()}function RT(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Lc(hl)}function DT(s,a){if(s==="click")return Lc(a)}function MT(s,a){if(s==="input"||s==="change")return Lc(a)}var Tr=typeof Object.is=="function"?Object.is:function(s,a){return s===a&&(s!==0||1/s==1/a)||s!=s&&a!=a};function dl(s,a){if(Tr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var c=Object.keys(s),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var y=c[f];if(!h.call(a,y)||!Tr(s[y],a[y]))return!1}return!0}function i0(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function a0(s,a){var c,f=i0(s);for(s=0;f;){if(f.nodeType===3){if(c=s+f.textContent.length,s<=a&&c>=a)return{node:f,offset:a-s};s=c}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=i0(f)}}function o0(s,a){return!(!s||!a)&&(s===a||(!s||s.nodeType!==3)&&(a&&a.nodeType===3?o0(s,a.parentNode):"contains"in s?s.contains(a):!!s.compareDocumentPosition&&!!(16&s.compareDocumentPosition(a))))}function l0(){for(var s=window,a=ze();a instanceof s.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(!c)break;a=ze((s=a.contentWindow).document)}return a}function pd(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function LT(s){var a=l0(),c=s.focusedElem,f=s.selectionRange;if(a!==c&&c&&c.ownerDocument&&o0(c.ownerDocument.documentElement,c)){if(f!==null&&pd(c)){if(a=f.start,(s=f.end)===void 0&&(s=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(s,c.value.length);else if((s=(a=c.ownerDocument||document)&&a.defaultView||window).getSelection){s=s.getSelection();var y=c.textContent.length,x=Math.min(f.start,y);f=f.end===void 0?x:Math.min(f.end,y),!s.extend&&x>f&&(y=f,f=x,x=y),y=a0(c,x);var k=a0(c,f);y&&k&&(s.rangeCount!==1||s.anchorNode!==y.node||s.anchorOffset!==y.offset||s.focusNode!==k.node||s.focusOffset!==k.offset)&&((a=a.createRange()).setStart(y.node,y.offset),s.removeAllRanges(),x>f?(s.addRange(a),s.extend(k.node,k.offset)):(a.setEnd(k.node,k.offset),s.addRange(a)))}}for(a=[],s=c;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)(s=a[c]).element.scrollLeft=s.left,s.element.scrollTop=s.top}}var OT=u&&"documentMode"in document&&11>=document.documentMode,qa=null,md=null,fl=null,gd=!1;function c0(s,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;gd||qa==null||qa!==ze(f)||("selectionStart"in(f=qa)&&pd(f)?f={start:f.selectionStart,end:f.selectionEnd}:f={anchorNode:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset},fl&&dl(fl,f)||(fl=f,0<(f=Uc(md,"onSelect")).length&&(a=new sn("onSelect","select",null,a,c),s.push({event:a,listeners:f}),a.target=qa)))}function Oc(s,a){var c={};return c[s.toLowerCase()]=a.toLowerCase(),c["Webkit"+s]="webkit"+a,c["Moz"+s]="moz"+a,c}var Ha={animationend:Oc("Animation","AnimationEnd"),animationiteration:Oc("Animation","AnimationIteration"),animationstart:Oc("Animation","AnimationStart"),transitionend:Oc("Transition","TransitionEnd")},yd={},u0={};function Vc(s){if(yd[s])return yd[s];if(!Ha[s])return s;var a,c=Ha[s];for(a in c)if(c.hasOwnProperty(a)&&a in u0)return yd[s]=c[a];return s}u&&(u0=document.createElement("div").style,"AnimationEvent"in window||(delete Ha.animationend.animation,delete Ha.animationiteration.animation,delete Ha.animationstart.animation),"TransitionEvent"in window||delete Ha.transitionend.transition);var h0=Vc("animationend"),d0=Vc("animationiteration"),f0=Vc("animationstart"),p0=Vc("transitionend"),m0=new Map,g0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xs(s,a){m0.set(s,a),o(a,[s])}for(var vd=0;vd<g0.length;vd++){var xd=g0[vd];Xs(xd.toLowerCase(),"on"+(xd[0].toUpperCase()+xd.slice(1)))}Xs(h0,"onAnimationEnd"),Xs(d0,"onAnimationIteration"),Xs(f0,"onAnimationStart"),Xs("dblclick","onDoubleClick"),Xs("focusin","onFocus"),Xs("focusout","onBlur"),Xs(p0,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VT=new Set("cancel close invalid load scroll toggle".split(" ").concat(pl));function y0(s,a,c){var f=s.type||"unknown-event";s.currentTarget=c,(function(y,x,k,M,F,H,G,te,X){if(Xo.apply(this,arguments),Fs){if(!Fs)throw Error(t(198));var ne=Di;Fs=!1,Di=null,Pa||(Pa=!0,Us=ne)}})(f,a,void 0,s),s.currentTarget=null}function v0(s,a){a=!!(4&a);for(var c=0;c<s.length;c++){var f=s[c],y=f.event;f=f.listeners;e:{var x=void 0;if(a)for(var k=f.length-1;0<=k;k--){var M=f[k],F=M.instance,H=M.currentTarget;if(M=M.listener,F!==x&&y.isPropagationStopped())break e;y0(y,M,H),x=F}else for(k=0;k<f.length;k++){if(F=(M=f[k]).instance,H=M.currentTarget,M=M.listener,F!==x&&y.isPropagationStopped())break e;y0(y,M,H),x=F}}}if(Pa)throw s=Us,Pa=!1,Us=null,s}function wt(s,a){var c=a[Nd];c===void 0&&(c=a[Nd]=new Set);var f=s+"__bubble";c.has(f)||(x0(a,s,2,!1),c.add(f))}function bd(s,a,c){var f=0;a&&(f|=4),x0(c,s,f,a)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function ml(s){if(!s[Fc]){s[Fc]=!0,r.forEach(function(c){c!=="selectionchange"&&(VT.has(c)||bd(c,!1,s),bd(c,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Fc]||(a[Fc]=!0,bd("selectionchange",!1,a))}}function x0(s,a,c,f){switch(cl(a)){case 1:var y=Rc;break;case 4:y=Va;break;default:y=Fa}c=y.bind(null,a,c,s),y=void 0,!Aa||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),f?y!==void 0?s.addEventListener(a,c,{capture:!0,passive:y}):s.addEventListener(a,c,!0):y!==void 0?s.addEventListener(a,c,{passive:y}):s.addEventListener(a,c,!1)}function wd(s,a,c,f,y){var x=f;if(!(1&a||2&a||f===null))e:for(;;){if(f===null)return;var k=f.tag;if(k===3||k===4){var M=f.stateNode.containerInfo;if(M===y||M.nodeType===8&&M.parentNode===y)break;if(k===4)for(k=f.return;k!==null;){var F=k.tag;if((F===3||F===4)&&((F=k.stateNode.containerInfo)===y||F.nodeType===8&&F.parentNode===y))return;k=k.return}for(;M!==null;){if((k=Hi(M))===null)return;if((F=k.tag)===5||F===6){f=x=k;continue e}M=M.parentNode}}f=f.return}pr(function(){var H=x,G=fr(c),te=[];e:{var X=m0.get(s);if(X!==void 0){var ne=sn,oe=s;switch(s){case"keypress":if($i(c)===0)break e;case"keydown":case"keyup":ne=mt;break;case"focusin":oe="focus",ne=E;break;case"focusout":oe="blur",ne=E;break;case"beforeblur":case"afterblur":ne=E;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=d;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=w;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Pn;break;case h0:case d0:case f0:ne=L;break;case p0:ne=Ys;break;case"scroll":ne=Dc;break;case"wheel":ne=CT;break;case"copy":case"cut":case"paste":ne=W;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=ft}var de=!!(4&a),J=!de&&s==="scroll",$=de?X!==null?X+"Capture":null:X;de=[];for(var K,se=H;se!==null;){var xe=(K=se).stateNode;if(K.tag===5&&xe!==null&&(K=xe,$!==null&&(xe=Vs(se,$))!=null&&de.push(gl(se,xe,K))),J)break;se=se.return}0<de.length&&(X=new ne(X,oe,null,c,G),te.push({event:X,listeners:de}))}}if(!(7&a)){if(ne=s==="mouseout"||s==="pointerout",(!(X=s==="mouseover"||s==="pointerover")||c===Ct||!(oe=c.relatedTarget||c.fromElement)||!Hi(oe)&&!oe[ps])&&(ne||X)&&(X=G.window===G?G:(X=G.ownerDocument)?X.defaultView||X.parentWindow:window,ne?(ne=H,(oe=(oe=c.relatedTarget||c.toElement)?Hi(oe):null)!==null&&(oe!==(J=Un(oe))||oe.tag!==5&&oe.tag!==6)&&(oe=null)):(ne=null,oe=H),ne!==oe)){if(de=d,xe="onMouseLeave",$="onMouseEnter",se="mouse",s!=="pointerout"&&s!=="pointerover"||(de=ft,xe="onPointerLeave",$="onPointerEnter",se="pointer"),J=ne==null?X:Ka(ne),K=oe==null?X:Ka(oe),(X=new de(xe,se+"leave",ne,c,G)).target=J,X.relatedTarget=K,xe=null,Hi(G)===H&&((de=new de($,se+"enter",oe,c,G)).target=K,de.relatedTarget=J,xe=de),J=xe,ne&&oe)e:{for($=oe,se=0,K=de=ne;K;K=Wa(K))se++;for(K=0,xe=$;xe;xe=Wa(xe))K++;for(;0<se-K;)de=Wa(de),se--;for(;0<K-se;)$=Wa($),K--;for(;se--;){if(de===$||$!==null&&de===$.alternate)break e;de=Wa(de),$=Wa($)}de=null}else de=null;ne!==null&&b0(te,X,ne,de,!1),oe!==null&&J!==null&&b0(te,J,oe,de,!0)}if((ne=(X=H?Ka(H):window).nodeName&&X.nodeName.toLowerCase())==="select"||ne==="input"&&X.type==="file")var qe=PT;else if(Zg(X))if(t0)qe=MT;else{qe=RT;var ge=jT}else(ne=X.nodeName)&&ne.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(qe=DT);switch(qe&&(qe=qe(s,H))?e0(te,qe,c,G):(ge&&ge(s,X,H),s==="focusout"&&(ge=X._wrapperState)&&ge.controlled&&X.type==="number"&&Ae(X,"number",X.value)),ge=H?Ka(H):window,s){case"focusin":(Zg(ge)||ge.contentEditable==="true")&&(qa=ge,md=H,fl=null);break;case"focusout":fl=md=qa=null;break;case"mousedown":gd=!0;break;case"contextmenu":case"mouseup":case"dragend":gd=!1,c0(te,c,G);break;case"selectionchange":if(OT)break;case"keydown":case"keyup":c0(te,c,G)}var He;if(hd)e:{switch(s){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else $a?Xg(s,c)&&(Ve="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Ve="onCompositionStart");Ve&&(Kg&&c.locale!=="ko"&&($a||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&$a&&(He=Bi()):(Ui="value"in(wr=G)?wr.value:wr.textContent,$a=!0)),0<(ge=Uc(H,Ve)).length&&(Ve=new he(Ve,s,null,c,G),te.push({event:Ve,listeners:ge}),(He||(He=Jg(c))!==null)&&(Ve.data=He))),(He=IT?(function(Fe,ut){switch(Fe){case"compositionend":return Jg(ut);case"keypress":return ut.which!==32?null:(Yg=!0,Qg);case"textInput":return(Fe=ut.data)===Qg&&Yg?null:Fe;default:return null}})(s,c):(function(Fe,ut){if($a)return Fe==="compositionend"||!hd&&Xg(Fe,ut)?(Fe=Bi(),zi=Ui=wr=null,$a=!1,Fe):null;switch(Fe){case"paste":default:return null;case"keypress":if(!(ut.ctrlKey||ut.altKey||ut.metaKey)||ut.ctrlKey&&ut.altKey){if(ut.char&&1<ut.char.length)return ut.char;if(ut.which)return String.fromCharCode(ut.which)}return null;case"compositionend":return Kg&&ut.locale!=="ko"?null:ut.data}})(s,c))&&0<(H=Uc(H,"onBeforeInput")).length&&(G=new he("onBeforeInput","beforeinput",null,c,G),te.push({event:G,listeners:H}),G.data=He)}v0(te,a)})}function gl(s,a,c){return{instance:s,listener:a,currentTarget:c}}function Uc(s,a){for(var c=a+"Capture",f=[];s!==null;){var y=s,x=y.stateNode;y.tag===5&&x!==null&&(y=x,(x=Vs(s,c))!=null&&f.unshift(gl(s,x,y)),(x=Vs(s,a))!=null&&f.push(gl(s,x,y))),s=s.return}return f}function Wa(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function b0(s,a,c,f,y){for(var x=a._reactName,k=[];c!==null&&c!==f;){var M=c,F=M.alternate,H=M.stateNode;if(F!==null&&F===f)break;M.tag===5&&H!==null&&(M=H,y?(F=Vs(c,x))!=null&&k.unshift(gl(c,F,M)):y||(F=Vs(c,x))!=null&&k.push(gl(c,F,M))),c=c.return}k.length!==0&&s.push({event:a,listeners:k})}var FT=/\r\n?/g,UT=/\u0000|\uFFFD/g;function w0(s){return(typeof s=="string"?s:""+s).replace(FT,`
`).replace(UT,"")}function zc(s,a,c){if(a=w0(a),w0(s)!==a&&c)throw Error(t(425))}function Bc(){}var Sd=null,Ed=null;function Td(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var kd=typeof setTimeout=="function"?setTimeout:void 0,zT=typeof clearTimeout=="function"?clearTimeout:void 0,S0=typeof Promise=="function"?Promise:void 0,BT=typeof queueMicrotask=="function"?queueMicrotask:S0!==void 0?function(s){return S0.resolve(null).then(s).catch($T)}:kd;function $T(s){setTimeout(function(){throw s})}function Cd(s,a){var c=a,f=0;do{var y=c.nextSibling;if(s.removeChild(c),y&&y.nodeType===8)if((c=y.data)==="/$"){if(f===0)return s.removeChild(y),void Gs(a);f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=y}while(c);Gs(a)}function Js(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if((a=s.data)==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function E0(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return s;a--}else c==="/$"&&a++}s=s.previousSibling}return null}var Ga=Math.random().toString(36).slice(2),qr="__reactFiber$"+Ga,yl="__reactProps$"+Ga,ps="__reactContainer$"+Ga,Nd="__reactEvents$"+Ga,qT="__reactListeners$"+Ga,HT="__reactHandles$"+Ga;function Hi(s){var a=s[qr];if(a)return a;for(var c=s.parentNode;c;){if(a=c[ps]||c[qr]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(s=E0(s);s!==null;){if(c=s[qr])return c;s=E0(s)}return a}c=(s=c).parentNode}return null}function vl(s){return!(s=s[qr]||s[ps])||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Ka(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function $c(s){return s[yl]||null}var Id=[],Qa=-1;function Zs(s){return{current:s}}function It(s){0>Qa||(s.current=Id[Qa],Id[Qa]=null,Qa--)}function vt(s,a){Qa++,Id[Qa]=s.current,s.current=a}var ei={},pn=Zs(ei),jn=Zs(!1),Wi=ei;function Ya(s,a){var c=s.type.contextTypes;if(!c)return ei;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var y,x={};for(y in c)x[y]=a[y];return f&&((s=s.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=x),x}function zn(s){return(s=s.childContextTypes)!=null}function _d(){It(jn),It(pn)}function T0(s,a,c){if(pn.current!==ei)throw Error(t(168));vt(pn,a),vt(jn,c)}function k0(s,a,c){var f=s.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return c;for(var y in f=f.getChildContext())if(!(y in a))throw Error(t(108,be(s)||"Unknown",y));return j({},c,f)}function qc(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||ei,Wi=pn.current,vt(pn,s),vt(jn,jn.current),!0}function C0(s,a,c){var f=s.stateNode;if(!f)throw Error(t(169));c?(s=k0(s,a,Wi),f.__reactInternalMemoizedMergedChildContext=s,It(jn),It(pn),vt(pn,s)):It(jn),vt(jn,c)}var ms=null,Hc=!1,Ad=!1;function N0(s){ms===null?ms=[s]:ms.push(s)}function ti(){if(!Ad&&ms!==null){Ad=!0;var s=0,a=it;try{var c=ms;for(it=1;s<c.length;s++){var f=c[s];do f=f(!0);while(f!==null)}ms=null,Hc=!1}catch(y){throw ms!==null&&(ms=ms.slice(s+1)),Zo(Ra,ti),y}finally{it=a,Ad=!1}}return null}var Xa=[],Ja=0,Wc=null,Gc=0,Jn=[],Zn=0,Gi=null,Hr=1,gs="";function Ki(s,a){Xa[Ja++]=Gc,Xa[Ja++]=Wc,Wc=s,Gc=a}function I0(s,a,c){Jn[Zn++]=Hr,Jn[Zn++]=gs,Jn[Zn++]=Gi,Gi=s;var f=Hr;s=gs;var y=32-dn(f)-1;f&=~(1<<y),c+=1;var x=32-dn(a)+y;if(30<x){var k=y-y%5;x=(f&(1<<k)-1).toString(32),f>>=k,y-=k,Hr=1<<32-dn(a)+y|c<<y|f,gs=x+s}else Hr=1<<x|c<<y|f,gs=s}function Pd(s){s.return!==null&&(Ki(s,1),I0(s,1,0))}function jd(s){for(;s===Wc;)Wc=Xa[--Ja],Xa[Ja]=null,Gc=Xa[--Ja],Xa[Ja]=null;for(;s===Gi;)Gi=Jn[--Zn],Jn[Zn]=null,gs=Jn[--Zn],Jn[Zn]=null,Hr=Jn[--Zn],Jn[Zn]=null}var Bn=null,$n=null,_t=!1,kr=null;function _0(s,a){var c=rr(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=s,(a=s.deletions)===null?(s.deletions=[c],s.flags|=16):a.push(c)}function A0(s,a){switch(s.tag){case 5:var c=s.type;return(a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a)!==null&&(s.stateNode=a,Bn=s,$n=Js(a.firstChild),!0);case 6:return(a=s.pendingProps===""||a.nodeType!==3?null:a)!==null&&(s.stateNode=a,Bn=s,$n=null,!0);case 13:return(a=a.nodeType!==8?null:a)!==null&&(c=Gi!==null?{id:Hr,overflow:gs}:null,s.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},(c=rr(18,null,null,0)).stateNode=a,c.return=s,s.child=c,Bn=s,$n=null,!0);default:return!1}}function Rd(s){return!(!(1&s.mode)||128&s.flags)}function Dd(s){if(_t){var a=$n;if(a){var c=a;if(!A0(s,a)){if(Rd(s))throw Error(t(418));a=Js(c.nextSibling);var f=Bn;a&&A0(s,a)?_0(f,c):(s.flags=-4097&s.flags|2,_t=!1,Bn=s)}}else{if(Rd(s))throw Error(t(418));s.flags=-4097&s.flags|2,_t=!1,Bn=s}}}function P0(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Bn=s}function Kc(s){if(s!==Bn)return!1;if(!_t)return P0(s),_t=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=(a=s.type)!=="head"&&a!=="body"&&!Td(s.type,s.memoizedProps)),a&&(a=$n)){if(Rd(s))throw j0(),Error(t(418));for(;a;)_0(s,a),a=Js(a.nextSibling)}if(P0(s),s.tag===13){if(!(s=(s=s.memoizedState)!==null?s.dehydrated:null))throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"){if(a===0){$n=Js(s.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}s=s.nextSibling}$n=null}}else $n=Bn?Js(s.stateNode.nextSibling):null;return!0}function j0(){for(var s=$n;s;)s=Js(s.nextSibling)}function Za(){$n=Bn=null,_t=!1}function Md(s){kr===null?kr=[s]:kr.push(s)}var WT=O.ReactCurrentBatchConfig;function xl(s,a,c){if((s=c.ref)!==null&&typeof s!="function"&&typeof s!="object"){if(c._owner){if(c=c._owner){if(c.tag!==1)throw Error(t(309));var f=c.stateNode}if(!f)throw Error(t(147,s));var y=f,x=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===x?a.ref:(a=function(k){var M=y.refs;k===null?delete M[x]:M[x]=k},a._stringRef=x,a)}if(typeof s!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,s))}return s}function Qc(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function R0(s){return(0,s._init)(s._payload)}function D0(s){function a(J,$){if(s){var K=J.deletions;K===null?(J.deletions=[$],J.flags|=16):K.push($)}}function c(J,$){if(!s)return null;for(;$!==null;)a(J,$),$=$.sibling;return null}function f(J,$){for(J=new Map;$!==null;)$.key!==null?J.set($.key,$):J.set($.index,$),$=$.sibling;return J}function y(J,$){return(J=ui(J,$)).index=0,J.sibling=null,J}function x(J,$,K){return J.index=K,s?(K=J.alternate)!==null?(K=K.index)<$?(J.flags|=2,$):K:(J.flags|=2,$):(J.flags|=1048576,$)}function k(J){return s&&J.alternate===null&&(J.flags|=2),J}function M(J,$,K,se){return $===null||$.tag!==6?(($=kf(K,J.mode,se)).return=J,$):(($=y($,K)).return=J,$)}function F(J,$,K,se){var xe=K.type;return xe===N?G(J,$,K.props.children,se,K.key):$!==null&&($.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===ke&&R0(xe)===$.type)?((se=y($,K.props)).ref=xl(J,$,K),se.return=J,se):((se=xu(K.type,K.key,K.props,null,J.mode,se)).ref=xl(J,$,K),se.return=J,se)}function H(J,$,K,se){return $===null||$.tag!==4||$.stateNode.containerInfo!==K.containerInfo||$.stateNode.implementation!==K.implementation?(($=Cf(K,J.mode,se)).return=J,$):(($=y($,K.children||[])).return=J,$)}function G(J,$,K,se,xe){return $===null||$.tag!==7?(($=ta(K,J.mode,se,xe)).return=J,$):(($=y($,K)).return=J,$)}function te(J,$,K){if(typeof $=="string"&&$!==""||typeof $=="number")return($=kf(""+$,J.mode,K)).return=J,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case z:return(K=xu($.type,$.key,$.props,null,J.mode,K)).ref=xl(J,null,$),K.return=J,K;case P:return($=Cf($,J.mode,K)).return=J,$;case ke:return te(J,(0,$._init)($._payload),K)}if(Pe($)||Y($))return($=ta($,J.mode,K,null)).return=J,$;Qc(J,$)}return null}function X(J,$,K,se){var xe=$!==null?$.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return xe!==null?null:M(J,$,""+K,se);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case z:return K.key===xe?F(J,$,K,se):null;case P:return K.key===xe?H(J,$,K,se):null;case ke:return X(J,$,(xe=K._init)(K._payload),se)}if(Pe(K)||Y(K))return xe!==null?null:G(J,$,K,se,null);Qc(J,K)}return null}function ne(J,$,K,se,xe){if(typeof se=="string"&&se!==""||typeof se=="number")return M($,J=J.get(K)||null,""+se,xe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case z:return F($,J=J.get(se.key===null?K:se.key)||null,se,xe);case P:return H($,J=J.get(se.key===null?K:se.key)||null,se,xe);case ke:return ne(J,$,K,(0,se._init)(se._payload),xe)}if(Pe(se)||Y(se))return G($,J=J.get(K)||null,se,xe,null);Qc($,se)}return null}function oe(J,$,K,se){for(var xe=null,qe=null,ge=$,He=$=0,Ve=null;ge!==null&&He<K.length;He++){ge.index>He?(Ve=ge,ge=null):Ve=ge.sibling;var Fe=X(J,ge,K[He],se);if(Fe===null){ge===null&&(ge=Ve);break}s&&ge&&Fe.alternate===null&&a(J,ge),$=x(Fe,$,He),qe===null?xe=Fe:qe.sibling=Fe,qe=Fe,ge=Ve}if(He===K.length)return c(J,ge),_t&&Ki(J,He),xe;if(ge===null){for(;He<K.length;He++)(ge=te(J,K[He],se))!==null&&($=x(ge,$,He),qe===null?xe=ge:qe.sibling=ge,qe=ge);return _t&&Ki(J,He),xe}for(ge=f(J,ge);He<K.length;He++)(Ve=ne(ge,J,He,K[He],se))!==null&&(s&&Ve.alternate!==null&&ge.delete(Ve.key===null?He:Ve.key),$=x(Ve,$,He),qe===null?xe=Ve:qe.sibling=Ve,qe=Ve);return s&&ge.forEach(function(ut){return a(J,ut)}),_t&&Ki(J,He),xe}function de(J,$,K,se){var xe=Y(K);if(typeof xe!="function")throw Error(t(150));if((K=xe.call(K))==null)throw Error(t(151));for(var qe=xe=null,ge=$,He=$=0,Ve=null,Fe=K.next();ge!==null&&!Fe.done;He++,Fe=K.next()){ge.index>He?(Ve=ge,ge=null):Ve=ge.sibling;var ut=X(J,ge,Fe.value,se);if(ut===null){ge===null&&(ge=Ve);break}s&&ge&&ut.alternate===null&&a(J,ge),$=x(ut,$,He),qe===null?xe=ut:qe.sibling=ut,qe=ut,ge=Ve}if(Fe.done)return c(J,ge),_t&&Ki(J,He),xe;if(ge===null){for(;!Fe.done;He++,Fe=K.next())(Fe=te(J,Fe.value,se))!==null&&($=x(Fe,$,He),qe===null?xe=Fe:qe.sibling=Fe,qe=Fe);return _t&&Ki(J,He),xe}for(ge=f(J,ge);!Fe.done;He++,Fe=K.next())(Fe=ne(ge,J,He,Fe.value,se))!==null&&(s&&Fe.alternate!==null&&ge.delete(Fe.key===null?He:Fe.key),$=x(Fe,$,He),qe===null?xe=Fe:qe.sibling=Fe,qe=Fe);return s&&ge.forEach(function(uo){return a(J,uo)}),_t&&Ki(J,He),xe}return function J($,K,se,xe){if(typeof se=="object"&&se!==null&&se.type===N&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case z:e:{for(var qe=se.key,ge=K;ge!==null;){if(ge.key===qe){if((qe=se.type)===N){if(ge.tag===7){c($,ge.sibling),(K=y(ge,se.props.children)).return=$,$=K;break e}}else if(ge.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===ke&&R0(qe)===ge.type){c($,ge.sibling),(K=y(ge,se.props)).ref=xl($,ge,se),K.return=$,$=K;break e}c($,ge);break}a($,ge),ge=ge.sibling}se.type===N?((K=ta(se.props.children,$.mode,xe,se.key)).return=$,$=K):((xe=xu(se.type,se.key,se.props,null,$.mode,xe)).ref=xl($,K,se),xe.return=$,$=xe)}return k($);case P:e:{for(ge=se.key;K!==null;){if(K.key===ge){if(K.tag===4&&K.stateNode.containerInfo===se.containerInfo&&K.stateNode.implementation===se.implementation){c($,K.sibling),(K=y(K,se.children||[])).return=$,$=K;break e}c($,K);break}a($,K),K=K.sibling}(K=Cf(se,$.mode,xe)).return=$,$=K}return k($);case ke:return J($,K,(ge=se._init)(se._payload),xe)}if(Pe(se))return oe($,K,se,xe);if(Y(se))return de($,K,se,xe);Qc($,se)}return typeof se=="string"&&se!==""||typeof se=="number"?(se=""+se,K!==null&&K.tag===6?(c($,K.sibling),(K=y(K,se)).return=$,$=K):(c($,K),(K=kf(se,$.mode,xe)).return=$,$=K),k($)):c($,K)}}var eo=D0(!0),M0=D0(!1),Yc=Zs(null),Xc=null,to=null,Ld=null;function Od(){Ld=to=Xc=null}function Vd(s){var a=Yc.current;It(Yc),s._currentValue=a}function Fd(s,a,c){for(;s!==null;){var f=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),s===c)break;s=s.return}}function no(s,a){Xc=s,Ld=to=null,(s=s.dependencies)!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(Rn=!0),s.firstContext=null)}function er(s){var a=s._currentValue;if(Ld!==s)if(s={context:s,memoizedValue:a,next:null},to===null){if(Xc===null)throw Error(t(308));to=s,Xc.dependencies={lanes:0,firstContext:s}}else to=to.next=s;return a}var Qi=null;function Ud(s){Qi===null?Qi=[s]:Qi.push(s)}function L0(s,a,c,f){var y=a.interleaved;return y===null?(c.next=c,Ud(a)):(c.next=y.next,y.next=c),a.interleaved=c,ys(s,f)}function ys(s,a){s.lanes|=a;var c=s.alternate;for(c!==null&&(c.lanes|=a),c=s,s=s.return;s!==null;)s.childLanes|=a,(c=s.alternate)!==null&&(c.childLanes|=a),c=s,s=s.return;return c.tag===3?c.stateNode:null}var ni=!1;function zd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function O0(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function vs(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function ri(s,a,c){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,2&ct){var y=f.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),f.pending=a,ys(s,c)}return(y=f.interleaved)===null?(a.next=a,Ud(f)):(a.next=y.next,y.next=a),f.interleaved=a,ys(s,c)}function Jc(s,a,c){if((a=a.updateQueue)!==null&&(a=a.shared,4194240&c)){var f=a.lanes;c|=f&=s.pendingLanes,a.lanes=c,La(s,c)}}function V0(s,a){var c=s.updateQueue,f=s.alternate;if(f!==null&&c===(f=f.updateQueue)){var y=null,x=null;if((c=c.firstBaseUpdate)!==null){do{var k={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};x===null?y=x=k:x=x.next=k,c=c.next}while(c!==null);x===null?y=x=a:x=x.next=a}else y=x=a;return c={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:f.shared,effects:f.effects},void(s.updateQueue=c)}(s=c.lastBaseUpdate)===null?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=a}function Zc(s,a,c,f){var y=s.updateQueue;ni=!1;var x=y.firstBaseUpdate,k=y.lastBaseUpdate,M=y.shared.pending;if(M!==null){y.shared.pending=null;var F=M,H=F.next;F.next=null,k===null?x=H:k.next=H,k=F;var G=s.alternate;G!==null&&(M=(G=G.updateQueue).lastBaseUpdate)!==k&&(M===null?G.firstBaseUpdate=H:M.next=H,G.lastBaseUpdate=F)}if(x!==null){var te=y.baseState;for(k=0,G=H=F=null,M=x;;){var X=M.lane,ne=M.eventTime;if((f&X)===X){G!==null&&(G=G.next={eventTime:ne,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var oe=s,de=M;switch(X=a,ne=c,de.tag){case 1:if(typeof(oe=de.payload)=="function"){te=oe.call(ne,te,X);break e}te=oe;break e;case 3:oe.flags=-65537&oe.flags|128;case 0:if((X=typeof(oe=de.payload)=="function"?oe.call(ne,te,X):oe)==null)break e;te=j({},te,X);break e;case 2:ni=!0}}M.callback!==null&&M.lane!==0&&(s.flags|=64,(X=y.effects)===null?y.effects=[M]:X.push(M))}else ne={eventTime:ne,lane:X,tag:M.tag,payload:M.payload,callback:M.callback,next:null},G===null?(H=G=ne,F=te):G=G.next=ne,k|=X;if((M=M.next)===null){if((M=y.shared.pending)===null)break;M=(X=M).next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}if(G===null&&(F=te),y.baseState=F,y.firstBaseUpdate=H,y.lastBaseUpdate=G,(a=y.shared.interleaved)!==null){y=a;do k|=y.lane,y=y.next;while(y!==a)}else x===null&&(y.shared.lanes=0);Ji|=k,s.lanes=k,s.memoizedState=te}}function F0(s,a,c){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var f=s[a],y=f.callback;if(y!==null){if(f.callback=null,f=c,typeof y!="function")throw Error(t(191,y));y.call(f)}}}var bl={},Wr=Zs(bl),wl=Zs(bl),Sl=Zs(bl);function Yi(s){if(s===bl)throw Error(t(174));return s}function Bd(s,a){switch(vt(Sl,a),vt(wl,s),vt(Wr,bl),s=a.nodeType){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Vt(null,"");break;default:a=Vt(a=(s=s===8?a.parentNode:a).namespaceURI||null,s=s.tagName)}It(Wr),vt(Wr,a)}function ro(){It(Wr),It(wl),It(Sl)}function U0(s){Yi(Sl.current);var a=Yi(Wr.current),c=Vt(a,s.type);a!==c&&(vt(wl,s),vt(Wr,c))}function $d(s){wl.current===s&&(It(Wr),It(wl))}var Mt=Zs(0);function eu(s){for(var a=s;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&((c=c.dehydrated)===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(128&a.flags)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var qd=[];function Hd(){for(var s=0;s<qd.length;s++)qd[s]._workInProgressVersionPrimary=null;qd.length=0}var tu=O.ReactCurrentDispatcher,Wd=O.ReactCurrentBatchConfig,Xi=0,Pt=null,Zt=null,en=null,nu=!1,El=!1,Tl=0,GT=0;function mn(){throw Error(t(321))}function Gd(s,a){if(a===null)return!1;for(var c=0;c<a.length&&c<s.length;c++)if(!Tr(s[c],a[c]))return!1;return!0}function Kd(s,a,c,f,y,x){if(Xi=x,Pt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,tu.current=s===null||s.memoizedState===null?XT:JT,s=c(f,y),El){x=0;do{if(El=!1,Tl=0,25<=x)throw Error(t(301));x+=1,en=Zt=null,a.updateQueue=null,tu.current=ZT,s=c(f,y)}while(El)}if(tu.current=iu,a=Zt!==null&&Zt.next!==null,Xi=0,en=Zt=Pt=null,nu=!1,a)throw Error(t(300));return s}function Qd(){var s=Tl!==0;return Tl=0,s}function Gr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?Pt.memoizedState=en=s:en=en.next=s,en}function tr(){if(Zt===null){var s=Pt.alternate;s=s!==null?s.memoizedState:null}else s=Zt.next;var a=en===null?Pt.memoizedState:en.next;if(a!==null)en=a,Zt=s;else{if(s===null)throw Error(t(310));s={memoizedState:(Zt=s).memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},en===null?Pt.memoizedState=en=s:en=en.next=s}return en}function kl(s,a){return typeof a=="function"?a(s):a}function Yd(s){var a=tr(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=s;var f=Zt,y=f.baseQueue,x=c.pending;if(x!==null){if(y!==null){var k=y.next;y.next=x.next,x.next=k}f.baseQueue=y=x,c.pending=null}if(y!==null){x=y.next,f=f.baseState;var M=k=null,F=null,H=x;do{var G=H.lane;if((Xi&G)===G)F!==null&&(F=F.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),f=H.hasEagerState?H.eagerState:s(f,H.action);else{var te={lane:G,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};F===null?(M=F=te,k=f):F=F.next=te,Pt.lanes|=G,Ji|=G}H=H.next}while(H!==null&&H!==x);F===null?k=f:F.next=M,Tr(f,a.memoizedState)||(Rn=!0),a.memoizedState=f,a.baseState=k,a.baseQueue=F,c.lastRenderedState=f}if((s=c.interleaved)!==null){y=s;do x=y.lane,Pt.lanes|=x,Ji|=x,y=y.next;while(y!==s)}else y===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function Xd(s){var a=tr(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=s;var f=c.dispatch,y=c.pending,x=a.memoizedState;if(y!==null){c.pending=null;var k=y=y.next;do x=s(x,k.action),k=k.next;while(k!==y);Tr(x,a.memoizedState)||(Rn=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),c.lastRenderedState=x}return[x,f]}function z0(){}function B0(s,a){var c=Pt,f=tr(),y=a(),x=!Tr(f.memoizedState,y);if(x&&(f.memoizedState=y,Rn=!0),f=f.queue,Jd(H0.bind(null,c,f,s),[s]),f.getSnapshot!==a||x||en!==null&&1&en.memoizedState.tag){if(c.flags|=2048,Cl(9,q0.bind(null,c,f,y,a),void 0,null),tn===null)throw Error(t(349));30&Xi||$0(c,a,y)}return y}function $0(s,a,c){s.flags|=16384,s={getSnapshot:a,value:c},(a=Pt.updateQueue)===null?(a={lastEffect:null,stores:null},Pt.updateQueue=a,a.stores=[s]):(c=a.stores)===null?a.stores=[s]:c.push(s)}function q0(s,a,c,f){a.value=c,a.getSnapshot=f,W0(a)&&G0(s)}function H0(s,a,c){return c(function(){W0(a)&&G0(s)})}function W0(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!Tr(s,c)}catch{return!0}}function G0(s){var a=ys(s,1);a!==null&&Nr(a,s,1,-1)}function K0(s){var a=Gr();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:s},a.queue=s,s=s.dispatch=YT.bind(null,Pt,s),[a.memoizedState,s]}function Cl(s,a,c,f){return s={tag:s,create:a,destroy:c,deps:f,next:null},(a=Pt.updateQueue)===null?(a={lastEffect:null,stores:null},Pt.updateQueue=a,a.lastEffect=s.next=s):(c=a.lastEffect)===null?a.lastEffect=s.next=s:(f=c.next,c.next=s,s.next=f,a.lastEffect=s),s}function Q0(){return tr().memoizedState}function ru(s,a,c,f){var y=Gr();Pt.flags|=s,y.memoizedState=Cl(1|a,c,void 0,f===void 0?null:f)}function su(s,a,c,f){var y=tr();f=f===void 0?null:f;var x=void 0;if(Zt!==null){var k=Zt.memoizedState;if(x=k.destroy,f!==null&&Gd(f,k.deps))return void(y.memoizedState=Cl(a,c,x,f))}Pt.flags|=s,y.memoizedState=Cl(1|a,c,x,f)}function Y0(s,a){return ru(8390656,8,s,a)}function Jd(s,a){return su(2048,8,s,a)}function X0(s,a){return su(4,2,s,a)}function J0(s,a){return su(4,4,s,a)}function Z0(s,a){return typeof a=="function"?(s=s(),a(s),function(){a(null)}):a!=null?(s=s(),a.current=s,function(){a.current=null}):void 0}function ey(s,a,c){return c=c!=null?c.concat([s]):null,su(4,4,Z0.bind(null,a,s),c)}function Zd(){}function ty(s,a){var c=tr();a=a===void 0?null:a;var f=c.memoizedState;return f!==null&&a!==null&&Gd(a,f[1])?f[0]:(c.memoizedState=[s,a],s)}function ny(s,a){var c=tr();a=a===void 0?null:a;var f=c.memoizedState;return f!==null&&a!==null&&Gd(a,f[1])?f[0]:(s=s(),c.memoizedState=[s,a],s)}function ry(s,a,c){return 21&Xi?(Tr(c,a)||(c=$s(),Pt.lanes|=c,Ji|=c,s.baseState=!0),a):(s.baseState&&(s.baseState=!1,Rn=!0),s.memoizedState=c)}function KT(s,a){var c=it;it=c!==0&&4>c?c:4,s(!0);var f=Wd.transition;Wd.transition={};try{s(!1),a()}finally{it=c,Wd.transition=f}}function sy(){return tr().memoizedState}function QT(s,a,c){var f=li(s);c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},iy(s)?ay(a,c):(c=L0(s,a,c,f))!==null&&(Nr(c,s,f,Cn()),oy(c,a,f))}function YT(s,a,c){var f=li(s),y={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(iy(s))ay(a,y);else{var x=s.alternate;if(s.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer)!==null)try{var k=a.lastRenderedState,M=x(k,c);if(y.hasEagerState=!0,y.eagerState=M,Tr(M,k)){var F=a.interleaved;return F===null?(y.next=y,Ud(a)):(y.next=F.next,F.next=y),void(a.interleaved=y)}}catch{}(c=L0(s,a,y,f))!==null&&(Nr(c,s,f,y=Cn()),oy(c,a,f))}}function iy(s){var a=s.alternate;return s===Pt||a!==null&&a===Pt}function ay(s,a){El=nu=!0;var c=s.pending;c===null?a.next=a:(a.next=c.next,c.next=a),s.pending=a}function oy(s,a,c){if(4194240&c){var f=a.lanes;c|=f&=s.pendingLanes,a.lanes=c,La(s,c)}}var iu={readContext:er,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useInsertionEffect:mn,useLayoutEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useMutableSource:mn,useSyncExternalStore:mn,useId:mn,unstable_isNewReconciler:!1},XT={readContext:er,useCallback:function(s,a){return Gr().memoizedState=[s,a===void 0?null:a],s},useContext:er,useEffect:Y0,useImperativeHandle:function(s,a,c){return c=c!=null?c.concat([s]):null,ru(4194308,4,Z0.bind(null,a,s),c)},useLayoutEffect:function(s,a){return ru(4194308,4,s,a)},useInsertionEffect:function(s,a){return ru(4,2,s,a)},useMemo:function(s,a){var c=Gr();return a=a===void 0?null:a,s=s(),c.memoizedState=[s,a],s},useReducer:function(s,a,c){var f=Gr();return a=c!==void 0?c(a):a,f.memoizedState=f.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},f.queue=s,s=s.dispatch=QT.bind(null,Pt,s),[f.memoizedState,s]},useRef:function(s){return s={current:s},Gr().memoizedState=s},useState:K0,useDebugValue:Zd,useDeferredValue:function(s){return Gr().memoizedState=s},useTransition:function(){var s=K0(!1),a=s[0];return s=KT.bind(null,s[1]),Gr().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,c){var f=Pt,y=Gr();if(_t){if(c===void 0)throw Error(t(407));c=c()}else{if(c=a(),tn===null)throw Error(t(349));30&Xi||$0(f,a,c)}y.memoizedState=c;var x={value:c,getSnapshot:a};return y.queue=x,Y0(H0.bind(null,f,x,s),[s]),f.flags|=2048,Cl(9,q0.bind(null,f,x,c,a),void 0,null),c},useId:function(){var s=Gr(),a=tn.identifierPrefix;if(_t){var c=gs;a=":"+a+"R"+(c=(Hr&~(1<<32-dn(Hr)-1)).toString(32)+c),0<(c=Tl++)&&(a+="H"+c.toString(32)),a+=":"}else a=":"+a+"r"+(c=GT++).toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},JT={readContext:er,useCallback:ty,useContext:er,useEffect:Jd,useImperativeHandle:ey,useInsertionEffect:X0,useLayoutEffect:J0,useMemo:ny,useReducer:Yd,useRef:Q0,useState:function(){return Yd(kl)},useDebugValue:Zd,useDeferredValue:function(s){return ry(tr(),Zt.memoizedState,s)},useTransition:function(){return[Yd(kl)[0],tr().memoizedState]},useMutableSource:z0,useSyncExternalStore:B0,useId:sy,unstable_isNewReconciler:!1},ZT={readContext:er,useCallback:ty,useContext:er,useEffect:Jd,useImperativeHandle:ey,useInsertionEffect:X0,useLayoutEffect:J0,useMemo:ny,useReducer:Xd,useRef:Q0,useState:function(){return Xd(kl)},useDebugValue:Zd,useDeferredValue:function(s){var a=tr();return Zt===null?a.memoizedState=s:ry(a,Zt.memoizedState,s)},useTransition:function(){return[Xd(kl)[0],tr().memoizedState]},useMutableSource:z0,useSyncExternalStore:B0,useId:sy,unstable_isNewReconciler:!1};function Cr(s,a){if(s&&s.defaultProps){for(var c in a=j({},a),s=s.defaultProps)a[c]===void 0&&(a[c]=s[c]);return a}return a}function ef(s,a,c,f){c=(c=c(f,a=s.memoizedState))==null?a:j({},a,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var au={isMounted:function(s){return!!(s=s._reactInternals)&&Un(s)===s},enqueueSetState:function(s,a,c){s=s._reactInternals;var f=Cn(),y=li(s),x=vs(f,y);x.payload=a,c!=null&&(x.callback=c),(a=ri(s,x,y))!==null&&(Nr(a,s,y,f),Jc(a,s,y))},enqueueReplaceState:function(s,a,c){s=s._reactInternals;var f=Cn(),y=li(s),x=vs(f,y);x.tag=1,x.payload=a,c!=null&&(x.callback=c),(a=ri(s,x,y))!==null&&(Nr(a,s,y,f),Jc(a,s,y))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var c=Cn(),f=li(s),y=vs(c,f);y.tag=2,a!=null&&(y.callback=a),(a=ri(s,y,f))!==null&&(Nr(a,s,f,c),Jc(a,s,f))}};function ly(s,a,c,f,y,x,k){return typeof(s=s.stateNode).shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,x,k):!a.prototype||!a.prototype.isPureReactComponent||!dl(c,f)||!dl(y,x)}function cy(s,a,c){var f=!1,y=ei,x=a.contextType;return typeof x=="object"&&x!==null?x=er(x):(y=zn(a)?Wi:pn.current,x=(f=(f=a.contextTypes)!=null)?Ya(s,y):ei),a=new a(c,x),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=au,s.stateNode=a,a._reactInternals=s,f&&((s=s.stateNode).__reactInternalMemoizedUnmaskedChildContext=y,s.__reactInternalMemoizedMaskedChildContext=x),a}function uy(s,a,c,f){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==s&&au.enqueueReplaceState(a,a.state,null)}function tf(s,a,c,f){var y=s.stateNode;y.props=c,y.state=s.memoizedState,y.refs={},zd(s);var x=a.contextType;typeof x=="object"&&x!==null?y.context=er(x):(x=zn(a)?Wi:pn.current,y.context=Ya(s,x)),y.state=s.memoizedState,typeof(x=a.getDerivedStateFromProps)=="function"&&(ef(s,a,x,c),y.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&au.enqueueReplaceState(y,y.state,null),Zc(s,c,y,f),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308)}function so(s,a){try{var c="",f=a;do c+=ce(f),f=f.return;while(f);var y=c}catch(x){y=`
Error generating stack: `+x.message+`
`+x.stack}return{value:s,source:a,stack:y,digest:null}}function nf(s,a,c){return{value:s,source:null,stack:c??null,digest:a??null}}var ek=typeof WeakMap=="function"?WeakMap:Map;function hy(s,a,c){(c=vs(-1,c)).tag=3,c.payload={element:null};var f=a.value;return c.callback=function(){fu||(fu=!0,yf=f)},c}function dy(s,a,c){(c=vs(-1,c)).tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var y=a.value;c.payload=function(){return f(y)},c.callback=function(){}}var x=s.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(c.callback=function(){typeof f!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var k=a.stack;this.componentDidCatch(a.value,{componentStack:k!==null?k:""})}),c}function fy(s,a,c){var f=s.pingCache;if(f===null){f=s.pingCache=new ek;var y=new Set;f.set(a,y)}else(y=f.get(a))===void 0&&(y=new Set,f.set(a,y));y.has(c)||(y.add(c),s=ck.bind(null,s,a,c),a.then(s,s))}function py(s){do{var a;if((a=s.tag===13)&&(a=(a=s.memoizedState)===null||a.dehydrated!==null),a)return s;s=s.return}while(s!==null);return null}function my(s,a,c,f,y){return 1&s.mode?(s.flags|=65536,s.lanes=y,s):(s===a?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:((a=vs(-1,1)).tag=2,ri(c,a,1))),c.lanes|=1),s)}var tk=O.ReactCurrentOwner,Rn=!1;function Dn(s,a,c,f){a.child=s===null?M0(a,null,c,f):eo(a,s.child,c,f)}function gy(s,a,c,f,y){c=c.render;var x=a.ref;return no(a,y),f=Kd(s,a,c,f,x,y),c=Qd(),s===null||Rn?(_t&&c&&Pd(a),a.flags|=1,Dn(s,a,f,y),a.child):(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~y,xs(s,a,y))}function yy(s,a,c,f,y){if(s===null){var x=c.type;return typeof x!="function"||Tf(x)||x.defaultProps!==void 0||c.compare!==null||c.defaultProps!==void 0?((s=xu(c.type,null,f,a,a.mode,y)).ref=a.ref,s.return=a,a.child=s):(a.tag=15,a.type=x,vy(s,a,x,f,y))}if(x=s.child,(s.lanes&y)===0){var k=x.memoizedProps;if((c=(c=c.compare)!==null?c:dl)(k,f)&&s.ref===a.ref)return xs(s,a,y)}return a.flags|=1,(s=ui(x,f)).ref=a.ref,s.return=a,a.child=s}function vy(s,a,c,f,y){if(s!==null){var x=s.memoizedProps;if(dl(x,f)&&s.ref===a.ref){if(Rn=!1,a.pendingProps=f=x,(s.lanes&y)===0)return a.lanes=s.lanes,xs(s,a,y);131072&s.flags&&(Rn=!0)}}return rf(s,a,c,f,y)}function xy(s,a,c){var f=a.pendingProps,y=f.children,x=s!==null?s.memoizedState:null;if(f.mode==="hidden")if(1&a.mode){if(!(1073741824&c))return s=x!==null?x.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,vt(ao,qn),qn|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=x!==null?x.baseLanes:c,vt(ao,qn),qn|=f}else a.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt(ao,qn),qn|=c;else x!==null?(f=x.baseLanes|c,a.memoizedState=null):f=c,vt(ao,qn),qn|=f;return Dn(s,a,y,c),a.child}function by(s,a){var c=a.ref;(s===null&&c!==null||s!==null&&s.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function rf(s,a,c,f,y){var x=zn(c)?Wi:pn.current;return x=Ya(a,x),no(a,y),c=Kd(s,a,c,f,x,y),f=Qd(),s===null||Rn?(_t&&f&&Pd(a),a.flags|=1,Dn(s,a,c,y),a.child):(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~y,xs(s,a,y))}function wy(s,a,c,f,y){if(zn(c)){var x=!0;qc(a)}else x=!1;if(no(a,y),a.stateNode===null)lu(s,a),cy(a,c,f),tf(a,c,f,y),f=!0;else if(s===null){var k=a.stateNode,M=a.memoizedProps;k.props=M;var F=k.context,H=c.contextType;typeof H=="object"&&H!==null?H=er(H):H=Ya(a,H=zn(c)?Wi:pn.current);var G=c.getDerivedStateFromProps,te=typeof G=="function"||typeof k.getSnapshotBeforeUpdate=="function";te||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(M!==f||F!==H)&&uy(a,k,f,H),ni=!1;var X=a.memoizedState;k.state=X,Zc(a,f,k,y),F=a.memoizedState,M!==f||X!==F||jn.current||ni?(typeof G=="function"&&(ef(a,c,G,f),F=a.memoizedState),(M=ni||ly(a,c,M,f,X,F,H))?(te||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(a.flags|=4194308)):(typeof k.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=F),k.props=f,k.state=F,k.context=H,f=M):(typeof k.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{k=a.stateNode,O0(s,a),M=a.memoizedProps,H=a.type===a.elementType?M:Cr(a.type,M),k.props=H,te=a.pendingProps,X=k.context,typeof(F=c.contextType)=="object"&&F!==null?F=er(F):F=Ya(a,F=zn(c)?Wi:pn.current);var ne=c.getDerivedStateFromProps;(G=typeof ne=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(M!==te||X!==F)&&uy(a,k,f,F),ni=!1,X=a.memoizedState,k.state=X,Zc(a,f,k,y);var oe=a.memoizedState;M!==te||X!==oe||jn.current||ni?(typeof ne=="function"&&(ef(a,c,ne,f),oe=a.memoizedState),(H=ni||ly(a,c,H,f,X,oe,F)||!1)?(G||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(f,oe,F),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(f,oe,F)),typeof k.componentDidUpdate=="function"&&(a.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof k.componentDidUpdate!="function"||M===s.memoizedProps&&X===s.memoizedState||(a.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&X===s.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=oe),k.props=f,k.state=oe,k.context=F,f=H):(typeof k.componentDidUpdate!="function"||M===s.memoizedProps&&X===s.memoizedState||(a.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&X===s.memoizedState||(a.flags|=1024),f=!1)}return sf(s,a,c,f,x,y)}function sf(s,a,c,f,y,x){by(s,a);var k=!!(128&a.flags);if(!f&&!k)return y&&C0(a,c,!1),xs(s,a,x);f=a.stateNode,tk.current=a;var M=k&&typeof c.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,s!==null&&k?(a.child=eo(a,s.child,null,x),a.child=eo(a,null,M,x)):Dn(s,a,M,x),a.memoizedState=f.state,y&&C0(a,c,!0),a.child}function Sy(s){var a=s.stateNode;a.pendingContext?T0(0,a.pendingContext,a.pendingContext!==a.context):a.context&&T0(0,a.context,!1),Bd(s,a.containerInfo)}function Ey(s,a,c,f,y){return Za(),Md(y),a.flags|=256,Dn(s,a,c,f),a.child}var Ty,af,ky,Cy,of={dehydrated:null,treeContext:null,retryLane:0};function lf(s){return{baseLanes:s,cachePool:null,transitions:null}}function Ny(s,a,c){var f,y=a.pendingProps,x=Mt.current,k=!1,M=!!(128&a.flags);if((f=M)||(f=(s===null||s.memoizedState!==null)&&!!(2&x)),f?(k=!0,a.flags&=-129):s!==null&&s.memoizedState===null||(x|=1),vt(Mt,1&x),s===null)return Dd(a),(s=a.memoizedState)!==null&&(s=s.dehydrated)!==null?(1&a.mode?s.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(M=y.children,s=y.fallback,k?(y=a.mode,k=a.child,M={mode:"hidden",children:M},1&y||k===null?k=bu(M,y,0,null):(k.childLanes=0,k.pendingProps=M),s=ta(s,y,c,null),k.return=a,s.return=a,k.sibling=s,a.child=k,a.child.memoizedState=lf(c),a.memoizedState=of,s):cf(a,M));if((x=s.memoizedState)!==null&&(f=x.dehydrated)!==null)return(function(H,G,te,X,ne,oe,de){if(te)return 256&G.flags?(G.flags&=-257,ou(H,G,de,X=nf(Error(t(422))))):G.memoizedState!==null?(G.child=H.child,G.flags|=128,null):(oe=X.fallback,ne=G.mode,X=bu({mode:"visible",children:X.children},ne,0,null),(oe=ta(oe,ne,de,null)).flags|=2,X.return=G,oe.return=G,X.sibling=oe,G.child=X,1&G.mode&&eo(G,H.child,null,de),G.child.memoizedState=lf(de),G.memoizedState=of,oe);if(!(1&G.mode))return ou(H,G,de,null);if(ne.data==="$!"){if(X=ne.nextSibling&&ne.nextSibling.dataset)var J=X.dgst;return X=J,ou(H,G,de,X=nf(oe=Error(t(419)),X,void 0))}if(J=(de&H.childLanes)!==0,Rn||J){if((X=tn)!==null){switch(de&-de){case 4:ne=2;break;case 16:ne=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ne=32;break;case 536870912:ne=268435456;break;default:ne=0}(ne=(ne&(X.suspendedLanes|de))!==0?0:ne)!==0&&ne!==oe.retryLane&&(oe.retryLane=ne,ys(H,ne),Nr(X,H,ne,-1))}return Ef(),ou(H,G,de,X=nf(Error(t(421))))}return ne.data==="$?"?(G.flags|=128,G.child=H.child,G=uk.bind(null,H),ne._reactRetry=G,null):(H=oe.treeContext,$n=Js(ne.nextSibling),Bn=G,_t=!0,kr=null,H!==null&&(Jn[Zn++]=Hr,Jn[Zn++]=gs,Jn[Zn++]=Gi,Hr=H.id,gs=H.overflow,Gi=G),G=cf(G,X.children),G.flags|=4096,G)})(s,a,M,y,f,x,c);if(k){k=y.fallback,M=a.mode,f=(x=s.child).sibling;var F={mode:"hidden",children:y.children};return 1&M||a.child===x?(y=ui(x,F)).subtreeFlags=14680064&x.subtreeFlags:((y=a.child).childLanes=0,y.pendingProps=F,a.deletions=null),f!==null?k=ui(f,k):(k=ta(k,M,c,null)).flags|=2,k.return=a,y.return=a,y.sibling=k,a.child=y,y=k,k=a.child,M=(M=s.child.memoizedState)===null?lf(c):{baseLanes:M.baseLanes|c,cachePool:null,transitions:M.transitions},k.memoizedState=M,k.childLanes=s.childLanes&~c,a.memoizedState=of,y}return s=(k=s.child).sibling,y=ui(k,{mode:"visible",children:y.children}),!(1&a.mode)&&(y.lanes=c),y.return=a,y.sibling=null,s!==null&&((c=a.deletions)===null?(a.deletions=[s],a.flags|=16):c.push(s)),a.child=y,a.memoizedState=null,y}function cf(s,a){return(a=bu({mode:"visible",children:a},s.mode,0,null)).return=s,s.child=a}function ou(s,a,c,f){return f!==null&&Md(f),eo(a,s.child,null,c),(s=cf(a,a.pendingProps.children)).flags|=2,a.memoizedState=null,s}function Iy(s,a,c){s.lanes|=a;var f=s.alternate;f!==null&&(f.lanes|=a),Fd(s.return,a,c)}function uf(s,a,c,f,y){var x=s.memoizedState;x===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:y}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=f,x.tail=c,x.tailMode=y)}function _y(s,a,c){var f=a.pendingProps,y=f.revealOrder,x=f.tail;if(Dn(s,a,f.children,c),2&(f=Mt.current))f=1&f|2,a.flags|=128;else{if(s!==null&&128&s.flags)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Iy(s,c,a);else if(s.tag===19)Iy(s,c,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(vt(Mt,f),1&a.mode)switch(y){case"forwards":for(c=a.child,y=null;c!==null;)(s=c.alternate)!==null&&eu(s)===null&&(y=c),c=c.sibling;(c=y)===null?(y=a.child,a.child=null):(y=c.sibling,c.sibling=null),uf(a,!1,y,c,x);break;case"backwards":for(c=null,y=a.child,a.child=null;y!==null;){if((s=y.alternate)!==null&&eu(s)===null){a.child=y;break}s=y.sibling,y.sibling=c,c=y,y=s}uf(a,!0,c,null,x);break;case"together":uf(a,!1,null,null,void 0);break;default:a.memoizedState=null}else a.memoizedState=null;return a.child}function lu(s,a){!(1&a.mode)&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function xs(s,a,c){if(s!==null&&(a.dependencies=s.dependencies),Ji|=a.lanes,(c&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(c=ui(s=a.child,s.pendingProps),a.child=c,c.return=a;s.sibling!==null;)s=s.sibling,(c=c.sibling=ui(s,s.pendingProps)).return=a;c.sibling=null}return a.child}function Nl(s,a){if(!_t)switch(s.tailMode){case"hidden":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function Tn(s){var a=s.alternate!==null&&s.alternate.child===s.child,c=0,f=0;if(a)for(var y=s.child;y!==null;)c|=y.lanes|y.childLanes,f|=14680064&y.subtreeFlags,f|=14680064&y.flags,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)c|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=f,s.childLanes=c,a}function nk(s,a,c){var f=a.pendingProps;switch(jd(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(a),null;case 1:case 17:return zn(a.type)&&_d(),Tn(a),null;case 3:return f=a.stateNode,ro(),It(jn),It(pn),Hd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),s!==null&&s.child!==null||(Kc(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&!(256&a.flags)||(a.flags|=1024,kr!==null&&(bf(kr),kr=null))),af(s,a),Tn(a),null;case 5:$d(a);var y=Yi(Sl.current);if(c=a.type,s!==null&&a.stateNode!=null)ky(s,a,c,f,y),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(t(166));return Tn(a),null}if(s=Yi(Wr.current),Kc(a)){f=a.stateNode,c=a.type;var x=a.memoizedProps;switch(f[qr]=a,f[yl]=x,s=!!(1&a.mode),c){case"dialog":wt("cancel",f),wt("close",f);break;case"iframe":case"object":case"embed":wt("load",f);break;case"video":case"audio":for(y=0;y<pl.length;y++)wt(pl[y],f);break;case"source":wt("error",f);break;case"img":case"image":case"link":wt("error",f),wt("load",f);break;case"details":wt("toggle",f);break;case"input":re(f,x),wt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!x.multiple},wt("invalid",f);break;case"textarea":dt(f,x),wt("invalid",f)}for(var k in Or(c,x),y=null,x)if(x.hasOwnProperty(k)){var M=x[k];k==="children"?typeof M=="string"?f.textContent!==M&&(x.suppressHydrationWarning!==!0&&zc(f.textContent,M,s),y=["children",M]):typeof M=="number"&&f.textContent!==""+M&&(x.suppressHydrationWarning!==!0&&zc(f.textContent,M,s),y=["children",""+M]):i.hasOwnProperty(k)&&M!=null&&k==="onScroll"&&wt("scroll",f)}switch(c){case"input":_e(f),le(f,x,!0);break;case"textarea":_e(f),ot(f);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(f.onclick=Bc)}f=y,a.updateQueue=f,f!==null&&(a.flags|=4)}else{k=y.nodeType===9?y:y.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=At(c)),s==="http://www.w3.org/1999/xhtml"?c==="script"?((s=k.createElement("div")).innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=k.createElement(c,{is:f.is}):(s=k.createElement(c),c==="select"&&(k=s,f.multiple?k.multiple=!0:f.size&&(k.size=f.size))):s=k.createElementNS(s,c),s[qr]=a,s[yl]=f,Ty(s,a,!1,!1),a.stateNode=s;e:{switch(k=Xn(c,f),c){case"dialog":wt("cancel",s),wt("close",s),y=f;break;case"iframe":case"object":case"embed":wt("load",s),y=f;break;case"video":case"audio":for(y=0;y<pl.length;y++)wt(pl[y],s);y=f;break;case"source":wt("error",s),y=f;break;case"img":case"image":case"link":wt("error",s),wt("load",s),y=f;break;case"details":wt("toggle",s),y=f;break;case"input":re(s,f),y=Ge(s,f),wt("invalid",s);break;case"option":default:y=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},y=j({},f,{value:void 0}),wt("invalid",s);break;case"textarea":dt(s,f),y=We(s,f),wt("invalid",s)}for(x in Or(c,y),M=y)if(M.hasOwnProperty(x)){var F=M[x];x==="style"?Vn(s,F):x==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0)!=null&&Jt(s,F):x==="children"?typeof F=="string"?(c!=="textarea"||F!=="")&&hn(s,F):typeof F=="number"&&hn(s,""+F):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(i.hasOwnProperty(x)?F!=null&&x==="onScroll"&&wt("scroll",s):F!=null&&D(s,x,F,k))}switch(c){case"input":_e(s),le(s,f,!1);break;case"textarea":_e(s),ot(s);break;case"option":f.value!=null&&s.setAttribute("value",""+we(f.value));break;case"select":s.multiple=!!f.multiple,(x=f.value)!=null?Oe(s,!!f.multiple,x,!1):f.defaultValue!=null&&Oe(s,!!f.multiple,f.defaultValue,!0);break;default:typeof y.onClick=="function"&&(s.onclick=Bc)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Tn(a),null;case 6:if(s&&a.stateNode!=null)Cy(s,a,s.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(t(166));if(c=Yi(Sl.current),Yi(Wr.current),Kc(a)){if(f=a.stateNode,c=a.memoizedProps,f[qr]=a,(x=f.nodeValue!==c)&&(s=Bn)!==null)switch(s.tag){case 3:zc(f.nodeValue,c,!!(1&s.mode));break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&zc(f.nodeValue,c,!!(1&s.mode))}x&&(a.flags|=4)}else(f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f))[qr]=a,a.stateNode=f}return Tn(a),null;case 13:if(It(Mt),f=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(_t&&$n!==null&&1&a.mode&&!(128&a.flags))j0(),Za(),a.flags|=98560,x=!1;else if(x=Kc(a),f!==null&&f.dehydrated!==null){if(s===null){if(!x)throw Error(t(318));if(!(x=(x=a.memoizedState)!==null?x.dehydrated:null))throw Error(t(317));x[qr]=a}else Za(),!(128&a.flags)&&(a.memoizedState=null),a.flags|=4;Tn(a),x=!1}else kr!==null&&(bf(kr),kr=null),x=!0;if(!x)return 65536&a.flags?a:null}return 128&a.flags?(a.lanes=c,a):((f=f!==null)!=(s!==null&&s.memoizedState!==null)&&f&&(a.child.flags|=8192,1&a.mode&&(s===null||1&Mt.current?Qt===0&&(Qt=3):Ef())),a.updateQueue!==null&&(a.flags|=4),Tn(a),null);case 4:return ro(),af(s,a),s===null&&ml(a.stateNode.containerInfo),Tn(a),null;case 10:return Vd(a.type._context),Tn(a),null;case 19:if(It(Mt),(x=a.memoizedState)===null)return Tn(a),null;if(f=!!(128&a.flags),(k=x.rendering)===null)if(f)Nl(x,!1);else{if(Qt!==0||s!==null&&128&s.flags)for(s=a.child;s!==null;){if((k=eu(s))!==null){for(a.flags|=128,Nl(x,!1),(f=k.updateQueue)!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=c,c=a.child;c!==null;)s=f,(x=c).flags&=14680066,(k=x.alternate)===null?(x.childLanes=0,x.lanes=s,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=k.childLanes,x.lanes=k.lanes,x.child=k.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=k.memoizedProps,x.memoizedState=k.memoizedState,x.updateQueue=k.updateQueue,x.type=k.type,s=k.dependencies,x.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),c=c.sibling;return vt(Mt,1&Mt.current|2),a.child}s=s.sibling}x.tail!==null&&Nt()>oo&&(a.flags|=128,f=!0,Nl(x,!1),a.lanes=4194304)}else{if(!f)if((s=eu(k))!==null){if(a.flags|=128,f=!0,(c=s.updateQueue)!==null&&(a.updateQueue=c,a.flags|=4),Nl(x,!0),x.tail===null&&x.tailMode==="hidden"&&!k.alternate&&!_t)return Tn(a),null}else 2*Nt()-x.renderingStartTime>oo&&c!==1073741824&&(a.flags|=128,f=!0,Nl(x,!1),a.lanes=4194304);x.isBackwards?(k.sibling=a.child,a.child=k):((c=x.last)!==null?c.sibling=k:a.child=k,x.last=k)}return x.tail!==null?(a=x.tail,x.rendering=a,x.tail=a.sibling,x.renderingStartTime=Nt(),a.sibling=null,c=Mt.current,vt(Mt,f?1&c|2:1&c),a):(Tn(a),null);case 22:case 23:return Sf(),f=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(a.flags|=8192),f&&1&a.mode?1073741824&qn&&(Tn(a),6&a.subtreeFlags&&(a.flags|=8192)):Tn(a),null;case 24:case 25:return null}throw Error(t(156,a.tag))}function rk(s,a){switch(jd(a),a.tag){case 1:return zn(a.type)&&_d(),65536&(s=a.flags)?(a.flags=-65537&s|128,a):null;case 3:return ro(),It(jn),It(pn),Hd(),65536&(s=a.flags)&&!(128&s)?(a.flags=-65537&s|128,a):null;case 5:return $d(a),null;case 13:if(It(Mt),(s=a.memoizedState)!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Za()}return 65536&(s=a.flags)?(a.flags=-65537&s|128,a):null;case 19:return It(Mt),null;case 4:return ro(),null;case 10:return Vd(a.type._context),null;case 22:case 23:return Sf(),null;default:return null}}Ty=function(s,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)s.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},af=function(){},ky=function(s,a,c,f){var y=s.memoizedProps;if(y!==f){s=a.stateNode,Yi(Wr.current);var x,k=null;switch(c){case"input":y=Ge(s,y),f=Ge(s,f),k=[];break;case"select":y=j({},y,{value:void 0}),f=j({},f,{value:void 0}),k=[];break;case"textarea":y=We(s,y),f=We(s,f),k=[];break;default:typeof y.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=Bc)}for(H in Or(c,f),c=null,y)if(!f.hasOwnProperty(H)&&y.hasOwnProperty(H)&&y[H]!=null)if(H==="style"){var M=y[H];for(x in M)M.hasOwnProperty(x)&&(c||(c={}),c[x]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(i.hasOwnProperty(H)?k||(k=[]):(k=k||[]).push(H,null));for(H in f){var F=f[H];if(M=y?.[H],f.hasOwnProperty(H)&&F!==M&&(F!=null||M!=null))if(H==="style")if(M){for(x in M)!M.hasOwnProperty(x)||F&&F.hasOwnProperty(x)||(c||(c={}),c[x]="");for(x in F)F.hasOwnProperty(x)&&M[x]!==F[x]&&(c||(c={}),c[x]=F[x])}else c||(k||(k=[]),k.push(H,c)),c=F;else H==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,M=M?M.__html:void 0,F!=null&&M!==F&&(k=k||[]).push(H,F)):H==="children"?typeof F!="string"&&typeof F!="number"||(k=k||[]).push(H,""+F):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(i.hasOwnProperty(H)?(F!=null&&H==="onScroll"&&wt("scroll",s),k||M===F||(k=[])):(k=k||[]).push(H,F))}c&&(k=k||[]).push("style",c);var H=k;(a.updateQueue=H)&&(a.flags|=4)}},Cy=function(s,a,c,f){c!==f&&(a.flags|=4)};var cu=!1,gn=!1,sk=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function io(s,a){var c=s.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){Lt(s,a,f)}else c.current=null}function Ay(s,a,c){try{c()}catch(f){Lt(s,a,f)}}var Py=!1;function Il(s,a,c){var f=a.updateQueue;if((f=f!==null?f.lastEffect:null)!==null){var y=f=f.next;do{if((y.tag&s)===s){var x=y.destroy;y.destroy=void 0,x!==void 0&&Ay(a,c,x)}y=y.next}while(y!==f)}}function uu(s,a){if((a=(a=a.updateQueue)!==null?a.lastEffect:null)!==null){var c=a=a.next;do{if((c.tag&s)===s){var f=c.create;c.destroy=f()}c=c.next}while(c!==a)}}function hf(s){var a=s.ref;if(a!==null){var c=s.stateNode;s.tag,s=c,typeof a=="function"?a(s):a.current=s}}function jy(s){var a=s.alternate;a!==null&&(s.alternate=null,jy(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode)!==null&&(delete a[qr],delete a[yl],delete a[Nd],delete a[qT],delete a[HT]),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Ry(s){return s.tag===5||s.tag===3||s.tag===4}function Dy(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Ry(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(2&s.flags||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(2&s.flags))return s.stateNode}}function df(s,a,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(s,a):c.insertBefore(s,a):(c.nodeType===8?(a=c.parentNode).insertBefore(s,c):(a=c).appendChild(s),(c=c._reactRootContainer)!=null||a.onclick!==null||(a.onclick=Bc));else if(f!==4&&(s=s.child)!==null)for(df(s,a,c),s=s.sibling;s!==null;)df(s,a,c),s=s.sibling}function ff(s,a,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?c.insertBefore(s,a):c.appendChild(s);else if(f!==4&&(s=s.child)!==null)for(ff(s,a,c),s=s.sibling;s!==null;)ff(s,a,c),s=s.sibling}var kn=null,Kr=!1;function si(s,a,c){for(c=c.child;c!==null;)My(s,a,c),c=c.sibling}function My(s,a,c){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(Bs,c)}catch{}switch(c.tag){case 5:gn||io(c,a);case 6:var f=kn,y=Kr;kn=null,si(s,a,c),Kr=y,(kn=f)!==null&&(Kr?(s=kn,c=c.stateNode,s.nodeType===8?s.parentNode.removeChild(c):s.removeChild(c)):kn.removeChild(c.stateNode));break;case 18:kn!==null&&(Kr?(s=kn,c=c.stateNode,s.nodeType===8?Cd(s.parentNode,c):s.nodeType===1&&Cd(s,c),Gs(s)):Cd(kn,c.stateNode));break;case 4:f=kn,y=Kr,kn=c.stateNode.containerInfo,Kr=!0,si(s,a,c),kn=f,Kr=y;break;case 0:case 11:case 14:case 15:if(!gn&&(f=c.updateQueue)!==null&&(f=f.lastEffect)!==null){y=f=f.next;do{var x=y,k=x.destroy;x=x.tag,k!==void 0&&(2&x||4&x)&&Ay(c,a,k),y=y.next}while(y!==f)}si(s,a,c);break;case 1:if(!gn&&(io(c,a),typeof(f=c.stateNode).componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(M){Lt(c,a,M)}si(s,a,c);break;case 21:si(s,a,c);break;case 22:1&c.mode?(gn=(f=gn)||c.memoizedState!==null,si(s,a,c),gn=f):si(s,a,c);break;default:si(s,a,c)}}function Ly(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var c=s.stateNode;c===null&&(c=s.stateNode=new sk),a.forEach(function(f){var y=hk.bind(null,s,f);c.has(f)||(c.add(f),f.then(y,y))})}}function Qr(s,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var y=c[f];try{var x=s,k=a,M=k;e:for(;M!==null;){switch(M.tag){case 5:kn=M.stateNode,Kr=!1;break e;case 3:case 4:kn=M.stateNode.containerInfo,Kr=!0;break e}M=M.return}if(kn===null)throw Error(t(160));My(x,k,y),kn=null,Kr=!1;var F=y.alternate;F!==null&&(F.return=null),y.return=null}catch(H){Lt(y,a,H)}}if(12854&a.subtreeFlags)for(a=a.child;a!==null;)Oy(a,s),a=a.sibling}function Oy(s,a){var c=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Qr(a,s),bs(s),4&f){try{Il(3,s,s.return),uu(3,s)}catch(de){Lt(s,s.return,de)}try{Il(5,s,s.return)}catch(de){Lt(s,s.return,de)}}break;case 1:Qr(a,s),bs(s),512&f&&c!==null&&io(c,c.return);break;case 5:if(Qr(a,s),bs(s),512&f&&c!==null&&io(c,c.return),32&s.flags){var y=s.stateNode;try{hn(y,"")}catch(de){Lt(s,s.return,de)}}if(4&f&&(y=s.stateNode)!=null){var x=s.memoizedProps,k=c!==null?c.memoizedProps:x,M=s.type,F=s.updateQueue;if(s.updateQueue=null,F!==null)try{M==="input"&&x.type==="radio"&&x.name!=null&&me(y,x),Xn(M,k);var H=Xn(M,x);for(k=0;k<F.length;k+=2){var G=F[k],te=F[k+1];G==="style"?Vn(y,te):G==="dangerouslySetInnerHTML"?Jt(y,te):G==="children"?hn(y,te):D(y,G,te,H)}switch(M){case"input":ee(y,x);break;case"textarea":Xt(y,x);break;case"select":var X=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!x.multiple;var ne=x.value;ne!=null?Oe(y,!!x.multiple,ne,!1):X!==!!x.multiple&&(x.defaultValue!=null?Oe(y,!!x.multiple,x.defaultValue,!0):Oe(y,!!x.multiple,x.multiple?[]:"",!1))}y[yl]=x}catch(de){Lt(s,s.return,de)}}break;case 6:if(Qr(a,s),bs(s),4&f){if(s.stateNode===null)throw Error(t(162));y=s.stateNode,x=s.memoizedProps;try{y.nodeValue=x}catch(de){Lt(s,s.return,de)}}break;case 3:if(Qr(a,s),bs(s),4&f&&c!==null&&c.memoizedState.isDehydrated)try{Gs(a.containerInfo)}catch(de){Lt(s,s.return,de)}break;case 4:default:Qr(a,s),bs(s);break;case 13:Qr(a,s),bs(s),8192&(y=s.child).flags&&(x=y.memoizedState!==null,y.stateNode.isHidden=x,!x||y.alternate!==null&&y.alternate.memoizedState!==null||(gf=Nt())),4&f&&Ly(s);break;case 22:if(G=c!==null&&c.memoizedState!==null,1&s.mode?(gn=(H=gn)||G,Qr(a,s),gn=H):Qr(a,s),bs(s),8192&f){if(H=s.memoizedState!==null,(s.stateNode.isHidden=H)&&!G&&1&s.mode)for(Ee=s,G=s.child;G!==null;){for(te=Ee=G;Ee!==null;){switch(ne=(X=Ee).child,X.tag){case 0:case 11:case 14:case 15:Il(4,X,X.return);break;case 1:io(X,X.return);var oe=X.stateNode;if(typeof oe.componentWillUnmount=="function"){f=X,c=X.return;try{a=f,oe.props=a.memoizedProps,oe.state=a.memoizedState,oe.componentWillUnmount()}catch(de){Lt(f,c,de)}}break;case 5:io(X,X.return);break;case 22:if(X.memoizedState!==null){Uy(te);continue}}ne!==null?(ne.return=X,Ee=ne):Uy(te)}G=G.sibling}e:for(G=null,te=s;;){if(te.tag===5){if(G===null){G=te;try{y=te.stateNode,H?typeof(x=y.style).setProperty=="function"?x.setProperty("display","none","important"):x.display="none":(M=te.stateNode,k=(F=te.memoizedProps.style)!=null&&F.hasOwnProperty("display")?F.display:null,M.style.display=Kt("display",k))}catch(de){Lt(s,s.return,de)}}}else if(te.tag===6){if(G===null)try{te.stateNode.nodeValue=H?"":te.memoizedProps}catch(de){Lt(s,s.return,de)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===s)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===s)break e;for(;te.sibling===null;){if(te.return===null||te.return===s)break e;G===te&&(G=null),te=te.return}G===te&&(G=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Qr(a,s),bs(s),4&f&&Ly(s);case 21:}}function bs(s){var a=s.flags;if(2&a){try{e:{for(var c=s.return;c!==null;){if(Ry(c)){var f=c;break e}c=c.return}throw Error(t(160))}switch(f.tag){case 5:var y=f.stateNode;32&f.flags&&(hn(y,""),f.flags&=-33),ff(s,Dy(s),y);break;case 3:case 4:var x=f.stateNode.containerInfo;df(s,Dy(s),x);break;default:throw Error(t(161))}}catch(k){Lt(s,s.return,k)}s.flags&=-3}4096&a&&(s.flags&=-4097)}function ik(s,a,c){Ee=s,Vy(s)}function Vy(s,a,c){for(var f=!!(1&s.mode);Ee!==null;){var y=Ee,x=y.child;if(y.tag===22&&f){var k=y.memoizedState!==null||cu;if(!k){var M=y.alternate,F=M!==null&&M.memoizedState!==null||gn;M=cu;var H=gn;if(cu=k,(gn=F)&&!H)for(Ee=y;Ee!==null;)F=(k=Ee).child,k.tag===22&&k.memoizedState!==null?zy(y):F!==null?(F.return=k,Ee=F):zy(y);for(;x!==null;)Ee=x,Vy(x),x=x.sibling;Ee=y,cu=M,gn=H}Fy(s)}else 8772&y.subtreeFlags&&x!==null?(x.return=y,Ee=x):Fy(s)}}function Fy(s){for(;Ee!==null;){var a=Ee;if(8772&a.flags){var c=a.alternate;try{if(8772&a.flags)switch(a.tag){case 0:case 11:case 15:gn||uu(5,a);break;case 1:var f=a.stateNode;if(4&a.flags&&!gn)if(c===null)f.componentDidMount();else{var y=a.elementType===a.type?c.memoizedProps:Cr(a.type,c.memoizedProps);f.componentDidUpdate(y,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var x=a.updateQueue;x!==null&&F0(a,x,f);break;case 3:var k=a.updateQueue;if(k!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:case 1:c=a.child.stateNode}F0(a,k,c)}break;case 5:var M=a.stateNode;if(c===null&&4&a.flags){c=M;var F=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&c.focus();break;case"img":F.src&&(c.src=F.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(a.memoizedState===null){var H=a.alternate;if(H!==null){var G=H.memoizedState;if(G!==null){var te=G.dehydrated;te!==null&&Gs(te)}}}break;default:throw Error(t(163))}gn||512&a.flags&&hf(a)}catch(X){Lt(a,a.return,X)}}if(a===s){Ee=null;break}if((c=a.sibling)!==null){c.return=a.return,Ee=c;break}Ee=a.return}}function Uy(s){for(;Ee!==null;){var a=Ee;if(a===s){Ee=null;break}var c=a.sibling;if(c!==null){c.return=a.return,Ee=c;break}Ee=a.return}}function zy(s){for(;Ee!==null;){var a=Ee;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{uu(4,a)}catch(F){Lt(a,c,F)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var y=a.return;try{f.componentDidMount()}catch(F){Lt(a,y,F)}}var x=a.return;try{hf(a)}catch(F){Lt(a,x,F)}break;case 5:var k=a.return;try{hf(a)}catch(F){Lt(a,k,F)}}}catch(F){Lt(a,a.return,F)}if(a===s){Ee=null;break}var M=a.sibling;if(M!==null){M.return=a.return,Ee=M;break}Ee=a.return}}var By,ak=Math.ceil,hu=O.ReactCurrentDispatcher,pf=O.ReactCurrentOwner,nr=O.ReactCurrentBatchConfig,ct=0,tn=null,Bt=null,an=0,qn=0,ao=Zs(0),Qt=0,_l=null,Ji=0,du=0,mf=0,Al=null,Hn=null,gf=0,oo=1/0,ii=null,fu=!1,yf=null,ai=null,pu=!1,oi=null,mu=0,Pl=0,vf=null,gu=-1,yu=0;function Cn(){return 6&ct?Nt():gu!==-1?gu:gu=Nt()}function li(s){return 1&s.mode?2&ct&&an!==0?an&-an:WT.transition!==null?(yu===0&&(yu=$s()),yu):(s=it)!==0?s:s=(s=window.event)===void 0?16:cl(s.type):1}function Nr(s,a,c,f){if(50<Pl)throw Pl=0,vf=null,Error(t(185));qs(s,c,f),2&ct&&s===tn||(s===tn&&(!(2&ct)&&(du|=c),Qt===4&&ci(s,an)),Mn(s,f),c===1&&ct===0&&!(1&a.mode)&&(oo=Nt()+500,Hc&&ti()))}function Mn(s,a){var c=s.callbackNode;(function(y,x){for(var k=y.suspendedLanes,M=y.pingedLanes,F=y.expirationTimes,H=y.pendingLanes;0<H;){var G=31-dn(H),te=1<<G,X=F[G];X===-1?(te&k)!==0&&(te&M)===0||(F[G]=cd(te,x)):X<=x&&(y.expiredLanes|=te),H&=~te}})(s,a);var f=Ma(s,s===tn?an:0);if(f===0)c!==null&&el(c),s.callbackNode=null,s.callbackPriority=0;else if(a=f&-f,s.callbackPriority!==a){if(c!=null&&el(c),a===1)s.tag===0?(function(y){Hc=!0,N0(y)})(qy.bind(null,s)):N0(qy.bind(null,s)),BT(function(){!(6&ct)&&ti()}),c=null;else{switch(il(f)){case 1:c=Ra;break;case 4:c=mr;break;case 16:default:c=In;break;case 536870912:c=zs}c=Xy(c,$y.bind(null,s))}s.callbackPriority=a,s.callbackNode=c}}function $y(s,a){if(gu=-1,yu=0,6&ct)throw Error(t(327));var c=s.callbackNode;if(co()&&s.callbackNode!==c)return null;var f=Ma(s,s===tn?an:0);if(f===0)return null;if(30&f||(f&s.expiredLanes)!==0||a)a=vu(s,f);else{a=f;var y=ct;ct|=2;var x=Wy();for(tn===s&&an===a||(ii=null,oo=Nt()+500,ea(s,a));;)try{lk();break}catch(M){Hy(s,M)}Od(),hu.current=x,ct=y,Bt!==null?a=0:(tn=null,an=0,a=Qt)}if(a!==0){if(a===2&&(y=sl(s))!==0&&(f=y,a=xf(s,y)),a===1)throw c=_l,ea(s,0),ci(s,f),Mn(s,Nt()),c;if(a===6)ci(s,f);else{if(y=s.current.alternate,!(30&f||(function(M){for(var F=M;;){if(16384&F.flags){var H=F.updateQueue;if(H!==null&&(H=H.stores)!==null)for(var G=0;G<H.length;G++){var te=H[G],X=te.getSnapshot;te=te.value;try{if(!Tr(X(),te))return!1}catch{return!1}}}if(H=F.child,16384&F.subtreeFlags&&H!==null)H.return=F,F=H;else{if(F===M)break;for(;F.sibling===null;){if(F.return===null||F.return===M)return!0;F=F.return}F.sibling.return=F.return,F=F.sibling}}return!0})(y)||(a=vu(s,f),a===2&&(x=sl(s),x!==0&&(f=x,a=xf(s,x))),a!==1)))throw c=_l,ea(s,0),ci(s,f),Mn(s,Nt()),c;switch(s.finishedWork=y,s.finishedLanes=f,a){case 0:case 1:throw Error(t(345));case 2:case 5:lo(s,Hn,ii);break;case 3:if(ci(s,f),(130023424&f)===f&&10<(a=gf+500-Nt())){if(Ma(s,0)!==0)break;if(((y=s.suspendedLanes)&f)!==f){Cn(),s.pingedLanes|=s.suspendedLanes&y;break}s.timeoutHandle=kd(lo.bind(null,s,Hn,ii),a);break}lo(s,Hn,ii);break;case 4:if(ci(s,f),(4194240&f)===f)break;for(a=s.eventTimes,y=-1;0<f;){var k=31-dn(f);x=1<<k,(k=a[k])>y&&(y=k),f&=~x}if(f=y,10<(f=(120>(f=Nt()-f)?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*ak(f/1960))-f)){s.timeoutHandle=kd(lo.bind(null,s,Hn,ii),f);break}lo(s,Hn,ii);break;default:throw Error(t(329))}}}return Mn(s,Nt()),s.callbackNode===c?$y.bind(null,s):null}function xf(s,a){var c=Al;return s.current.memoizedState.isDehydrated&&(ea(s,a).flags|=256),(s=vu(s,a))!==2&&(a=Hn,Hn=c,a!==null&&bf(a)),s}function bf(s){Hn===null?Hn=s:Hn.push.apply(Hn,s)}function ci(s,a){for(a&=~mf,a&=~du,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var c=31-dn(a),f=1<<c;s[c]=-1,a&=~f}}function qy(s){if(6&ct)throw Error(t(327));co();var a=Ma(s,0);if(!(1&a))return Mn(s,Nt()),null;var c=vu(s,a);if(s.tag!==0&&c===2){var f=sl(s);f!==0&&(a=f,c=xf(s,f))}if(c===1)throw c=_l,ea(s,0),ci(s,a),Mn(s,Nt()),c;if(c===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,lo(s,Hn,ii),Mn(s,Nt()),null}function wf(s,a){var c=ct;ct|=1;try{return s(a)}finally{(ct=c)===0&&(oo=Nt()+500,Hc&&ti())}}function Zi(s){oi!==null&&oi.tag===0&&!(6&ct)&&co();var a=ct;ct|=1;var c=nr.transition,f=it;try{if(nr.transition=null,it=1,s)return s()}finally{it=f,nr.transition=c,!(6&(ct=a))&&ti()}}function Sf(){qn=ao.current,It(ao)}function ea(s,a){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(c!==-1&&(s.timeoutHandle=-1,zT(c)),Bt!==null)for(c=Bt.return;c!==null;){var f=c;switch(jd(f),f.tag){case 1:(f=f.type.childContextTypes)!=null&&_d();break;case 3:ro(),It(jn),It(pn),Hd();break;case 5:$d(f);break;case 4:ro();break;case 13:case 19:It(Mt);break;case 10:Vd(f.type._context);break;case 22:case 23:Sf()}c=c.return}if(tn=s,Bt=s=ui(s.current,null),an=qn=a,Qt=0,_l=null,mf=du=Ji=0,Hn=Al=null,Qi!==null){for(a=0;a<Qi.length;a++)if((f=(c=Qi[a]).interleaved)!==null){c.interleaved=null;var y=f.next,x=c.pending;if(x!==null){var k=x.next;x.next=y,f.next=k}c.pending=f}Qi=null}return s}function Hy(s,a){for(;;){var c=Bt;try{if(Od(),tu.current=iu,nu){for(var f=Pt.memoizedState;f!==null;){var y=f.queue;y!==null&&(y.pending=null),f=f.next}nu=!1}if(Xi=0,en=Zt=Pt=null,El=!1,Tl=0,pf.current=null,c===null||c.return===null){Qt=1,_l=a,Bt=null;break}e:{var x=s,k=c.return,M=c,F=a;if(a=an,M.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var H=F,G=M,te=G.tag;if(!(1&G.mode||te!==0&&te!==11&&te!==15)){var X=G.alternate;X?(G.updateQueue=X.updateQueue,G.memoizedState=X.memoizedState,G.lanes=X.lanes):(G.updateQueue=null,G.memoizedState=null)}var ne=py(k);if(ne!==null){ne.flags&=-257,my(ne,k,M,0,a),1&ne.mode&&fy(x,H,a),F=H;var oe=(a=ne).updateQueue;if(oe===null){var de=new Set;de.add(F),a.updateQueue=de}else oe.add(F);break e}if(!(1&a)){fy(x,H,a),Ef();break e}F=Error(t(426))}else if(_t&&1&M.mode){var J=py(k);if(J!==null){!(65536&J.flags)&&(J.flags|=256),my(J,k,M,0,a),Md(so(F,M));break e}}x=F=so(F,M),Qt!==4&&(Qt=2),Al===null?Al=[x]:Al.push(x),x=k;do{switch(x.tag){case 3:x.flags|=65536,a&=-a,x.lanes|=a,V0(x,hy(0,F,a));break e;case 1:M=F;var $=x.type,K=x.stateNode;if(!(128&x.flags||typeof $.getDerivedStateFromError!="function"&&(K===null||typeof K.componentDidCatch!="function"||ai!==null&&ai.has(K)))){x.flags|=65536,a&=-a,x.lanes|=a,V0(x,dy(x,M,a));break e}}x=x.return}while(x!==null)}Ky(c)}catch(se){a=se,Bt===c&&c!==null&&(Bt=c=c.return);continue}break}}function Wy(){var s=hu.current;return hu.current=iu,s===null?iu:s}function Ef(){Qt!==0&&Qt!==3&&Qt!==2||(Qt=4),tn===null||!(268435455&Ji)&&!(268435455&du)||ci(tn,an)}function vu(s,a){var c=ct;ct|=2;var f=Wy();for(tn===s&&an===a||(ii=null,ea(s,a));;)try{ok();break}catch(y){Hy(s,y)}if(Od(),ct=c,hu.current=f,Bt!==null)throw Error(t(261));return tn=null,an=0,Qt}function ok(){for(;Bt!==null;)Gy(Bt)}function lk(){for(;Bt!==null&&!tl();)Gy(Bt)}function Gy(s){var a=By(s.alternate,s,qn);s.memoizedProps=s.pendingProps,a===null?Ky(s):Bt=a,pf.current=null}function Ky(s){var a=s;do{var c=a.alternate;if(s=a.return,32768&a.flags){if((c=rk(c,a))!==null)return c.flags&=32767,void(Bt=c);if(s===null)return Qt=6,void(Bt=null);s.flags|=32768,s.subtreeFlags=0,s.deletions=null}else if((c=nk(c,a,qn))!==null)return void(Bt=c);if((a=a.sibling)!==null)return void(Bt=a);Bt=a=s}while(a!==null);Qt===0&&(Qt=5)}function lo(s,a,c){var f=it,y=nr.transition;try{nr.transition=null,it=1,(function(x,k,M,F){do co();while(oi!==null);if(6&ct)throw Error(t(327));M=x.finishedWork;var H=x.finishedLanes;if(M===null)return null;if(x.finishedWork=null,x.finishedLanes=0,M===x.current)throw Error(t(177));x.callbackNode=null,x.callbackPriority=0;var G=M.lanes|M.childLanes;if((function(ne,oe){var de=ne.pendingLanes&~oe;ne.pendingLanes=oe,ne.suspendedLanes=0,ne.pingedLanes=0,ne.expiredLanes&=oe,ne.mutableReadLanes&=oe,ne.entangledLanes&=oe,oe=ne.entanglements;var J=ne.eventTimes;for(ne=ne.expirationTimes;0<de;){var $=31-dn(de),K=1<<$;oe[$]=0,J[$]=-1,ne[$]=-1,de&=~K}})(x,G),x===tn&&(Bt=tn=null,an=0),!(2064&M.subtreeFlags)&&!(2064&M.flags)||pu||(pu=!0,Xy(In,function(){return co(),null})),G=!!(15990&M.flags),!!(15990&M.subtreeFlags)||G){G=nr.transition,nr.transition=null;var te=it;it=1;var X=ct;ct|=4,pf.current=null,(function(ne,oe){if(Sd=fs,pd(ne=l0())){if("selectionStart"in ne)var de={start:ne.selectionStart,end:ne.selectionEnd};else e:{var J=(de=(de=ne.ownerDocument)&&de.defaultView||window).getSelection&&de.getSelection();if(J&&J.rangeCount!==0){de=J.anchorNode;var $=J.anchorOffset,K=J.focusNode;J=J.focusOffset;try{de.nodeType,K.nodeType}catch{de=null;break e}var se=0,xe=-1,qe=-1,ge=0,He=0,Ve=ne,Fe=null;t:for(;;){for(var ut;Ve!==de||$!==0&&Ve.nodeType!==3||(xe=se+$),Ve!==K||J!==0&&Ve.nodeType!==3||(qe=se+J),Ve.nodeType===3&&(se+=Ve.nodeValue.length),(ut=Ve.firstChild)!==null;)Fe=Ve,Ve=ut;for(;;){if(Ve===ne)break t;if(Fe===de&&++ge===$&&(xe=se),Fe===K&&++He===J&&(qe=se),(ut=Ve.nextSibling)!==null)break;Fe=(Ve=Fe).parentNode}Ve=ut}de=xe===-1||qe===-1?null:{start:xe,end:qe}}else de=null}de=de||{start:0,end:0}}else de=null;for(Ed={focusedElem:ne,selectionRange:de},fs=!1,Ee=oe;Ee!==null;)if(ne=(oe=Ee).child,1028&oe.subtreeFlags&&ne!==null)ne.return=oe,Ee=ne;else for(;Ee!==null;){oe=Ee;try{var uo=oe.alternate;if(1024&oe.flags)switch(oe.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(uo!==null){var rv=uo.memoizedProps,gk=uo.memoizedState,sv=oe.stateNode,yk=sv.getSnapshotBeforeUpdate(oe.elementType===oe.type?rv:Cr(oe.type,rv),gk);sv.__reactInternalSnapshotBeforeUpdate=yk}break;case 3:var ho=oe.stateNode.containerInfo;ho.nodeType===1?ho.textContent="":ho.nodeType===9&&ho.documentElement&&ho.removeChild(ho.documentElement);break;default:throw Error(t(163))}}catch(iv){Lt(oe,oe.return,iv)}if((ne=oe.sibling)!==null){ne.return=oe.return,Ee=ne;break}Ee=oe.return}uo=Py,Py=!1})(x,M),Oy(M,x),LT(Ed),fs=!!Sd,Ed=Sd=null,x.current=M,ik(M),nl(),ct=X,it=te,nr.transition=G}else x.current=M;if(pu&&(pu=!1,oi=x,mu=H),G=x.pendingLanes,G===0&&(ai=null),(function(ne){if(Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(Bs,ne,void 0,!(128&~ne.current.flags))}catch{}})(M.stateNode),Mn(x,Nt()),k!==null)for(F=x.onRecoverableError,M=0;M<k.length;M++)H=k[M],F(H.value,{componentStack:H.stack,digest:H.digest});if(fu)throw fu=!1,x=yf,yf=null,x;1&mu&&x.tag!==0&&co(),G=x.pendingLanes,1&G?x===vf?Pl++:(Pl=0,vf=x):Pl=0,ti()})(s,a,c,f)}finally{nr.transition=y,it=f}return null}function co(){if(oi!==null){var s=il(mu),a=nr.transition,c=it;try{if(nr.transition=null,it=16>s?16:s,oi===null)var f=!1;else{if(s=oi,oi=null,mu=0,6&ct)throw Error(t(331));var y=ct;for(ct|=4,Ee=s.current;Ee!==null;){var x=Ee,k=x.child;if(16&Ee.flags){var M=x.deletions;if(M!==null){for(var F=0;F<M.length;F++){var H=M[F];for(Ee=H;Ee!==null;){var G=Ee;switch(G.tag){case 0:case 11:case 15:Il(8,G,x)}var te=G.child;if(te!==null)te.return=G,Ee=te;else for(;Ee!==null;){var X=(G=Ee).sibling,ne=G.return;if(jy(G),G===H){Ee=null;break}if(X!==null){X.return=ne,Ee=X;break}Ee=ne}}}var oe=x.alternate;if(oe!==null){var de=oe.child;if(de!==null){oe.child=null;do{var J=de.sibling;de.sibling=null,de=J}while(de!==null)}}Ee=x}}if(2064&x.subtreeFlags&&k!==null)k.return=x,Ee=k;else e:for(;Ee!==null;){if(2048&(x=Ee).flags)switch(x.tag){case 0:case 11:case 15:Il(9,x,x.return)}var $=x.sibling;if($!==null){$.return=x.return,Ee=$;break e}Ee=x.return}}var K=s.current;for(Ee=K;Ee!==null;){var se=(k=Ee).child;if(2064&k.subtreeFlags&&se!==null)se.return=k,Ee=se;else e:for(k=K;Ee!==null;){if(2048&(M=Ee).flags)try{switch(M.tag){case 0:case 11:case 15:uu(9,M)}}catch(qe){Lt(M,M.return,qe)}if(M===k){Ee=null;break e}var xe=M.sibling;if(xe!==null){xe.return=M.return,Ee=xe;break e}Ee=M.return}}if(ct=y,ti(),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(Bs,s)}catch{}f=!0}return f}finally{it=c,nr.transition=a}}return!1}function Qy(s,a,c){s=ri(s,a=hy(0,a=so(c,a),1),1),a=Cn(),s!==null&&(qs(s,1,a),Mn(s,a))}function Lt(s,a,c){if(s.tag===3)Qy(s,s,c);else for(;a!==null;){if(a.tag===3){Qy(a,s,c);break}if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ai===null||!ai.has(f))){a=ri(a,s=dy(a,s=so(c,s),1),1),s=Cn(),a!==null&&(qs(a,1,s),Mn(a,s));break}}a=a.return}}function ck(s,a,c){var f=s.pingCache;f!==null&&f.delete(a),a=Cn(),s.pingedLanes|=s.suspendedLanes&c,tn===s&&(an&c)===c&&(Qt===4||Qt===3&&(130023424&an)===an&&500>Nt()-gf?ea(s,0):mf|=c),Mn(s,a)}function Yy(s,a){a===0&&(1&s.mode?(a=Da,!(130023424&(Da<<=1))&&(Da=4194304)):a=1);var c=Cn();(s=ys(s,a))!==null&&(qs(s,a,c),Mn(s,c))}function uk(s){var a=s.memoizedState,c=0;a!==null&&(c=a.retryLane),Yy(s,c)}function hk(s,a){var c=0;switch(s.tag){case 13:var f=s.stateNode,y=s.memoizedState;y!==null&&(c=y.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(a),Yy(s,c)}function Xy(s,a){return Zo(s,a)}function dk(s,a,c,f){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(s,a,c,f){return new dk(s,a,c,f)}function Tf(s){return!(!(s=s.prototype)||!s.isReactComponent)}function ui(s,a){var c=s.alternate;return c===null?((c=rr(s.tag,a,s.key,s.mode)).elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=a,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=14680064&s.flags,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,a=s.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function xu(s,a,c,f,y,x){var k=2;if(f=s,typeof s=="function")Tf(s)&&(k=1);else if(typeof s=="string")k=5;else e:switch(s){case N:return ta(c.children,y,x,a);case I:k=8,y|=8;break;case A:return(s=rr(12,c,a,2|y)).elementType=A,s.lanes=x,s;case fe:return(s=rr(13,c,a,y)).elementType=fe,s.lanes=x,s;case Te:return(s=rr(19,c,a,y)).elementType=Te,s.lanes=x,s;case Ie:return bu(c,y,x,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case R:k=10;break e;case C:k=9;break e;case V:k=11;break e;case Re:k=14;break e;case ke:k=16,f=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return(a=rr(k,c,a,y)).elementType=s,a.type=f,a.lanes=x,a}function ta(s,a,c,f){return(s=rr(7,s,f,a)).lanes=c,s}function bu(s,a,c,f){return(s=rr(22,s,f,a)).elementType=Ie,s.lanes=c,s.stateNode={isHidden:!1},s}function kf(s,a,c){return(s=rr(6,s,null,a)).lanes=c,s}function Cf(s,a,c){return(a=rr(4,s.children!==null?s.children:[],s.key,a)).lanes=c,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function fk(s,a,c,f,y){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gr(0),this.expirationTimes=gr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gr(0),this.identifierPrefix=f,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Nf(s,a,c,f,y,x,k,M,F){return s=new fk(s,a,c,M,F),a===1?(a=1,x===!0&&(a|=8)):a=0,x=rr(3,null,null,a),s.current=x,x.stateNode=s,x.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},zd(x),s}function Jy(s){if(!s)return ei;e:{if(Un(s=s._reactInternals)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(zn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var c=s.type;if(zn(c))return k0(s,c,a)}return a}function Zy(s,a,c,f,y,x,k,M,F){return(s=Nf(c,f,!0,s,0,x,0,M,F)).context=Jy(null),c=s.current,(x=vs(f=Cn(),y=li(c))).callback=a??null,ri(c,x,y),s.current.lanes=y,qs(s,y,f),Mn(s,f),s}function wu(s,a,c,f){var y=a.current,x=Cn(),k=li(y);return c=Jy(c),a.context===null?a.context=c:a.pendingContext=c,(a=vs(x,k)).payload={element:s},(f=f===void 0?null:f)!==null&&(a.callback=f),(s=ri(y,a,k))!==null&&(Nr(s,y,k,x),Jc(s,y,k)),k}function Su(s){return(s=s.current).child?(s.child.tag,s.child.stateNode):null}function ev(s,a){if((s=s.memoizedState)!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<a?c:a}}function If(s,a){ev(s,a),(s=s.alternate)&&ev(s,a)}By=function(s,a,c){if(s!==null)if(s.memoizedProps!==a.pendingProps||jn.current)Rn=!0;else{if((s.lanes&c)===0&&!(128&a.flags))return Rn=!1,(function(te,X,ne){switch(X.tag){case 3:Sy(X),Za();break;case 5:U0(X);break;case 1:zn(X.type)&&qc(X);break;case 4:Bd(X,X.stateNode.containerInfo);break;case 10:var oe=X.type._context,de=X.memoizedProps.value;vt(Yc,oe._currentValue),oe._currentValue=de;break;case 13:if((oe=X.memoizedState)!==null)return oe.dehydrated!==null?(vt(Mt,1&Mt.current),X.flags|=128,null):(ne&X.child.childLanes)!==0?Ny(te,X,ne):(vt(Mt,1&Mt.current),(te=xs(te,X,ne))!==null?te.sibling:null);vt(Mt,1&Mt.current);break;case 19:if(oe=(ne&X.childLanes)!==0,128&te.flags){if(oe)return _y(te,X,ne);X.flags|=128}if((de=X.memoizedState)!==null&&(de.rendering=null,de.tail=null,de.lastEffect=null),vt(Mt,Mt.current),oe)break;return null;case 22:case 23:return X.lanes=0,xy(te,X,ne)}return xs(te,X,ne)})(s,a,c);Rn=!!(131072&s.flags)}else Rn=!1,_t&&1048576&a.flags&&I0(a,Gc,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;lu(s,a),s=a.pendingProps;var y=Ya(a,pn.current);no(a,c),y=Kd(null,a,f,s,y,c);var x=Qd();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,zn(f)?(x=!0,qc(a)):x=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,zd(a),y.updater=au,a.stateNode=y,y._reactInternals=a,tf(a,f,s,c),a=sf(null,a,f,!0,x,c)):(a.tag=0,_t&&x&&Pd(a),Dn(null,a,y,c),a=a.child),a;case 16:f=a.elementType;e:{switch(lu(s,a),s=a.pendingProps,f=(y=f._init)(f._payload),a.type=f,y=a.tag=(function(te){if(typeof te=="function")return Tf(te)?1:0;if(te!=null){if((te=te.$$typeof)===V)return 11;if(te===Re)return 14}return 2})(f),s=Cr(f,s),y){case 0:a=rf(null,a,f,s,c);break e;case 1:a=wy(null,a,f,s,c);break e;case 11:a=gy(null,a,f,s,c);break e;case 14:a=yy(null,a,f,Cr(f.type,s),c);break e}throw Error(t(306,f,""))}return a;case 0:return f=a.type,y=a.pendingProps,rf(s,a,f,y=a.elementType===f?y:Cr(f,y),c);case 1:return f=a.type,y=a.pendingProps,wy(s,a,f,y=a.elementType===f?y:Cr(f,y),c);case 3:e:{if(Sy(a),s===null)throw Error(t(387));f=a.pendingProps,y=(x=a.memoizedState).element,O0(s,a),Zc(a,f,null,c);var k=a.memoizedState;if(f=k.element,x.isDehydrated){if(x={element:f,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},a.updateQueue.baseState=x,a.memoizedState=x,256&a.flags){a=Ey(s,a,f,c,y=so(Error(t(423)),a));break e}if(f!==y){a=Ey(s,a,f,c,y=so(Error(t(424)),a));break e}for($n=Js(a.stateNode.containerInfo.firstChild),Bn=a,_t=!0,kr=null,c=M0(a,null,f,c),a.child=c;c;)c.flags=-3&c.flags|4096,c=c.sibling}else{if(Za(),f===y){a=xs(s,a,c);break e}Dn(s,a,f,c)}a=a.child}return a;case 5:return U0(a),s===null&&Dd(a),f=a.type,y=a.pendingProps,x=s!==null?s.memoizedProps:null,k=y.children,Td(f,y)?k=null:x!==null&&Td(f,x)&&(a.flags|=32),by(s,a),Dn(s,a,k,c),a.child;case 6:return s===null&&Dd(a),null;case 13:return Ny(s,a,c);case 4:return Bd(a,a.stateNode.containerInfo),f=a.pendingProps,s===null?a.child=eo(a,null,f,c):Dn(s,a,f,c),a.child;case 11:return f=a.type,y=a.pendingProps,gy(s,a,f,y=a.elementType===f?y:Cr(f,y),c);case 7:return Dn(s,a,a.pendingProps,c),a.child;case 8:case 12:return Dn(s,a,a.pendingProps.children,c),a.child;case 10:e:{if(f=a.type._context,y=a.pendingProps,x=a.memoizedProps,k=y.value,vt(Yc,f._currentValue),f._currentValue=k,x!==null)if(Tr(x.value,k)){if(x.children===y.children&&!jn.current){a=xs(s,a,c);break e}}else for((x=a.child)!==null&&(x.return=a);x!==null;){var M=x.dependencies;if(M!==null){k=x.child;for(var F=M.firstContext;F!==null;){if(F.context===f){if(x.tag===1){(F=vs(-1,c&-c)).tag=2;var H=x.updateQueue;if(H!==null){var G=(H=H.shared).pending;G===null?F.next=F:(F.next=G.next,G.next=F),H.pending=F}}x.lanes|=c,(F=x.alternate)!==null&&(F.lanes|=c),Fd(x.return,c,a),M.lanes|=c;break}F=F.next}}else if(x.tag===10)k=x.type===a.type?null:x.child;else if(x.tag===18){if((k=x.return)===null)throw Error(t(341));k.lanes|=c,(M=k.alternate)!==null&&(M.lanes|=c),Fd(k,c,a),k=x.sibling}else k=x.child;if(k!==null)k.return=x;else for(k=x;k!==null;){if(k===a){k=null;break}if((x=k.sibling)!==null){x.return=k.return,k=x;break}k=k.return}x=k}Dn(s,a,y.children,c),a=a.child}return a;case 9:return y=a.type,f=a.pendingProps.children,no(a,c),f=f(y=er(y)),a.flags|=1,Dn(s,a,f,c),a.child;case 14:return y=Cr(f=a.type,a.pendingProps),yy(s,a,f,y=Cr(f.type,y),c);case 15:return vy(s,a,a.type,a.pendingProps,c);case 17:return f=a.type,y=a.pendingProps,y=a.elementType===f?y:Cr(f,y),lu(s,a),a.tag=1,zn(f)?(s=!0,qc(a)):s=!1,no(a,c),cy(a,f,y),tf(a,f,y,c),sf(null,a,f,!0,s,c);case 19:return _y(s,a,c);case 22:return xy(s,a,c)}throw Error(t(156,a.tag))};var tv=typeof reportError=="function"?reportError:function(s){};function _f(s){this._internalRoot=s}function Eu(s){this._internalRoot=s}function Af(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Tu(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function nv(){}function ku(s,a,c,f,y){var x=c._reactRootContainer;if(x){var k=x;if(typeof y=="function"){var M=y;y=function(){var F=Su(k);M.call(F)}}wu(a,k,s,y)}else k=(function(F,H,G,te,X){if(X){if(typeof te=="function"){var ne=te;te=function(){var $=Su(oe);ne.call($)}}var oe=Zy(H,te,F,0,null,!1,0,"",nv);return F._reactRootContainer=oe,F[ps]=oe.current,ml(F.nodeType===8?F.parentNode:F),Zi(),oe}for(;X=F.lastChild;)F.removeChild(X);if(typeof te=="function"){var de=te;te=function(){var $=Su(J);de.call($)}}var J=Nf(F,0,!1,null,0,!1,0,"",nv);return F._reactRootContainer=J,F[ps]=J.current,ml(F.nodeType===8?F.parentNode:F),Zi(function(){wu(H,J,G,te)}),J})(c,a,s,y,f);return Su(k)}Eu.prototype.render=_f.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));wu(s,a,null,null)},Eu.prototype.unmount=_f.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Zi(function(){wu(null,s,null,null)}),a[ps]=null}},Eu.prototype.unstable_scheduleHydration=function(s){if(s){var a=Pc();s={blockedOn:null,target:s,priority:a};for(var c=0;c<Ur.length&&a!==0&&a<Ur[c].priority;c++);Ur.splice(c,0,s),c===0&&ll(s)}},al=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var c=Vi(a.pendingLanes);c!==0&&(La(a,1|c),Mn(a,Nt()),!(6&ct)&&(oo=Nt()+500,ti()))}break;case 13:Zi(function(){var f=ys(s,1);if(f!==null){var y=Cn();Nr(f,s,1,y)}}),If(s,1)}},Fr=function(s){if(s.tag===13){var a=ys(s,134217728);a!==null&&Nr(a,s,134217728,Cn()),If(s,134217728)}},yr=function(s){if(s.tag===13){var a=li(s),c=ys(s,a);c!==null&&Nr(c,s,a,Cn()),If(s,a)}},Pc=function(){return it},Oa=function(s,a){var c=it;try{return it=s,a()}finally{it=c}},Fn=function(s,a,c){switch(a){case"input":if(ee(s,c),a=c.name,c.type==="radio"&&a!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==s&&f.form===s.form){var y=$c(f);if(!y)throw Error(t(90));ht(f),ee(f,y)}}}break;case"textarea":Xt(s,c);break;case"select":(a=c.value)!=null&&Oe(s,!!c.multiple,a,!1)}},_a=wf,Os=Zi;var pk={usingClientEntryPoint:!1,Events:[vl,Ka,$c,cs,Ri,wf]},jl={findFiberByHostInstance:Hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mk={bundleType:jl.bundleType,version:jl.version,rendererPackageName:jl.rendererPackageName,rendererConfig:jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return(s=_c(s))===null?null:s.stateNode},findFiberByHostInstance:jl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cu.isDisabled&&Cu.supportsFiber)try{Bs=Cu.inject(mk),Xe=Cu}catch{}}return Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pk,Ln.createPortal=function(s,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Af(a))throw Error(t(200));return(function(f,y,x){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:k==null?null:""+k,children:f,containerInfo:y,implementation:x}})(s,a,null,c)},Ln.createRoot=function(s,a){if(!Af(s))throw Error(t(299));var c=!1,f="",y=tv;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=Nf(s,1,!1,null,0,c,0,f,y),s[ps]=a.current,ml(s.nodeType===8?s.parentNode:s),new _f(a)},Ln.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=(s=_c(a))===null?null:s.stateNode},Ln.flushSync=function(s){return Zi(s)},Ln.hydrate=function(s,a,c){if(!Tu(a))throw Error(t(200));return ku(null,s,a,!0,c)},Ln.hydrateRoot=function(s,a,c){if(!Af(s))throw Error(t(405));var f=c!=null&&c.hydratedSources||null,y=!1,x="",k=tv;if(c!=null&&(c.unstable_strictMode===!0&&(y=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),a=Zy(a,null,s,1,c??null,y,0,x,k),s[ps]=a.current,ml(s),f)for(s=0;s<f.length;s++)y=(y=(c=f[s])._getVersion)(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,y]:a.mutableSourceEagerHydrationData.push(c,y);return new Eu(a)},Ln.render=function(s,a,c){if(!Tu(a))throw Error(t(200));return ku(null,s,a,!1,c)},Ln.unmountComponentAtNode=function(s){if(!Tu(s))throw Error(t(40));return!!s._reactRootContainer&&(Zi(function(){ku(null,null,s,!1,function(){s._reactRootContainer=null,s[ps]=null})}),!0)},Ln.unstable_batchedUpdates=wf,Ln.unstable_renderSubtreeIntoContainer=function(s,a,c,f){if(!Tu(c))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return ku(s,a,c,!1,f)},Ln.version="18.3.1-next-f1338f8080-20240426",Ln}const Sk=Jb((function(){if(gv)return Nu;gv=1;var n=(mv||(mv=1,(function e(){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE=="function")try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch{}})(),yv.exports=wk()),yv.exports);return Nu.createRoot=n.createRoot,Nu.hydrateRoot=n.hydrateRoot,Nu})());var Ek={};const Zb=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):(64512&i)==55296&&r+1<n.length&&(64512&n.charCodeAt(r+1))==56320?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},ew={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],l=i+1<n.length,u=l?n[i+1]:0,h=i+2<n.length,m=h?n[i+2]:0,g=o>>2,v=(3&o)<<4|u>>4;let b=(15&u)<<2|m>>6,S=63&m;h||(S=64,l||(b=64)),r.push(t[g],t[v],t[b],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Zb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):(function(t){const r=[];let i=0,o=0;for(;i<t.length;){const l=t[i++];if(l<128)r[o++]=String.fromCharCode(l);else if(l>191&&l<224){const u=t[i++];r[o++]=String.fromCharCode((31&l)<<6|63&u)}else if(l>239&&l<365){const u=((7&l)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++])-65536;r[o++]=String.fromCharCode(55296+(u>>10)),r[o++]=String.fromCharCode(56320+(1023&u))}else{const u=t[i++],h=t[i++];r[o++]=String.fromCharCode((15&l)<<12|(63&u)<<6|63&h)}}return r.join("")})(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],l=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const h=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||l==null||u==null||h==null)throw new Tk;const m=o<<2|l>>4;if(r.push(m),u!==64){const g=l<<4&240|u>>2;if(r.push(g),h!==64){const v=u<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Tk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rh=function(n){return(function(e){const t=Zb(e);return ew.encodeByteArray(t,!0)})(n).replace(/\./g,"")},tw=function(n){try{return ew.decodeString(n,!0)}catch{}return null},kk=()=>(function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")})().__FIREBASE_DEFAULTS__,Dh=()=>{try{return kk()||(()=>{if(typeof process>"u")return;const n=Ek.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&tw(n[1]);return e&&JSON.parse(e)})()}catch{return}},nw=n=>Dh()?.emulatorHosts?.[n],rw=()=>Dh()?.config,sw=n=>Dh()?.[`_${n}`];class Ck{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Uo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function iw(n){return(await fetch(n,{credentials:"include"})).ok}const Dl={};let bv=!1;function aw(n,e){if(typeof window>"u"||typeof document>"u"||!Uo(window.location.host)||Dl[n]===e||Dl[n]||bv)return;function t(u){return`__firebase__banner__${u}`}Dl[n]=e;const r="__firebase__banner",i=(function(){const u={prod:[],emulator:[]};for(const h of Object.keys(Dl))Dl[h]?u.emulator.push(h):u.prod.push(h);return u})().prod.length>0;function o(){const u=document.createElement("span");return u.style.cursor="pointer",u.style.marginLeft="16px",u.style.fontSize="24px",u.innerHTML=" &times;",u.onclick=()=>{bv=!0,(function(){const h=document.getElementById(r);h&&h.remove()})()},u}function l(){const u=(function(T){let _=document.getElementById(T),D=!1;return _||(_=document.createElement("div"),_.setAttribute("id",T),D=!0),{created:D,element:_}})(r),h=t("text"),m=document.getElementById(h)||document.createElement("span"),g=t("learnmore"),v=document.getElementById(g)||document.createElement("a"),b=t("preprendIcon"),S=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(u.created){const T=u.element;(function(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"})(T),(function(D,O){D.setAttribute("id",O),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"})(v,g);const _=o();(function(D,O){D.setAttribute("width","24"),D.setAttribute("id",O),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"})(S,b),T.append(S,m,v,_),document.body.appendChild(T)}i?(m.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",l):l()}function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function am(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Nk(){return!(function(){const n=Dh()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}})()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function om(){try{return typeof indexedDB=="object"}catch{return!1}}function lm(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}function ow(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Lr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ea.prototype.create)}}class Ea{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?(function(h,m){return h.replace(Ik,(g,v)=>{const b=m[v];return b!=null?String(b):`<${v}?>`})})(o,r):"Error",u=`${this.serviceName}: ${l} (${i}).`;return new Lr(i,u,r)}}const Ik=/\{\$([^}]+)}/g;function Ci(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],l=e[i];if(wv(o)&&wv(l)){if(!Ci(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function wv(n){return n!==null&&typeof n=="object"}function yc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ml(n){const e={};return n.replace(/^\?/,"").split("&").forEach(t=>{if(t){const[r,i]=t.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function Ll(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class _k{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");i=(function(l,u){if(typeof l!="object"||l===null)return!1;for(const h of u)if(h in l&&typeof l[h]=="function")return!0;return!1})(e,["next","error","complete"])?e:{next:e,error:t,complete:r},i.next===void 0&&(i.next=Pf),i.error===void 0&&(i.error=Pf),i.complete===void 0&&(i.complete=Pf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers!==void 0&&this.observers[e]!==void 0&&(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch{typeof console<"u"}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Pf(){}function Sv(n,e=1e3,t=2){const r=e*Math.pow(t,n),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function Ot(n){return n&&n._delegate?n._delegate:n}class Rr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const na="[DEFAULT]";class Ak{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Ck;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if((function(t){return t.instantiationMode==="EAGER"})(e))try{this.getOrInitializeService({instanceIdentifier:na})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=na){return this.instances.has(e)}getOptions(e=na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&l.resolve(i);return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===na?void 0:i),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var i;return r||null}normalizeInstanceIdentifier(e=na){return this.component?this.component.multipleInstances?e:na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}class Pk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ak(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Je;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Je||(Je={}));const jk={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},Rk=Je.INFO,Dk={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},Mk=(n,e,...t)=>{if(!(e<n.logLevel)&&(new Date().toISOString(),!Dk[e]))throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mh{constructor(e){this.name=e,this._logLevel=Rk,this._logHandler=Mk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}let Ev,Tv;const lw=new WeakMap,pp=new WeakMap,cw=new WeakMap,jf=new WeakMap,mp=new WeakMap;let gp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return pp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||cw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xi(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&(e==="done"||e==="store")||e in n};function Lk(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Tv||(Tv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(n)?function(...e){return n.apply(Rf(this),e),xi(lw.get(this))}:function(...e){return xi(n.apply(Rf(this),e))}:function(e,...t){const r=n.call(Rf(this),e,...t);return cw.set(r,e.sort?e.sort():[e]),xi(r)}}function Ok(n){return typeof n=="function"?Lk(n):(n instanceof IDBTransaction&&(function(t){if(pp.has(t))return;const r=new Promise((i,o)=>{const l=()=>{t.removeEventListener("complete",u),t.removeEventListener("error",h),t.removeEventListener("abort",h)},u=()=>{i(),l()},h=()=>{o(t.error||new DOMException("AbortError","AbortError")),l()};t.addEventListener("complete",u),t.addEventListener("error",h),t.addEventListener("abort",h)});pp.set(t,r)})(n),e=n,(Ev||(Ev=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(t=>e instanceof t)?new Proxy(n,gp):n);var e}function xi(n){if(n instanceof IDBRequest)return(function(t){const r=new Promise((i,o)=>{const l=()=>{t.removeEventListener("success",u),t.removeEventListener("error",h)},u=()=>{i(xi(t.result)),l()},h=()=>{o(t.error),l()};t.addEventListener("success",u),t.addEventListener("error",h)});return r.then(i=>{i instanceof IDBCursor&&lw.set(i,t)}).catch(()=>{}),mp.set(r,t),r})(n);if(jf.has(n))return jf.get(n);const e=Ok(n);return e!==n&&(jf.set(n,e),mp.set(e,n)),e}const Rf=n=>mp.get(n);function uw(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(n,e),u=xi(l);return r&&l.addEventListener("upgradeneeded",h=>{r(xi(l.result),h.oldVersion,h.newVersion,xi(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),u}const Vk=["get","getKey","getAll","getAllKeys","count"],Fk=["put","add","delete","clear"],Df=new Map;function kv(n,e){if(!(n instanceof IDBDatabase)||e in n||typeof e!="string")return;if(Df.get(e))return Df.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Fk.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Vk.includes(t))return;const o=async function(l,...u){const h=this.transaction(l,i?"readwrite":"readonly");let m=h.store;return r&&(m=m.index(u.shift())),(await Promise.all([m[t](...u),i&&h.done]))[0]};return Df.set(e,o),o}gp=(n=>({...n,get:(e,t,r)=>kv(e,t)||n.get(e,t,r),has:(e,t)=>!!kv(e,t)||n.has(e,t)}))(gp);class Uk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if((function(t){return t.getComponent()?.type==="VERSION"})(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const yp="@firebase/app",Cv="0.14.5",Is=new Mh("@firebase/app"),zk="@firebase/app-compat",Bk="@firebase/analytics-compat",$k="@firebase/analytics",qk="@firebase/app-check-compat",Hk="@firebase/app-check",Wk="@firebase/auth",Gk="@firebase/auth-compat",Kk="@firebase/database",Qk="@firebase/data-connect",Yk="@firebase/database-compat",Xk="@firebase/functions",Jk="@firebase/functions-compat",Zk="@firebase/installations",eC="@firebase/installations-compat",tC="@firebase/messaging",nC="@firebase/messaging-compat",rC="@firebase/performance",sC="@firebase/performance-compat",iC="@firebase/remote-config",aC="@firebase/remote-config-compat",oC="@firebase/storage",lC="@firebase/storage-compat",cC="@firebase/firestore",uC="@firebase/ai",hC="@firebase/firestore-compat",dC="firebase",vp="[DEFAULT]",fC={[yp]:"fire-core",[zk]:"fire-core-compat",[$k]:"fire-analytics",[Bk]:"fire-analytics-compat",[Hk]:"fire-app-check",[qk]:"fire-app-check-compat",[Wk]:"fire-auth",[Gk]:"fire-auth-compat",[Kk]:"fire-rtdb",[Qk]:"fire-data-connect",[Yk]:"fire-rtdb-compat",[Xk]:"fire-fn",[Jk]:"fire-fn-compat",[Zk]:"fire-iid",[eC]:"fire-iid-compat",[tC]:"fire-fcm",[nC]:"fire-fcm-compat",[rC]:"fire-perf",[sC]:"fire-perf-compat",[iC]:"fire-rc",[aC]:"fire-rc-compat",[oC]:"fire-gcs",[lC]:"fire-gcs-compat",[cC]:"fire-fst",[hC]:"fire-fst-compat",[uC]:"fire-vertex","fire-js":"fire-js",[dC]:"fire-js-all"},sh=new Map,pC=new Map,xp=new Map;function Nv(n,e){try{n.container.addComponent(e)}catch(t){Is.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function is(n){const e=n.name;if(xp.has(e))return Is.debug(`There were multiple attempts to register component ${e}.`),!1;xp.set(e,n);for(const t of sh.values())Nv(t,n);for(const t of pC.values())Nv(t,n);return!0}function pa(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Wn(n){return n!=null&&n.settings!==void 0}const bi=new Ea("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class mC{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bi.create("app-deleted",{appName:this._name})}}const zo="12.5.0";function hw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:vp,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw bi.create("bad-app-name",{appName:String(i)});if(t||(t=rw()),!t)throw bi.create("no-options");const o=sh.get(i);if(o){if(Ci(t,o.options)&&Ci(r,o.config))return o;throw bi.create("duplicate-app",{appName:i})}const l=new Pk(i);for(const h of xp.values())l.addComponent(h);const u=new mC(t,r,l);return sh.set(i,u),u}function cm(n=vp){const e=sh.get(n);if(!e&&n===vp&&rw())return hw();if(!e)throw bi.create("no-app",{appName:n});return e}function cr(n,e,t){let r=fC[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${r}" with version "${e}":`];return i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Is.warn(l.join(" "))}is(new Rr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const tc="firebase-heartbeat-store";let Mf=null;function dw(){return Mf||(Mf=uw("firebase-heartbeat-database",1,{upgrade:(n,e)=>{if(e===0)try{n.createObjectStore(tc)}catch{}}}).catch(n=>{throw bi.create("idb-open",{originalErrorMessage:n.message})})),Mf}async function Iv(n,e){try{const t=(await dw()).transaction(tc,"readwrite");await t.objectStore(tc).put(e,fw(n)),await t.done}catch(t){if(t instanceof Lr)Is.warn(t.message);else{const r=bi.create("idb-set",{originalErrorMessage:t?.message});Is.warn(r.message)}}}function fw(n){return`${n.name}!${n.options.appId}`}class gC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new yC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=_v();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(r=>r.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){const r=(function(i){if(i.length===0)return-1;let o=0,l=i[0].date;for(let u=1;u<i.length;u++)i[u].date<l&&(l=i[u].date,o=u);return o})(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Is.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=_v(),{heartbeatsToSend:t,unsentEntries:r}=(function(o,l=1024){const u=[];let h=o.slice();for(const m of o){const g=u.find(v=>v.agent===m.agent);if(g){if(g.dates.push(m.date),Av(u)>l){g.dates.pop();break}}else if(u.push({agent:m.agent,dates:[m.date]}),Av(u)>l){u.pop();break}h=h.slice(1)}return{heartbeatsToSend:u,unsentEntries:h}})(this._heartbeatsCache.heartbeats),i=rh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Is.warn(e),""}}}function _v(){return new Date().toISOString().substring(0,10)}class yC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!om()&&lm().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await(async function(t){try{const r=(await dw()).transaction(tc),i=await r.objectStore(tc).get(fw(t));return await r.done,i}catch(r){if(r instanceof Lr)Is.warn(r.message);else{const i=bi.create("idb-get",{originalErrorMessage:r?.message});Is.warn(i.message)}}})(this.app);return e?.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return Iv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return Iv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function Av(n){return rh(JSON.stringify({version:2,heartbeats:n})).length}var Pv;function vC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}Pv="",is(new Rr("platform-logger",n=>new Uk(n),"PRIVATE")),is(new Rr("heartbeat",n=>new gC(n),"PRIVATE")),cr(yp,Cv,Pv),cr(yp,Cv,"esm2020"),cr("fire-js","");const xC=vC,pw=new Ea("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ih=new Mh("@firebase/auth");function Bu(n,...e){ih.logLevel<=Je.ERROR&&ih.error(`Auth (${zo}): ${n}`,...e)}function hr(n,...e){throw hm(n,...e)}function Pr(n,...e){return hm(n,...e)}function um(n,e,t){const r={...xC(),[e]:t};return new Ea("auth","Firebase",r).create(e,{appName:n.name})}function Ts(n){return um(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return pw.create(n,...e)}function Me(n,e,...t){if(!n)throw hm(e,...t)}function Ss(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Bu(e),new Error(e)}function _s(n,e){n||Ss(e)}function bp(){return typeof self<"u"&&self.location?.href||""}function jv(){return typeof self<"u"&&self.location?.protocol||null}function bC(){return typeof navigator>"u"||!navigator||!("onLine"in navigator)||typeof navigator.onLine!="boolean"||jv()!=="http:"&&jv()!=="https:"&&!am()&&!("connection"in navigator)||navigator.onLine}class vc{constructor(e,t){this.shortDelay=e,this.longDelay=t,_s(t>e,"Short delay should be less than long delay!"),this.isMobile=typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())||typeof navigator=="object"&&navigator.product==="ReactNative"}get(){return bC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dm(n,e){_s(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class mw{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const wC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},SC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],EC=new vc(3e4,6e4);function as(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Dr(n,e,t,r,i={}){return gw(n,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=yc({key:n.config.apiKey,...l}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:h,...o};return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Uo(n.emulatorConfig.host)&&(m.credentials="include"),mw.fetch()(await yw(n,n.config.apiHost,t,u),m)})}async function gw(n,e,t){n._canInitEmulator=!1;const r={...wC,...e};try{const i=new kC(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Iu(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[h,m]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Iu(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Iu(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw Iu(n,"user-disabled",l);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw um(n,g,m);hr(n,g)}}catch(i){if(i instanceof Lr)throw i;hr(n,"network-request-failed",{message:String(i)})}}async function nc(n,e,t,r,i={}){const o=await Dr(n,e,t,r,i);return"mfaPendingCredential"in o&&hr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function yw(n,e,t,r){const i=`${e}${t}?${r}`,o=n,l=o.config.emulator?dm(n.config,i):`${n.config.apiScheme}://${i}`;return SC.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function TC(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Pr(this.auth,"network-request-failed")),EC.get())})}}function Iu(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Pr(n,e,r);return i.customData._tokenResponse=t,i}function Rv(n){return n!==void 0&&n.enterprise!==void 0}class CC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return TC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ah(n,e){return Dr(n,"POST","/v1/accounts:lookup",e)}function Hl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Lf(n){return 1e3*Number(n)}function fm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Bu("JWT malformed, contained fewer than 3 sections"),null;try{const i=tw(t);return i?JSON.parse(i):(Bu("Failed to decode base64 JWT payload"),null)}catch(i){return Bu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Dv(n){const e=fm(n);return Me(e,"internal-error"),Me(e.exp!==void 0,"internal-error"),Me(e.iat!==void 0,"internal-error"),Number(e.exp)-Number(e.iat)}async function Ao(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Lr&&(function({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"})(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}class NC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,t)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void(e?.code==="auth/network-request-failed"&&this.schedule(!0))}this.schedule()}}class wp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hl(this.lastLoginAt),this.creationTime=Hl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function $u(n){const e=n.auth,t=await n.getIdToken(),r=await Ao(n,ah(e,{idToken:t}));Me(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=i.providerUserInfo?.length?vw(i.providerUserInfo):[],l=(u=n.providerData,h=o,[...u.filter(S=>!h.some(T=>T.providerId===S.providerId)),...h]);var u,h;const m=n.isAnonymous,g=!(n.email&&i.passwordHash||l?.length),v=!!m&&g,b={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new wp(i.createdAt,i.lastLoginAt),isAnonymous:v};Object.assign(n,b)}function vw(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}class Eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(e.idToken!==void 0,"internal-error"),Me(e.refreshToken!==void 0,"internal-error");const t="expiresIn"in e&&e.expiresIn!==void 0?Number(e.expiresIn):Dv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const t=Dv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await(async function(l,u){const h=await gw(l,{},async()=>{const m=yc({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:g,apiKey:v}=l.config,b=await yw(l,g,"/v1/token",`key=${v}`),S=await l._getAdditionalHeaders();S["Content-Type"]="application/x-www-form-urlencoded";const T={method:"POST",headers:S,body:m};return l.emulatorConfig&&Uo(l.emulatorConfig.host)&&(T.credentials="include"),mw.fetch()(b,T)});return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,l=new Eo;return r&&(Me(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Me(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Me(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eo,this.toJSON())}_performRefresh(){return Ss("not implemented")}}function hi(n,e){Me(typeof n=="string"||n===void 0,"internal-error",{appName:e})}class _r{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new NC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new wp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ao(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return(async function(t,r=!1){const i=Ot(t),o=await i.getIdToken(r),l=fm(o);Me(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,h=u?.sign_in_provider;return{claims:l,token:o,authTime:Hl(Lf(l.auth_time)),issuedAtTime:Hl(Lf(l.iat)),expirationTime:Hl(Lf(l.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}})(this,e)}reload(){return(async function(e){const t=Ot(e);await $u(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new _r({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await $u(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(Ts(this.auth));const e=await this.getIdToken();return await Ao(this,(async function(t,r){return Dr(t,"POST","/v1/accounts:delete",r)})(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,u=t.tenantId??void 0,h=t._redirectEventId??void 0,m=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:v,emailVerified:b,isAnonymous:S,providerData:T,stsTokenManager:_}=t;Me(v&&_,e,"internal-error");const D=Eo.fromJSON(this.name,_);Me(typeof v=="string",e,"internal-error"),hi(r,e.name),hi(i,e.name),Me(typeof b=="boolean",e,"internal-error"),Me(typeof S=="boolean",e,"internal-error"),hi(o,e.name),hi(l,e.name),hi(u,e.name),hi(h,e.name),hi(m,e.name),hi(g,e.name);const O=new _r({uid:v,auth:e,email:i,emailVerified:b,displayName:r,isAnonymous:S,photoURL:l,phoneNumber:o,tenantId:u,stsTokenManager:D,createdAt:m,lastLoginAt:g});return T&&Array.isArray(T)&&(O.providerData=T.map(z=>({...z}))),h&&(O._redirectEventId=h),O}static async _fromIdTokenResponse(e,t,r=!1){const i=new Eo;i.updateFromServerResponse(t);const o=new _r({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await $u(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Me(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?vw(i.providerUserInfo):[],l=!(i.email&&i.passwordHash||o?.length),u=new Eo;u.updateFromIdToken(r);const h=new _r({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:l}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new wp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||o?.length)};return Object.assign(h,m),h}}const Mv=new Map;function Es(n){_s(n instanceof Function,"Expected a class definition");let e=Mv.get(n);return e?(_s(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Mv.set(n,e),e)}class xw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xw.type="NONE";const Lv=xw;function qu(n,e,t){return`firebase:${n}:${e}:${t}`}class To{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=qu(this.userKey,i.apiKey,o),this.fullPersistenceKey=qu("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ah(this.auth,{idToken:e}).catch(()=>{});return t?_r._fromGetAccountInfoResponse(this.auth,t,e):null}return _r._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new To(Es(Lv),e,r);const i=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=i[0]||Es(Lv);const l=qu(r,e.config.apiKey,e.name);let u=null;for(const m of t)try{const g=await m._get(l);if(g){let v;if(typeof g=="string"){const b=await ah(e,{idToken:g}).catch(()=>{});if(!b)break;v=await _r._fromGetAccountInfoResponse(e,b,g)}else v=_r._fromJSON(e,g);m!==o&&(u=v),o=m;break}}catch{}const h=i.filter(m=>m._shouldAllowMigration);return o._shouldAllowMigration&&h.length?(o=h[0],u&&await o._set(l,u.toJSON()),await Promise.all(t.map(async m=>{if(m!==o)try{await m._remove(l)}catch{}})),new To(o,e,r)):new To(o,e,r)}}function Ov(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ew(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kw(e))return"Blackberry";if(Cw(e))return"Webos";if(ww(e))return"Safari";if((e.includes("chrome/")||Sw(e))&&!e.includes("edge/"))return"Chrome";if(Tw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function bw(n=Sn()){return/firefox\//i.test(n)}function ww(n=Sn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Sw(n=Sn()){return/crios\//i.test(n)}function Ew(n=Sn()){return/iemobile/i.test(n)}function Tw(n=Sn()){return/android/i.test(n)}function kw(n=Sn()){return/blackberry/i.test(n)}function Cw(n=Sn()){return/webos/i.test(n)}function pm(n=Sn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function IC(){return(function(){const n=Sn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0})()&&document.documentMode===10}function Nw(n=Sn()){return pm(n)||Tw(n)||Cw(n)||kw(n)||/windows phone/i.test(n)||Ew(n)}function Iw(n,e=[]){let t;switch(n){case"Browser":t=Ov(Sn());break;case"Worker":t=`${Ov(Sn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zo}/${r}`}class _C{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,u)=>{try{l(e(o))}catch(h){u(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}class AC{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class PC{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vv(this),this.idTokenSubscription=new Vv(this),this.beforeStateQueue=new _C(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Es(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await To.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ah(this,{idToken:e}),r=await _r._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch{await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Wn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=r?._redirectEventId,u=await this.tryRedirectSignIn(e);o&&o!==l||!u?.user||(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $u(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=(function(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null})()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(Ts(this));const t=e?Ot(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(Ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(Ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await(async function(r,i={}){return Dr(r,"GET","/v2/passwordPolicy",as(r,i))})(this),t=new AC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ea("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};this.tenantId!=null&&(t.tenantId=this.tenantId),await(async function(r,i){return Dr(r,"POST","/v2/accounts:revokeToken",as(r,i))})(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Es(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=await To.create(this,[Es(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{l=!0,h()}}{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Iw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&(function(t,...r){ih.logLevel<=Je.WARN&&ih.warn(`Auth (${zo}): ${t}`,...r)})(`Error while retrieving App Check token: ${e.error}`),e?.token}}function As(n){return Ot(n)}class Vv{constructor(e){this.auth=e,this.observer=null,this.addObserver=(function(t,r){const i=new _k(t,r);return i.subscribe.bind(i)})(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Lh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _w(n){return Lh.loadJS(n)}class jC{constructor(){this.enterprise=new RC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class RC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Aw="NO_RECAPTCHA";class DC{constructor(e){this.type="recaptcha-enterprise",this.auth=As(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{(async function(h,m){return Dr(h,"GET","/v2/recaptchaConfig",as(h,m))})(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey!==void 0){const m=new CC(h);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,l(m.siteKey)}u(new Error("recaptcha Enterprise site key undefined"))}).catch(h=>{u(h)})})}function i(o,l,u){const h=window.grecaptcha;Rv(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(m=>{l(m)}).catch(()=>{l(Aw)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jC().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(u=>{if(!t&&Rv(window.grecaptcha))i(u,o,l);else{if(typeof window>"u")return void l(new Error("RecaptchaVerifier is only supported in browser"));let h=Lh.recaptchaEnterpriseScript;h.length!==0&&(h+=u),_w(h).then(()=>{i(u,o,l)}).catch(m=>{l(m)})}}).catch(u=>{l(u)})})}}async function Fv(n,e,t,r=!1,i=!1){const o=new DC(n);let l;if(i)l=Aw;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,m=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:m,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function oh(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Fv(n,e,t,t==="getOobCode");return r(n,o)}return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){const l=await Fv(n,e,t,t==="getOobCode");return r(n,l)}return Promise.reject(o)})}function MC(n,e,t){const r=As(n);Me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=Uv(e),{host:o,port:l}=(function(g){const v=Uv(g),b=/(\/\/)?([^?#/]+)/.exec(g.substr(v.length));if(!b)return{host:"",port:null};const S=b[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(S);if(T){const _=T[1];return{host:_,port:zv(S.substr(_.length+1))}}{const[_,D]=S.split(":");return{host:_,port:zv(D)}}})(e),u=l===null?"":`:${l}`,h={url:`${i}//${o}${u}/`},m=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:!1})});if(!r._canInitEmulator)return Me(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Me(Ci(h,r.config.emulator)&&Ci(m,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=h,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,Uo(o)?(iw(`${i}//${o}${u}`),aw("Auth",!0)):(function(){function g(){const v=document.createElement("p"),b=v.style;v.innerText="Running in emulator mode. Do not use with production credentials.",b.position="fixed",b.width="100%",b.backgroundColor="#ffffff",b.border=".1em solid #000000",b.color="#b50000",b.bottom="0px",b.left="0px",b.margin="0px",b.zIndex="10000",b.textAlign="center",v.classList.add("firebase-emulator-warning"),document.body.appendChild(v)}typeof console<"u",typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g())})()}function Uv(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function zv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class mm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ss("not implemented")}_getIdTokenResponse(e){return Ss("not implemented")}_linkToIdToken(e,t){return Ss("not implemented")}_getReauthenticationResolver(e){return Ss("not implemented")}}async function LC(n,e){return Dr(n,"POST","/v1/accounts:signUp",e)}async function OC(n,e){return nc(n,"POST","/v1/accounts:signInWithPassword",as(n,e))}async function Pw(n,e){return Dr(n,"POST","/v1/accounts:sendOobCode",as(n,e))}async function VC(n,e){return Pw(n,e)}class rc extends mm{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new rc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new rc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return oh(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",OC);case"emailLink":return(async function(t,r){return nc(t,"POST","/v1/accounts:signInWithEmailLink",as(t,r))})(e,{email:this._email,oobCode:this._password});default:hr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return oh(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",LC);case"emailLink":return(async function(r,i){return nc(r,"POST","/v1/accounts:signInWithEmailLink",as(r,i))})(e,{idToken:t,email:this._email,oobCode:this._password});default:hr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ko(n,e){return nc(n,"POST","/v1/accounts:signInWithIdp",as(n,e))}class ma extends mm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ma(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const l=new ma(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){return ko(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ko(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ko(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yc(t)}return e}}class gm{constructor(e){const t=Ml(Ll(e)),r=t.apiKey??null,i=t.oobCode??null,o=(function(l){switch(l){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}})(t.mode??null);Me(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=(function(r){const i=Ml(Ll(r)).link,o=i?Ml(Ll(i)).deep_link_id:null,l=Ml(Ll(r)).deep_link_id;return(l?Ml(Ll(l)).link:null)||l||o||i||r})(e);try{return new gm(t)}catch{return null}}}class Co{constructor(){this.providerId=Co.PROVIDER_ID}static credential(e,t){return rc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=gm.parseLink(t);return Me(r,"argument-error"),rc._fromEmailAndCode(e,r.code,r.tenantId)}}Co.PROVIDER_ID="password",Co.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Co.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ym{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class xc extends ym{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fi extends xc{constructor(){super("facebook.com")}static credential(e){return ma._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fi.credential(e.oauthAccessToken)}catch{return null}}}fi.FACEBOOK_SIGN_IN_METHOD="facebook.com",fi.PROVIDER_ID="facebook.com";class ws extends xc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ma._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ws.credential(t,r)}catch{return null}}}ws.GOOGLE_SIGN_IN_METHOD="google.com",ws.PROVIDER_ID="google.com";class pi extends xc{constructor(){super("github.com")}static credential(e){return ma._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pi.credential(e.oauthAccessToken)}catch{return null}}}pi.GITHUB_SIGN_IN_METHOD="github.com",pi.PROVIDER_ID="github.com";class mi extends xc{constructor(){super("twitter.com")}static credential(e,t){return ma._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return mi.credential(t,r)}catch{return null}}}async function FC(n,e){return nc(n,"POST","/v1/accounts:signUp",as(n,e))}mi.TWITTER_SIGN_IN_METHOD="twitter.com",mi.PROVIDER_ID="twitter.com";class ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await _r._fromIdTokenResponse(e,r,i),l=Bv(r);return new ga({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Bv(r);return new ga({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Bv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class lh extends Lr{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,lh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new lh(e,t,r,i)}}function jw(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?lh._fromErrorAndOperation(n,i,e,r):i})}async function Rw(n,e,t=!1){if(Wn(n.app))return Promise.reject(Ts(n));const r="signIn",i=await jw(n,r,e),o=await ga._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function Dw(n){const e=As(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function UC(n,e){await(async function(t,r){return Dr(t,"POST","/v1/accounts:update",as(t,r))})(Ot(n),{oobCode:e})}function zC(n,e,t){return Wn(n.app)?Promise.reject(Ts(n)):(async function(r,i){return Rw(As(r),i)})(Ot(n),Co.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Dw(n),r})}async function Mw(n,e){const t=Ot(n),r={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:i}=await(async function(o,l){return Pw(o,l)})(t.auth,r);i!==n.email&&await n.reload()}async function BC(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Ot(n),i={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await Ao(r,(async function(u,h){return Dr(u,"POST","/v1/accounts:update",h)})(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Lw(n,e,t,r){return Ot(n).onAuthStateChanged(e,t,r)}const ch="__sak";class Ow{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ch,"1"),this.storage.removeItem(ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Vw extends Ow{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Nw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((l,u,h)=>{this.notifyListeners(l,h)});const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);(t||this.localCache[r]!==l)&&this.notifyListeners(r,l)},o=this.storage.getItem(r);IC()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Vw.type="LOCAL";const $C=Vw;class Fw extends Ow{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Fw.type="SESSION";const Uw=Fw;class Oh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Oh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(l).map(async m=>m(t.origin,o)),h=await(function(m){return Promise.all(m.map(async g=>{try{return{fulfilled:!0,value:await g}}catch(v){return{fulfilled:!1,reason:v}}}))})(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&this.handlersMap[e].size!==0||delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function vm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}Oh.receivers=[];class qC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((u,h)=>{const m=vm("",20);i.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(v){const b=v;if(b.data.eventId===m)switch(b.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(b.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"))}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function Jr(){return window}function $v(){return Jr().WorkerGlobalScope!==void 0&&typeof Jr().importScripts=="function"}const qv="firebaseLocalStorageDb",uh="firebaseLocalStorage",zw="fbase_key";class sc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hh(n,e){return n.transaction([uh],e?"readwrite":"readonly").objectStore(uh)}function Sp(){const n=indexedDB.open(qv,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(uh,{keyPath:zw})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(uh)?e(r):(r.close(),await(function(){const i=indexedDB.deleteDatabase(qv);return new sc(i).toPromise()})(),e(await Sp()))})})}async function Hv(n,e,t){const r=hh(n,!0).put({[zw]:e,value:t});return new sc(r).toPromise()}function Wv(n,e){const t=hh(n,!0).delete(e);return new sc(t).toPromise()}class Bw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Sp()),this.db}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $v()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oh._getInstance($v()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await(async function(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}})(),!this.activeServiceWorker)return;this.sender=new qC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&(navigator?.serviceWorker?.controller||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sp();return await Hv(e,ch,"1"),await Wv(e,ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Hv(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>(async function(i,o){const l=hh(i,!1).get(o),u=await new sc(l).toPromise();return u===void 0?null:u.value})(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Wv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=hh(i,!1).getAll();return new sc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Bw.type="LOCAL";const HC=Bw;function $w(n,e){return e?Es(e):(Me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}new vc(3e4,6e4);class xm extends mm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function WC(n){return Rw(n.auth,new xm(n),n.bypassAuthState)}function GC(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),(async function(r,i,o=!1){const{auth:l}=r;if(Wn(l.app))return Promise.reject(Ts(l));const u="reauthenticate";try{const h=await Ao(r,jw(l,u,i,r),o);Me(h.idToken,l,"internal-error");const m=fm(h.idToken);Me(m,l,"internal-error");const{sub:g}=m;return Me(r.uid===g,l,"user-mismatch"),ga._forOperation(r,u,h)}catch(h){throw h?.code==="auth/user-not-found"&&hr(l,"user-mismatch"),h}})(t,new xm(n),n.bypassAuthState)}async function KC(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),(async function(r,i,o=!1){const l=await Ao(r,i._linkToIdToken(r.auth,await r.getIdToken()),o);return ga._forOperation(r,"link",l)})(t,new xm(n),n.bypassAuthState)}class qw{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:l,type:u}=e;if(l)return void this.reject(l);const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WC;case"linkViaPopup":case"linkViaRedirect":return KC;case"reauthViaPopup":case"reauthViaRedirect":return GC;default:hr(this.auth,"internal-error")}}resolve(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const QC=new vc(2e3,1e4);async function YC(n,e,t){if(Wn(n.app))return Promise.reject(Pr(n,"operation-not-supported-in-this-environment"));const r=As(n);(function(o,l,u){if(!(l instanceof u))throw u.name!==l.constructor.name&&hr(o,"argument-error"),um(o,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)})(n,e,ym);const i=$w(r,t);return new la(r,"signInViaPopup",e,i).executeNotNull()}class la extends qw{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,la.currentPopupAction&&la.currentPopupAction.cancel(),la.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){_s(this.filter.length===1,"Popup operations only handle one event");const e=vm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,la.currentPopupAction=null}pollUserCancellation(){const e=()=>{this.authWindow?.window?.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pr(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,QC.get())};e()}}la.currentPopupAction=null;const XC="pendingRedirect",Hu=new Map;class JC extends qw{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Hu.get(this.auth._key());if(!e){try{const t=await(async function(i,o){const l=(function(m){return qu(XC,m.config.apiKey,m.name)})(o),u=(function(m){return Es(m._redirectPersistence)})(i);if(!await u._isAvailable())return!1;const h=await u._get(l)==="true";return await u._remove(l),h})(this.resolver,this.auth),r=t?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Hu.set(this.auth._key(),e)}return this.bypassAuthState||Hu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type!=="unknown"){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ZC(n,e){Hu.set(n._key(),e)}async function eN(n,e,t=!1){if(Wn(n.app))return Promise.reject(Ts(n));const r=As(n),i=$w(r,e),o=new JC(r,i,t),l=await o.execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}class tN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!(function(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kv(r);default:return!1}})(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Kv(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Pr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gv(e))}saveEventToCache(e){this.cachedEventUids.add(Gv(e)),this.lastProcessedEventTime=Date.now()}}function Gv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Kv({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}const nN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rN=/^https?/;async function sN(n){if(n.config.emulator)return;const{authorizedDomains:e}=await(async function(t,r={}){return Dr(t,"GET","/v1/projects",r)})(n);for(const t of e)try{if(iN(t))return}catch{}hr(n,"unauthorized-domain")}function iN(n){const e=bp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!rN.test(t))return!1;if(nN.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const aN=new vc(3e4,6e4);function Qv(){const n=Jr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function oN(n){return new Promise((e,t)=>{function r(){Qv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qv(),t(Pr(n,"network-request-failed"))},timeout:aN.get()})}if(Jr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else{if(!Jr().gapi?.load){const i=`__iframefcb${Math.floor(1e6*Math.random())}`;return Jr()[i]=()=>{gapi.load?r():t(Pr(n,"network-request-failed"))},_w(`${Lh.gapiScript}?onload=${i}`).catch(o=>t(o))}r()}}).catch(e=>{throw Wu=null,e})}let Wu=null;const lN=new vc(5e3,15e3),cN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hN(n){const e=n.config;Me(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?dm(e,"emulator/auth/iframe"):`https://${n.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:n.name,v:zo},i=uN.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${yc(r).slice(1)}`}async function dN(n){const e=await(function(r){return Wu=Wu||oN(r),Wu})(n),t=Jr().gapi;return Me(t,n,"internal-error"),e.open({where:document.body,url:hN(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cN,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=Pr(n,"network-request-failed"),u=Jr().setTimeout(()=>{o(l)},lN.get());function h(){Jr().clearTimeout(u),i(r)}r.ping(h).then(h,()=>{o(l)})}))}const fN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Yv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pN(n,e,t,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h={...fN,width:r.toString(),height:i.toString(),top:o,left:l},m=Sn().toLowerCase();t&&(u=Sw(m)?"_blank":t),bw(m)&&(e=e||"http://localhost",h.scrollbars="yes");const g=Object.entries(h).reduce((b,[S,T])=>`${b}${S}=${T},`,"");if((function(b=Sn()){return pm(b)&&!!window.navigator?.standalone})(m)&&u!=="_self")return(function(b,S){const T=document.createElement("a");T.href=b,T.target=S;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),T.dispatchEvent(_)})(e||"",u),new Yv(null);const v=window.open(e||"",u,g);Me(v,n,"popup-blocked");try{v.focus()}catch{}return new Yv(v)}const mN="__/auth/handler",gN="emulator/auth/handler",yN=encodeURIComponent("fac");async function Xv(n,e,t,r,i,o){Me(n.config.authDomain,n,"auth-domain-config-required"),Me(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:zo,eventId:i};if(e instanceof ym){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",(function(g){for(const v in g)if(Object.prototype.hasOwnProperty.call(g,v))return!1;return!0})(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof xc){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await n._getAppCheckToken(),m=h?`#${yN}=${encodeURIComponent(h)}`:"";return`${(function({config:g}){return g.emulator?dm(g,gN):`https://${g.authDomain}/${mN}`})(n)}?${yc(u).slice(1)}${m}`}const Of="webStorageSupport",vN=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Uw,this._completeRedirectFn=eN,this._overrideRedirectResult=ZC}async _openPopup(n,e,t,r){return _s(this.eventManagers[n._key()]?.manager,"_initialize() not called before _openPopup()"),pN(n,await Xv(n,e,t,bp(),r),vm())}async _openRedirect(n,e,t,r){return await this._originValidation(n),(function(i){Jr().location.href=i})(await Xv(n,e,t,bp(),r)),new Promise(()=>{})}_initialize(n){const e=n._key();if(this.eventManagers[e]){const{manager:r,promise:i}=this.eventManagers[e];return r?Promise.resolve(r):(_s(i,"If manager is not set, promise should be"),i)}const t=this.initAndGetManager(n);return this.eventManagers[e]={promise:t},t.catch(()=>{delete this.eventManagers[e]}),t}async initAndGetManager(n){const e=await dN(n),t=new tN(n);return e.register("authEvent",r=>(Me(r?.authEvent,n,"invalid-auth-event"),{status:t.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[n._key()]={manager:t},this.iframes[n._key()]=e,t}_isIframeWebStorageSupported(n,e){this.iframes[n._key()].send(Of,{type:Of},t=>{const r=t?.[0]?.[Of];r!==void 0&&e(!!r),hr(n,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(n){const e=n._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=sN(n)),this.originValidationPromises[e]}get _shouldInitProactively(){return Nw()||ww()||pm()}};var Jv="@firebase/auth",Zv="1.11.1";class xN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const bN=sw("authIdTokenMaxAge")||300;let ex=null;var _u;Lh={loadJS:n=>new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Pr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",(document.getElementsByTagName("head")?.[0]??document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},_u="Browser",is(new Rr("auth",(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),r=n.getProvider("heartbeat"),i=n.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=t.options;Me(o&&!o.includes(":"),"invalid-api-key",{appName:t.name});const u={apiKey:o,authDomain:l,clientPlatform:_u,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Iw(_u)},h=new PC(t,r,i,u);return(function(m,g){const v=g?.persistence||[],b=(Array.isArray(v)?v:[v]).map(Es);g?.errorMap&&m._updateErrorMap(g.errorMap),m._initializeWithPersistence(b,g?.popupRedirectResolver)})(h,e),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider("auth-internal").initialize()})),is(new Rr("auth-internal",n=>(e=>new xN(e))(As(n.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),cr(Jv,Zv,(function(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}})(_u)),cr(Jv,Zv,"esm2020");cr("firebase","12.5.0","app");const tx="@firebase/installations",Ep="0.6.19",Hw=1e4,Ww=`w:${Ep}`,Gw="FIS_v2",wN=36e5,ya=new Ea("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Kw(n){return n instanceof Lr&&n.code.includes("request-failed")}function Qw({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function Yw(n){return{token:n.token,requestStatus:2,expiresIn:(e=n.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function Xw(n,e){const t=(await e.json()).error;return ya.create("request-failed",{requestName:n,serverCode:t.code,serverMessage:t.message,serverStatus:t.status})}function Jw({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function SN(n,{refreshToken:e}){const t=Jw(n);return t.append("Authorization",(function(r){return`${Gw} ${r}`})(e)),t}async function Zw(n){const e=await n();return e.status>=500&&e.status<600?n():e}function eS(n){return new Promise(e=>{setTimeout(e,n)})}const EN=/^[cdef][\w-]{21}$/;function TN(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const e=(function(t){const r=(i=t,btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_"));var i;return r.substr(0,22)})(n);return EN.test(e)?e:""}catch{return""}}function Vh(n){return`${n.appName}!${n.appId}`}const tS=new Map;function nS(n,e){const t=Vh(n);nx(t,e),(function(r,i){const o=(function(){return!ra&&"BroadcastChannel"in self&&(ra=new BroadcastChannel("[Firebase] FID Change"),ra.onmessage=l=>{nx(l.data.key,l.data.fid)}),ra})();o&&o.postMessage({key:r,fid:i}),tS.size===0&&ra&&(ra.close(),ra=null)})(t,e)}function nx(n,e){const t=tS.get(n);if(t)for(const r of t)r(e)}let ra=null;const va="firebase-installations-store";let Vf=null;function bm(){return Vf||(Vf=uw("firebase-installations-database",1,{upgrade:(n,e)=>{e===0&&n.createObjectStore(va)}})),Vf}async function dh(n,e){const t=Vh(n),r=(await bm()).transaction(va,"readwrite"),i=r.objectStore(va),o=await i.get(t);return await i.put(e,t),await r.done,o&&o.fid===e.fid||nS(n,e.fid),e}async function rS(n){const e=Vh(n),t=(await bm()).transaction(va,"readwrite");await t.objectStore(va).delete(e),await t.done}async function Fh(n,e){const t=Vh(n),r=(await bm()).transaction(va,"readwrite"),i=r.objectStore(va),o=await i.get(t),l=e(o);return l===void 0?await i.delete(t):await i.put(l,t),await r.done,!l||o&&o.fid===l.fid||nS(n,l.fid),l}async function wm(n){let e;const t=await Fh(n.appConfig,r=>{const i=(function(l){const u=l||{fid:TN(),registrationStatus:0};return sS(u)})(r),o=(function(l,u){if(u.registrationStatus===0){if(!navigator.onLine)return{installationEntry:u,registrationPromise:Promise.reject(ya.create("app-offline"))};const h={fid:u.fid,registrationStatus:1,registrationTime:Date.now()},m=(async function(g,v){try{const b=await(async function({appConfig:S,heartbeatServiceProvider:T},{fid:_}){const D=Qw(S),O=Jw(S),z=T.getImmediate({optional:!0});if(z){const A=await z.getHeartbeatsHeader();A&&O.append("x-firebase-client",A)}const P={fid:_,authVersion:Gw,appId:S.appId,sdkVersion:Ww},N={method:"POST",headers:O,body:JSON.stringify(P)},I=await Zw(()=>fetch(D,N));if(I.ok){const A=await I.json();return{fid:A.fid||_,registrationStatus:2,refreshToken:A.refreshToken,authToken:Yw(A.authToken)}}throw await Xw("Create Installation",I)})(g,v);return dh(g.appConfig,b)}catch(b){throw Kw(b)&&b.customData.serverCode===409?await rS(g.appConfig):await dh(g.appConfig,{fid:v.fid,registrationStatus:0}),b}})(l,h);return{installationEntry:h,registrationPromise:m}}return u.registrationStatus===1?{installationEntry:u,registrationPromise:kN(l)}:{installationEntry:u}})(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===""?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}async function kN(n){let e=await rx(n.appConfig);for(;e.registrationStatus===1;)await eS(100),e=await rx(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await wm(n);return r||t}return e}function rx(n){return Fh(n,e=>{if(!e)throw ya.create("installation-not-found");return sS(e)})}function sS(n){return(e=n).registrationStatus===1&&e.registrationTime+Hw<Date.now()?{fid:n.fid,registrationStatus:0}:n;var e}async function CN({appConfig:n,heartbeatServiceProvider:e},t){const r=(function(m,{fid:g}){return`${Qw(m)}/${g}/authTokens:generate`})(n,t),i=SN(n,t),o=e.getImmediate({optional:!0});if(o){const m=await o.getHeartbeatsHeader();m&&i.append("x-firebase-client",m)}const l={installation:{sdkVersion:Ww,appId:n.appId}},u={method:"POST",headers:i,body:JSON.stringify(l)},h=await Zw(()=>fetch(r,u));if(h.ok)return Yw(await h.json());throw await Xw("Generate Auth Token",h)}async function Sm(n,e=!1){let t;const r=await Fh(n.appConfig,i=>{if(!iS(i))throw ya.create("not-registered");const o=i.authToken;if(!e&&(function(l){return l.requestStatus===2&&!(function(u){const h=Date.now();return h<u.creationTime||u.creationTime+u.expiresIn<h+wN})(l)})(o))return i;if(o.requestStatus===1)return t=(async function(l,u){let h=await sx(l.appConfig);for(;h.authToken.requestStatus===1;)await eS(100),h=await sx(l.appConfig);const m=h.authToken;return m.requestStatus===0?Sm(l,u):m})(n,e),i;{if(!navigator.onLine)throw ya.create("app-offline");const l=(function(u){const h={requestStatus:1,requestTime:Date.now()};return{...u,authToken:h}})(i);return t=(async function(u,h){try{const m=await CN(u,h),g={...h,authToken:m};return await dh(u.appConfig,g),m}catch(m){if(!Kw(m)||m.customData.serverCode!==401&&m.customData.serverCode!==404){const g={...h,authToken:{requestStatus:0}};await dh(u.appConfig,g)}else await rS(u.appConfig);throw m}})(n,l),l}});return t?await t:r.authToken}function sx(n){return Fh(n,e=>{if(!iS(e))throw ya.create("not-registered");return(r=e.authToken).requestStatus===1&&r.requestTime+Hw<Date.now()?{...e,authToken:{requestStatus:0}}:e;var r})}function iS(n){return n!==void 0&&n.registrationStatus===2}async function NN(n,e=!1){const t=n;return await(async function(r){const{registrationPromise:i}=await wm(r);i&&await i})(t),(await Sm(t,e)).token}function Ff(n){return ya.create("missing-app-config-values",{valueName:n})}const aS="installations",IN=n=>{const e=n.getProvider("app").getImmediate(),t=(function(r){if(!r||!r.options)throw Ff("App Configuration");if(!r.name)throw Ff("App Name");const i=["projectId","apiKey","appId"];for(const o of i)if(!r.options[o])throw Ff(o);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}})(e);return{app:e,appConfig:t,heartbeatServiceProvider:pa(e,"heartbeat"),_delete:()=>Promise.resolve()}},_N=n=>{const e=pa(n.getProvider("app").getImmediate(),aS).getImmediate();return{getId:()=>(async function(t){const r=t,{installationEntry:i,registrationPromise:o}=await wm(r);return o?o.catch(console.error):Sm(r).catch(console.error),i.fid})(e),getToken:t=>NN(e,t)}};is(new Rr(aS,IN,"PUBLIC")),is(new Rr("installations-internal",_N,"PRIVATE")),cr(tx,Ep),cr(tx,Ep,"esm2020");const fh="analytics",Em="https://www.googletagmanager.com/gtag/js",Nn=new Mh("@firebase/analytics"),Gn=new Ea("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function AN(n){if(!n.startsWith(Em)){const e=Gn.create("invalid-gtag-resource",{gtagURL:n});return Nn.warn(e.message),""}return n}function ix(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function PN(n,e){const t=(function(o,l){let u;return window.trustedTypes&&(u=window.trustedTypes.createPolicy(o,l)),u})("firebase-js-sdk-policy",{createScriptURL:AN}),r=document.createElement("script"),i=`${Em}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function jN(n,e,t,r){return async function(i,...o){try{if(i==="event"){const[l,u]=o;await(async function(h,m,g,v,b){try{let S=[];if(b&&b.send_to){let T=b.send_to;Array.isArray(T)||(T=[T]);const _=await ix(g);for(const D of T){const O=_.find(P=>P.measurementId===D),z=O&&m[O.appId];if(!z){S=[];break}S.push(z)}}S.length===0&&(S=Object.values(m)),await Promise.all(S),h("event",v,b||{})}catch(S){Nn.error(S)}})(n,e,t,l,u)}else if(i==="config"){const[l,u]=o;await(async function(h,m,g,v,b,S){const T=v[b];try{if(T)await m[T];else{const _=(await ix(g)).find(D=>D.measurementId===b);_&&await m[_.appId]}}catch(_){Nn.error(_)}h("config",b,S)})(n,e,t,r,l,u)}else if(i==="consent"){const[l,u]=o;n("consent",l,u)}else if(i==="get"){const[l,u,h]=o;n("get",l,u,h)}else if(i==="set"){const[l]=o;n("set",l)}else n(i,...o)}catch(l){Nn.error(l)}}}const oS=new class{constructor(n={},e=1e3){this.throttleMetadata=n,this.intervalMillis=e}getThrottleMetadata(n){return this.throttleMetadata[n]}setThrottleMetadata(n,e){this.throttleMetadata[n]=e}deleteThrottleMetadata(n){delete this.throttleMetadata[n]}};function RN(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function DN(n,e=oS,t){const{appId:r,apiKey:i,measurementId:o}=n.options;if(!r)throw Gn.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Gn.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new MN;return setTimeout(async()=>{u.abort()},6e4),lS({appId:r,apiKey:i,measurementId:o},l,u,e)}async function lS(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=oS){const{appId:o,measurementId:l}=n;try{await(function(u,h){return new Promise((m,g)=>{const v=Math.max(h-Date.now(),0),b=setTimeout(m,v);u.addEventListener(()=>{clearTimeout(b),g(Gn.create("fetch-throttle",{throttleEndTimeMillis:h}))})})})(r,e)}catch(u){if(l)return Nn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:o,measurementId:l};throw u}try{const u=await(async function(h){const{appId:m,apiKey:g}=h,v={method:"GET",headers:RN(g)},b="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",m),S=await fetch(b,v);if(S.status!==200&&S.status!==304){let T="";try{const _=await S.json();_.error?.message&&(T=_.error.message)}catch{}throw Gn.create("config-fetch-failed",{httpStatus:S.status,responseMessage:T})}return S.json()})(n);return i.deleteThrottleMetadata(o),u}catch(u){const h=u;if(!(function(v){if(!(v instanceof Lr&&v.customData))return!1;const b=Number(v.customData.httpStatus);return b===429||b===500||b===503||b===504})(h)){if(i.deleteThrottleMetadata(o),l)return Nn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:o,measurementId:l};throw u}const m=Number(h?.customData?.httpStatus)===503?Sv(t,i.intervalMillis,30):Sv(t,i.intervalMillis),g={throttleEndTimeMillis:Date.now()+m,backoffCount:t+1};return i.setThrottleMetadata(o,g),Nn.debug(`Calling attemptFetch again in ${m} millis`),lS(n,g,r,i)}}class MN{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function LN(n,e,t,r,i,o,l){const u=DN(n);u.then(b=>{t[b.measurementId]=b.appId,n.options.measurementId&&b.measurementId!==n.options.measurementId&&Nn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${b.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(b=>Nn.error(b)),e.push(u);const h=(async function(){if(!om())return Nn.warn(Gn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await lm()}catch(b){return Nn.warn(Gn.create("indexeddb-unavailable",{errorInfo:b?.toString()}).message),!1}return!0})().then(b=>b?r.getId():void 0),[m,g]=await Promise.all([u,h]);(function(b){const S=window.document.getElementsByTagName("script");for(const T of Object.values(S))if(T.src&&T.src.includes(Em)&&T.src.includes(b))return T;return null})(o)||PN(o,m.measurementId),i("js",new Date);const v=l?.config??{};return v.origin="firebase",v.update=!0,g!=null&&(v.firebase_id=g),i("config",m.measurementId,v),m.measurementId}class ON{constructor(e){this.app=e}_delete(){return delete No[this.app.options.appId],Promise.resolve()}}let No={},ax=[];const ox={};let lx,Tm,Uf="dataLayer",cx=!1;function VN(n,e,t){(function(){const i=[];if(am()&&i.push("This is a browser extension environment."),ow()||i.push("Cookies are not available."),i.length>0){const o=i.map((u,h)=>`(${h+1}) ${u}`).join(" "),l=Gn.create("invalid-analytics-context",{errorInfo:o});Nn.warn(l.message)}})();const r=n.options.appId;if(!r)throw Gn.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Gn.create("no-api-key");Nn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(No[r]!=null)throw Gn.create("already-exists",{id:r});if(!cx){(function(l){let u=[];Array.isArray(window[l])?u=window[l]:window[l]=u})(Uf);const{wrappedGtag:i,gtagCore:o}=(function(l,u,h,m,g){let v=function(...b){window[m].push(arguments)};return window[g]&&typeof window[g]=="function"&&(v=window[g]),window[g]=jN(v,l,u,h),{gtagCore:v,wrappedGtag:window[g]}})(No,ax,ox,Uf,"gtag");Tm=i,lx=o,cx=!0}return No[r]=LN(n,ax,ox,e,lx,Uf,t),new ON(n)}function FN(n=cm()){const e=pa(n=Ot(n),fh);return e.isInitialized()?e.getImmediate():(function(t,r={}){const i=pa(t,fh);if(i.isInitialized()){const l=i.getImmediate();if(Ci(r,i.getOptions()))return l;throw Gn.create("already-initialized")}return i.initialize({options:r})})(n)}function UN(n,e,t){n=Ot(n),(async function(r,i,o,l){if(l&&l.global){const u={};for(const h of Object.keys(o))u[`user_properties.${h}`]=o[h];return r("set",u),Promise.resolve()}r("config",await i,{update:!0,user_properties:o})})(Tm,No[n.app.options.appId],e,t).catch(r=>Nn.error(r))}const ux="@firebase/analytics",hx="0.10.19";is(new Rr(fh,(n,{options:e})=>VN(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),e),"PUBLIC")),is(new Rr("analytics-internal",function(n){try{const e=n.getProvider(fh).getImmediate();return{logEvent:(t,r,i)=>(function(o,l,u,h){o=Ot(o),(async function(m,g,v,b,S){if(S&&S.global)m("event",v,b);else{const T=await g;m("event",v,{...b,send_to:T})}})(Tm,No[o.app.options.appId],l,u,h).catch(m=>Nn.error(m))})(e,t,r,i),setUserProperties:(t,r)=>UN(e,t,r)}}catch(e){throw Gn.create("interop-component-reg-failed",{reason:e})}},"PRIVATE")),cr(ux,hx),cr(ux,hx,"esm2020");var wi,cS,dx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var n;function e(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function t(P,N,I){I||(I=0);const A=Array(16);if(typeof N=="string")for(var R=0;R<16;++R)A[R]=N.charCodeAt(I++)|N.charCodeAt(I++)<<8|N.charCodeAt(I++)<<16|N.charCodeAt(I++)<<24;else for(R=0;R<16;++R)A[R]=N[I++]|N[I++]<<8|N[I++]<<16|N[I++]<<24;N=P.g[0],I=P.g[1],R=P.g[2];let C,V=P.g[3];C=N+(V^I&(R^V))+A[0]+3614090360&4294967295,C=V+(R^(N=I+(C<<7&4294967295|C>>>25))&(I^R))+A[1]+3905402710&4294967295,V=N+(C<<12&4294967295|C>>>20),C=R+(I^V&(N^I))+A[2]+606105819&4294967295,C=I+(N^(R=V+(C<<17&4294967295|C>>>15))&(V^N))+A[3]+3250441966&4294967295,C=N+(V^(I=R+(C<<22&4294967295|C>>>10))&(R^V))+A[4]+4118548399&4294967295,C=V+(R^(N=I+(C<<7&4294967295|C>>>25))&(I^R))+A[5]+1200080426&4294967295,V=N+(C<<12&4294967295|C>>>20),C=R+(I^V&(N^I))+A[6]+2821735955&4294967295,C=I+(N^(R=V+(C<<17&4294967295|C>>>15))&(V^N))+A[7]+4249261313&4294967295,C=N+(V^(I=R+(C<<22&4294967295|C>>>10))&(R^V))+A[8]+1770035416&4294967295,C=V+(R^(N=I+(C<<7&4294967295|C>>>25))&(I^R))+A[9]+2336552879&4294967295,V=N+(C<<12&4294967295|C>>>20),C=R+(I^V&(N^I))+A[10]+4294925233&4294967295,C=I+(N^(R=V+(C<<17&4294967295|C>>>15))&(V^N))+A[11]+2304563134&4294967295,C=N+(V^(I=R+(C<<22&4294967295|C>>>10))&(R^V))+A[12]+1804603682&4294967295,C=V+(R^(N=I+(C<<7&4294967295|C>>>25))&(I^R))+A[13]+4254626195&4294967295,V=N+(C<<12&4294967295|C>>>20),C=R+(I^V&(N^I))+A[14]+2792965006&4294967295,C=I+(N^(R=V+(C<<17&4294967295|C>>>15))&(V^N))+A[15]+1236535329&4294967295,C=N+(R^V&((I=R+(C<<22&4294967295|C>>>10))^R))+A[1]+4129170786&4294967295,C=V+(I^R&((N=I+(C<<5&4294967295|C>>>27))^I))+A[6]+3225465664&4294967295,V=N+(C<<9&4294967295|C>>>23),C=R+(N^I&(V^N))+A[11]+643717713&4294967295,C=I+(V^N&((R=V+(C<<14&4294967295|C>>>18))^V))+A[0]+3921069994&4294967295,C=N+(R^V&((I=R+(C<<20&4294967295|C>>>12))^R))+A[5]+3593408605&4294967295,C=V+(I^R&((N=I+(C<<5&4294967295|C>>>27))^I))+A[10]+38016083&4294967295,V=N+(C<<9&4294967295|C>>>23),C=R+(N^I&(V^N))+A[15]+3634488961&4294967295,C=I+(V^N&((R=V+(C<<14&4294967295|C>>>18))^V))+A[4]+3889429448&4294967295,C=N+(R^V&((I=R+(C<<20&4294967295|C>>>12))^R))+A[9]+568446438&4294967295,C=V+(I^R&((N=I+(C<<5&4294967295|C>>>27))^I))+A[14]+3275163606&4294967295,V=N+(C<<9&4294967295|C>>>23),C=R+(N^I&(V^N))+A[3]+4107603335&4294967295,C=I+(V^N&((R=V+(C<<14&4294967295|C>>>18))^V))+A[8]+1163531501&4294967295,C=N+(R^V&((I=R+(C<<20&4294967295|C>>>12))^R))+A[13]+2850285829&4294967295,C=V+(I^R&((N=I+(C<<5&4294967295|C>>>27))^I))+A[2]+4243563512&4294967295,V=N+(C<<9&4294967295|C>>>23),C=R+(N^I&(V^N))+A[7]+1735328473&4294967295,C=I+(V^N&((R=V+(C<<14&4294967295|C>>>18))^V))+A[12]+2368359562&4294967295,C=N+((I=R+(C<<20&4294967295|C>>>12))^R^V)+A[5]+4294588738&4294967295,C=V+((N=I+(C<<4&4294967295|C>>>28))^I^R)+A[8]+2272392833&4294967295,V=N+(C<<11&4294967295|C>>>21),C=R+(V^N^I)+A[11]+1839030562&4294967295,C=I+((R=V+(C<<16&4294967295|C>>>16))^V^N)+A[14]+4259657740&4294967295,C=N+((I=R+(C<<23&4294967295|C>>>9))^R^V)+A[1]+2763975236&4294967295,C=V+((N=I+(C<<4&4294967295|C>>>28))^I^R)+A[4]+1272893353&4294967295,V=N+(C<<11&4294967295|C>>>21),C=R+(V^N^I)+A[7]+4139469664&4294967295,C=I+((R=V+(C<<16&4294967295|C>>>16))^V^N)+A[10]+3200236656&4294967295,C=N+((I=R+(C<<23&4294967295|C>>>9))^R^V)+A[13]+681279174&4294967295,C=V+((N=I+(C<<4&4294967295|C>>>28))^I^R)+A[0]+3936430074&4294967295,V=N+(C<<11&4294967295|C>>>21),C=R+(V^N^I)+A[3]+3572445317&4294967295,C=I+((R=V+(C<<16&4294967295|C>>>16))^V^N)+A[6]+76029189&4294967295,C=N+((I=R+(C<<23&4294967295|C>>>9))^R^V)+A[9]+3654602809&4294967295,C=V+((N=I+(C<<4&4294967295|C>>>28))^I^R)+A[12]+3873151461&4294967295,V=N+(C<<11&4294967295|C>>>21),C=R+(V^N^I)+A[15]+530742520&4294967295,C=I+((R=V+(C<<16&4294967295|C>>>16))^V^N)+A[2]+3299628645&4294967295,C=N+(R^((I=R+(C<<23&4294967295|C>>>9))|~V))+A[0]+4096336452&4294967295,C=V+(I^((N=I+(C<<6&4294967295|C>>>26))|~R))+A[7]+1126891415&4294967295,V=N+(C<<10&4294967295|C>>>22),C=R+(N^(V|~I))+A[14]+2878612391&4294967295,C=I+(V^((R=V+(C<<15&4294967295|C>>>17))|~N))+A[5]+4237533241&4294967295,C=N+(R^((I=R+(C<<21&4294967295|C>>>11))|~V))+A[12]+1700485571&4294967295,C=V+(I^((N=I+(C<<6&4294967295|C>>>26))|~R))+A[3]+2399980690&4294967295,V=N+(C<<10&4294967295|C>>>22),C=R+(N^(V|~I))+A[10]+4293915773&4294967295,C=I+(V^((R=V+(C<<15&4294967295|C>>>17))|~N))+A[1]+2240044497&4294967295,C=N+(R^((I=R+(C<<21&4294967295|C>>>11))|~V))+A[8]+1873313359&4294967295,C=V+(I^((N=I+(C<<6&4294967295|C>>>26))|~R))+A[15]+4264355552&4294967295,V=N+(C<<10&4294967295|C>>>22),C=R+(N^(V|~I))+A[6]+2734768916&4294967295,C=I+(V^((R=V+(C<<15&4294967295|C>>>17))|~N))+A[13]+1309151649&4294967295,C=N+(R^((I=R+(C<<21&4294967295|C>>>11))|~V))+A[4]+4149444226&4294967295,C=V+(I^((N=I+(C<<6&4294967295|C>>>26))|~R))+A[11]+3174756917&4294967295,V=N+(C<<10&4294967295|C>>>22),C=R+(N^(V|~I))+A[2]+718787259&4294967295,C=I+(V^((R=V+(C<<15&4294967295|C>>>17))|~N))+A[9]+3951481745&4294967295,P.g[0]=P.g[0]+N&4294967295,P.g[1]=P.g[1]+(R+(C<<21&4294967295|C>>>11))&4294967295,P.g[2]=P.g[2]+R&4294967295,P.g[3]=P.g[3]+V&4294967295}function r(P,N){this.h=N;const I=[];let A=!0;for(let R=P.length-1;R>=0;R--){const C=0|P[R];A&&C==N||(I[R]=C,A=!1)}this.g=I}(function(P,N){function I(){}I.prototype=N.prototype,P.F=N.prototype,P.prototype=new I,P.prototype.constructor=P,P.D=function(A,R,C){for(var V=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)V[fe-2]=arguments[fe];return N.prototype[R].apply(A,V)}})(e,function(){this.blockSize=-1}),e.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},e.prototype.v=function(P,N){N===void 0&&(N=P.length);const I=N-this.blockSize,A=this.C;let R=this.h,C=0;for(;C<N;){if(R==0)for(;C<=I;)t(this,P,C),C+=this.blockSize;if(typeof P=="string"){for(;C<N;)if(A[R++]=P.charCodeAt(C++),R==this.blockSize){t(this,A),R=0;break}}else for(;C<N;)if(A[R++]=P[C++],R==this.blockSize){t(this,A),R=0;break}}this.h=R,this.o+=N},e.prototype.A=function(){var P=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var N=1;N<P.length-8;++N)P[N]=0;N=8*this.o;for(var I=P.length-8;I<P.length;++I)P[I]=255&N,N/=256;for(this.v(P),P=Array(16),N=0,I=0;I<4;++I)for(let A=0;A<32;A+=8)P[N++]=this.g[I]>>>A&255;return P};var i={};function o(P){return-128<=P&&P<128?(function(N,I){var A=i;return Object.prototype.hasOwnProperty.call(A,N)?A[N]:A[N]=I(N)})(P,function(N){return new r([0|N],N<0?-1:0)}):new r([0|P],P<0?-1:0)}function l(P){if(isNaN(P)||!isFinite(P))return u;if(P<0)return b(l(-P));const N=[];let I=1;for(let A=0;P>=I;A++)N[A]=P/I|0,I*=4294967296;return new r(N,0)}var u=o(0),h=o(1),m=o(16777216);function g(P){if(P.h!=0)return!1;for(let N=0;N<P.g.length;N++)if(P.g[N]!=0)return!1;return!0}function v(P){return P.h==-1}function b(P){const N=P.g.length,I=[];for(let A=0;A<N;A++)I[A]=~P.g[A];return new r(I,~P.h).add(h)}function S(P,N){return P.add(b(N))}function T(P,N){for(;(65535&P[N])!=P[N];)P[N+1]+=P[N]>>>16,P[N]&=65535,N++}function _(P,N){this.g=P,this.h=N}function D(P,N){if(g(N))throw Error("division by zero");if(g(P))return new _(u,u);if(v(P))return N=D(b(P),N),new _(b(N.g),b(N.h));if(v(N))return N=D(P,b(N)),new _(b(N.g),N.h);if(P.g.length>30){if(v(P)||v(N))throw Error("slowDivide_ only works with positive integers.");for(var I=h,A=N;A.l(P)<=0;)I=O(I),A=O(A);var R=z(I,1),C=z(A,1);for(A=z(A,2),I=z(I,2);!g(A);){var V=C.add(A);V.l(P)<=0&&(R=R.add(I),C=V),A=z(A,1),I=z(I,1)}return N=S(P,R.j(N)),new _(R,N)}for(R=u;P.l(N)>=0;){for(I=Math.max(1,Math.floor(P.m()/N.m())),A=(A=Math.ceil(Math.log(I)/Math.LN2))<=48?1:Math.pow(2,A-48),V=(C=l(I)).j(N);v(V)||V.l(P)>0;)V=(C=l(I-=A)).j(N);g(C)&&(C=h),R=R.add(C),P=S(P,V)}return new _(R,P)}function O(P){const N=P.g.length+1,I=[];for(let A=0;A<N;A++)I[A]=P.i(A)<<1|P.i(A-1)>>>31;return new r(I,P.h)}function z(P,N){const I=N>>5;N%=32;const A=P.g.length-I,R=[];for(let C=0;C<A;C++)R[C]=N>0?P.i(C+I)>>>N|P.i(C+I+1)<<32-N:P.i(C+I);return new r(R,P.h)}(n=r.prototype).m=function(){if(v(this))return-b(this).m();let P=0,N=1;for(let I=0;I<this.g.length;I++){const A=this.i(I);P+=(A>=0?A:4294967296+A)*N,N*=4294967296}return P},n.toString=function(P){if((P=P||10)<2||36<P)throw Error("radix out of range: "+P);if(g(this))return"0";if(v(this))return"-"+b(this).toString(P);const N=l(Math.pow(P,6));var I=this;let A="";for(;;){const R=D(I,N).g;let C=(((I=S(I,R.j(N))).g.length>0?I.g[0]:I.h)>>>0).toString(P);if(g(I=R))return C+A;for(;C.length<6;)C="0"+C;A=C+A}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h},n.l=function(P){return v(P=S(this,P))?-1:g(P)?0:1},n.abs=function(){return v(this)?b(this):this},n.add=function(P){const N=Math.max(this.g.length,P.g.length),I=[];let A=0;for(let R=0;R<=N;R++){let C=A+(65535&this.i(R))+(65535&P.i(R)),V=(C>>>16)+(this.i(R)>>>16)+(P.i(R)>>>16);A=V>>>16,C&=65535,V&=65535,I[R]=V<<16|C}return new r(I,-2147483648&I[I.length-1]?-1:0)},n.j=function(P){if(g(this)||g(P))return u;if(v(this))return v(P)?b(this).j(b(P)):b(b(this).j(P));if(v(P))return b(this.j(b(P)));if(this.l(m)<0&&P.l(m)<0)return l(this.m()*P.m());const N=this.g.length+P.g.length,I=[];for(var A=0;A<2*N;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(let R=0;R<P.g.length;R++){const C=this.i(A)>>>16,V=65535&this.i(A),fe=P.i(R)>>>16,Te=65535&P.i(R);I[2*A+2*R]+=V*Te,T(I,2*A+2*R),I[2*A+2*R+1]+=C*Te,T(I,2*A+2*R+1),I[2*A+2*R+1]+=V*fe,T(I,2*A+2*R+1),I[2*A+2*R+2]+=C*fe,T(I,2*A+2*R+2)}for(P=0;P<N;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=N;P<2*N;P++)I[P]=0;return new r(I,0)},n.B=function(P){return D(this,P).h},n.and=function(P){const N=Math.max(this.g.length,P.g.length),I=[];for(let A=0;A<N;A++)I[A]=this.i(A)&P.i(A);return new r(I,this.h&P.h)},n.or=function(P){const N=Math.max(this.g.length,P.g.length),I=[];for(let A=0;A<N;A++)I[A]=this.i(A)|P.i(A);return new r(I,this.h|P.h)},n.xor=function(P){const N=Math.max(this.g.length,P.g.length),I=[];for(let A=0;A<N;A++)I[A]=this.i(A)^P.i(A);return new r(I,this.h^P.h)},e.prototype.digest=e.prototype.A,e.prototype.reset=e.prototype.u,e.prototype.update=e.prototype.v,cS=e,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=l,r.fromString=function P(N,I){if(N.length==0)throw Error("number format error: empty string");if((I=I||10)<2||36<I)throw Error("radix out of range: "+I);if(N.charAt(0)=="-")return b(P(N.substring(1),I));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=l(Math.pow(I,8));let R=u;for(let V=0;V<N.length;V+=8){var C=Math.min(8,N.length-V);const fe=parseInt(N.substring(V,V+C),I);C<8?(C=l(Math.pow(I,C)),R=R.j(C).add(l(fe))):(R=R.j(A),R=R.add(l(fe)))}return R},wi=r}).apply(dx!==void 0?dx:typeof self<"u"?self:typeof window<"u"?window:{});var uS,Fl,hS,Gu,Tp,dS,fS,pS,Au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var n,e=Object.defineProperty,t=(function(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Au=="object"&&Au];for(var w=0;w<d.length;++w){var E=d[w];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")})(this);function r(d,w){if(w)e:{var E=t;d=d.split(".");for(var L=0;L<d.length-1;L++){var Q=d[L];if(!(Q in E))break e;E=E[Q]}(w=w(L=E[d=d[d.length-1]]))!=L&&w!=null&&e(E,d,{configurable:!0,writable:!0,value:w})}}r("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(d){return d||function(w){var E,L=[];for(E in w)Object.prototype.hasOwnProperty.call(w,E)&&L.push([E,w[E]]);return L}});var i=i||{},o=this||self;function l(d){var w=typeof d;return w=="object"&&d!=null||w=="function"}function u(d,w,E){return d.call.apply(d.bind,arguments)}function h(d,w,E){return(h=u).apply(null,arguments)}function m(d,w){var E=Array.prototype.slice.call(arguments,1);return function(){var L=E.slice();return L.push.apply(L,arguments),d.apply(this,L)}}function g(d,w){function E(){}E.prototype=w.prototype,d.Z=w.prototype,d.prototype=new E,d.prototype.constructor=d,d.Ob=function(L,Q,W){for(var he=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)he[Ne-2]=arguments[Ne];return w.prototype[Q].apply(L,he)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function b(d){const w=d.length;if(w>0){const E=Array(w);for(let L=0;L<w;L++)E[L]=d[L];return E}return[]}function S(d,w){for(let L=1;L<arguments.length;L++){const Q=arguments[L];var E=typeof Q;if((E=E!="object"?E:Q?Array.isArray(Q)?"array":E:"null")=="array"||E=="object"&&typeof Q.length=="number"){E=d.length||0;const W=Q.length||0;d.length=E+W;for(let he=0;he<W;he++)d[E+he]=Q[he]}else d.push(Q)}}function T(d){o.setTimeout(()=>{throw d},0)}function _(){var d=N;let w=null;return d.g&&(w=d.g,d.g=d.g.next,d.g||(d.h=null),w.next=null),w}var D=new class{constructor(d,w){this.i=d,this.j=w,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}(()=>new O,d=>d.reset());class O{constructor(){this.next=this.g=this.h=null}set(w,E){this.h=w,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let z,P=!1,N=new class{constructor(){this.h=this.g=null}add(d,w){const E=D.get();E.set(d,w),this.h?this.h.next=E:this.g=E,this.h=E}},I=()=>{const d=Promise.resolve(void 0);z=()=>{d.then(A)}};function A(){for(var d;d=_();){try{d.h.call(d.g)}catch(E){T(E)}var w=D;w.j(d),w.h<100&&(w.h++,d.next=w.g,w.g=d)}P=!1}function R(){this.u=this.u,this.C=this.C}function C(d,w){this.type=d,this.g=this.target=w,this.defaultPrevented=!1}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},C.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,w=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};o.addEventListener("test",E,w),o.removeEventListener("test",E,w)}catch{}return d})();function fe(d){return/^[\s\xa0]*$/.test(d)}function Te(d,w){C.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,w)}g(Te,C),Te.prototype.init=function(d,w){const E=this.type=d.type,L=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=w,(w=d.relatedTarget)||(E=="mouseover"?w=d.fromElement:E=="mouseout"&&(w=d.toElement)),this.relatedTarget=w,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Re="closure_listenable_"+(1e6*Math.random()|0),ke=0;function Ie(d,w,E,L,Q){this.listener=d,this.proxy=null,this.src=w,this.type=E,this.capture=!!L,this.ha=Q,this.key=++ke,this.da=this.fa=!1}function st(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Y(d,w,E){for(const L in d)w.call(E,d[L],L,d)}function q(d){const w={};for(const E in d)w[E]=d[E];return w}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(d,w){let E,L;for(let Q=1;Q<arguments.length;Q++){for(E in L=arguments[Q],L)d[E]=L[E];for(let W=0;W<j.length;W++)E=j[W],Object.prototype.hasOwnProperty.call(L,E)&&(d[E]=L[E])}}function Z(d){this.src=d,this.g={},this.h=0}function ue(d,w){const E=w.type;if(E in d.g){var L,Q=d.g[E],W=Array.prototype.indexOf.call(Q,w,void 0);(L=W>=0)&&Array.prototype.splice.call(Q,W,1),L&&(st(w),d.g[E].length==0&&(delete d.g[E],d.h--))}}function ce(d,w,E,L){for(let Q=0;Q<d.length;++Q){const W=d[Q];if(!W.da&&W.listener==w&&W.capture==!!E&&W.ha==L)return Q}return-1}Z.prototype.add=function(d,w,E,L,Q){const W=d.toString();(d=this.g[W])||(d=this.g[W]=[],this.h++);const he=ce(d,w,L,Q);return he>-1?(w=d[he],E||(w.fa=!1)):((w=new Ie(w,this.src,W,!!L,Q)).fa=E,d.push(w)),w};var pe="closure_lm_"+(1e6*Math.random()|0),be={};function we(d,w,E,L,Q){if(Array.isArray(w)){for(let W=0;W<w.length;W++)we(d,w[W],E,L,Q);return null}return E=me(E),d&&d[Re]?d.J(w,E,!!l(L)&&!!L.capture,Q):(function(W,he,Ne,Be,ve,lt){if(!he)throw Error("Invalid event type");const nt=l(ve)?!!ve.capture:!!ve;let at=Ge(W);if(at||(W[pe]=at=new Z(W)),Ne=at.add(he,Ne,Be,nt,lt),Ne.proxy)return Ne;if(Be=(function(){function mt(Pn){return ft.call(mt.src,mt.listener,Pn)}const ft=ze;return mt})(),Ne.proxy=Be,Be.src=W,Be.listener=Ne,W.addEventListener)V||(ve=nt),ve===void 0&&(ve=!1),W.addEventListener(he.toString(),Be,ve);else if(W.attachEvent)W.attachEvent(ht(he.toString()),Be);else{if(!W.addListener||!W.removeListener)throw Error("addEventListener and attachEvent are unavailable.");W.addListener(Be)}return Ne})(d,w,E,!1,L,Q)}function Ce(d,w,E,L,Q){if(Array.isArray(w))for(var W=0;W<w.length;W++)Ce(d,w[W],E,L,Q);else L=l(L)?!!L.capture:!!L,E=me(E),d&&d[Re]?(d=d.i,(W=String(w).toString())in d.g&&(E=ce(w=d.g[W],E,L,Q))>-1&&(st(w[E]),Array.prototype.splice.call(w,E,1),w.length==0&&(delete d.g[W],d.h--))):d&&(d=Ge(d))&&(w=d.g[w.toString()],d=-1,w&&(d=ce(w,E,L,Q)),(E=d>-1?w[d]:null)&&_e(E))}function _e(d){if(typeof d!="number"&&d&&!d.da){var w=d.src;if(w&&w[Re])ue(w.i,d);else{var E=d.type,L=d.proxy;w.removeEventListener?w.removeEventListener(E,L,d.capture):w.detachEvent?w.detachEvent(ht(E),L):w.addListener&&w.removeListener&&w.removeListener(L),(E=Ge(w))?(ue(E,d),E.h==0&&(E.src=null,w[pe]=null)):st(d)}}}function ht(d){return d in be?be[d]:be[d]="on"+d}function ze(d,w){if(d.da)d=!0;else{w=new Te(w,this);const E=d.listener,L=d.ha||d.src;d.fa&&_e(d),d=E.call(L,w)}return d}function Ge(d){return(d=d[pe])instanceof Z?d:null}var re="__closure_events_fn_"+(1e9*Math.random()>>>0);function me(d){return typeof d=="function"?d:(d[re]||(d[re]=function(w){return d.handleEvent(w)}),d[re])}function ee(){R.call(this),this.i=new Z(this),this.M=this,this.G=null}function le(d,w){var E,L=d.G;if(L)for(E=[];L;L=L.G)E.push(L);if(d=d.M,L=w.type||w,typeof w=="string")w=new C(w,d);else if(w instanceof C)w.target=w.target||d;else{var Q=w;B(w=new C(L,d),Q)}let W,he;if(Q=!0,E)for(he=E.length-1;he>=0;he--)W=w.g=E[he],Q=Ae(W,L,!0,w)&&Q;if(W=w.g=d,Q=Ae(W,L,!0,w)&&Q,Q=Ae(W,L,!1,w)&&Q,E)for(he=0;he<E.length;he++)W=w.g=E[he],Q=Ae(W,L,!1,w)&&Q}function Ae(d,w,E,L){if(!(w=d.i.g[String(w)]))return!0;w=w.concat();let Q=!0;for(let W=0;W<w.length;++W){const he=w[W];if(he&&!he.da&&he.capture==E){const Ne=he.listener,Be=he.ha||he.src;he.fa&&ue(d.i,he),Q=Ne.call(Be,L)!==!1&&Q}}return Q&&!L.defaultPrevented}function Pe(d){d.g=(function(E,L){if(typeof E!="function"){if(!E||typeof E.handleEvent!="function")throw Error("Invalid listener argument");E=h(E.handleEvent,E)}return Number(L)>2147483647?-1:o.setTimeout(E,L||0)})(()=>{d.g=null,d.i&&(d.i=!1,Pe(d))},d.l);const w=d.h;d.h=null,d.m.apply(null,w)}g(ee,R),ee.prototype[Re]=!0,ee.prototype.removeEventListener=function(d,w,E,L){Ce(this,d,w,E,L)},ee.prototype.N=function(){if(ee.Z.N.call(this),this.i){var d=this.i;for(const w in d.g){const E=d.g[w];for(let L=0;L<E.length;L++)st(E[L]);delete d.g[w],d.h--}}this.G=null},ee.prototype.J=function(d,w,E,L){return this.i.add(String(d),w,!1,E,L)},ee.prototype.K=function(d,w,E,L){return this.i.add(String(d),w,!0,E,L)};class Oe extends R{constructor(w,E){super(),this.m=w,this.l=E,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Pe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function We(d){R.call(this),this.h=d,this.g={}}g(We,R);var dt=[];function Xt(d){Y(d.g,function(w,E){this.g.hasOwnProperty(E)&&_e(w)},d),d.g={}}We.prototype.N=function(){We.Z.N.call(this),Xt(this)},We.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ot=o.JSON.stringify,At=o.JSON.parse,Vt=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function kt(){}function bt(){}var Jt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function hn(){C.call(this,"d")}function Gt(){C.call(this,"c")}g(hn,C),g(Gt,C);var yt={},Kt=null;function Vn(){return Kt=Kt||new ee}function Ft(d){C.call(this,yt.Ia,d)}function Or(d){const w=Vn();le(w,new Ft(w))}function Xn(d,w){C.call(this,yt.STAT_EVENT,d),this.stat=w}function Ct(d){const w=Vn();le(w,new Xn(w,d))}function fr(d,w){C.call(this,yt.Ja,d),this.size=w}function Fn(d,w){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},w)}function En(){this.g=!0}function rn(d,w,E,L){d.info(function(){return"XMLHTTP TEXT ("+w+"): "+(function(Q,W){if(!Q.g)return W;if(!W)return null;try{const ve=JSON.parse(W);if(ve){for(Q=0;Q<ve.length;Q++)if(Array.isArray(ve[Q])){var he=ve[Q];if(!(he.length<2)){var Ne=he[1];if(Array.isArray(Ne)&&!(Ne.length<1)){var Be=Ne[0];if(Be!="noop"&&Be!="stop"&&Be!="close")for(let lt=1;lt<Ne.length;lt++)Ne[lt]=""}}}}return ot(ve)}catch{return W}})(d,E)+(L?" "+L:"")})}yt.Ia="serverreachability",g(Ft,C),yt.STAT_EVENT="statevent",g(Xn,C),yt.Ja="timingevent",g(fr,C),En.prototype.ua=function(){this.g=!1},En.prototype.info=function(){};var Ls,cs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ri={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function _a(){}function Os(d){return encodeURIComponent(String(d))}function Qo(d){var w=1;d=d.split(":");const E=[];for(;w>0&&d.length;)E.push(d.shift()),w--;return d.length&&E.push(d.join(":")),E}function pr(d,w,E,L){this.j=d,this.i=w,this.l=E,this.S=L||1,this.V=new We(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Vs}function Vs(){this.i=null,this.g="",this.h=!1}g(_a,kt),_a.prototype.g=function(){return new XMLHttpRequest},Ls=new _a;var Aa={},us={};function Yo(d,w,E){d.M=1,d.A=dn(In(w)),d.u=E,d.R=!0,Fs(d,null)}function Fs(d,w){d.F=Date.now(),Us(d),d.B=In(d.A);var E=d.B,L=d.S;Array.isArray(L)||(L=[String(L)]),il(E.i,"t",L),d.C=0,E=d.j.L,d.h=new Vs,d.g=Ba(d.j,E?w:null,!d.u),d.P>0&&(d.O=new Oe(h(d.Y,d,d.g),d.P)),w=d.V,E=d.g,L=d.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(dt[0]=Q.toString()),Q=dt);for(let W=0;W<Q.length;W++){const he=we(E,Q[W],L||w.handleEvent,!1,w.h||w);if(!he)break;w.g[he.key]=he}w=d.J?q(d.J):{},d.u?(d.v||(d.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,w)):(d.v="GET",d.g.ea(d.B,d.v,null,w)),Or(),(function(W,he,Ne,Be,ve,lt){W.info(function(){if(W.g)if(lt){var nt="",at=lt.split("&");for(let ft=0;ft<at.length;ft++){var mt=at[ft].split("=");if(mt.length>1){const Pn=mt[0];mt=mt[1];const Ys=Pn.split("_");nt=Ys.length>=2&&Ys[1]=="type"?nt+(Pn+"=")+mt+"&":nt+(Pn+"=redacted&")}}}else nt=null;else nt=lt;return"XMLHTTP REQ ("+Be+") [attempt "+ve+"]: "+he+`
`+Ne+`
`+nt})})(d.i,d.v,d.B,d.l,d.S,d.u)}function Di(d){return!!d.g&&d.v=="GET"&&d.M!=2&&d.j.Aa}function Pa(d,w){var E=d.C,L=w.indexOf(`
`,E);return L==-1?us:(E=Number(w.substring(E,L)),isNaN(E)?Aa:(L+=1)+E>w.length?us:(w=w.slice(L,L+E),d.C=L+E,w))}function Us(d){d.T=Date.now()+d.H,Ic(d,d.H)}function Ic(d,w){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Fn(h(d.aa,d),w)}function Xo(d){d.D&&(o.clearTimeout(d.D),d.D=null)}function Un(d){d.j.I==0||d.K||$i(d.j,d)}function Vr(d){Xo(d);var w=d.O;w&&typeof w.dispose=="function"&&w.dispose(),d.O=null,Xt(d.V),d.g&&(w=d.g,d.g=null,w.abort(),w.dispose())}function ja(d,w){try{var E=d.j;if(E.I!=0&&(E.g==d||tl(E.h,d))){if(!d.L&&tl(E.h,d)&&E.I==3){try{var L=E.Ba.g.parse(w)}catch{L=null}if(Array.isArray(L)&&L.length==3){var Q=L;if(Q[0]==0){e:if(!E.v){if(E.g){if(!(E.g.F+3e3<d.F))break e;Bi(E),fs(E)}wr(E),Ct(18)}}else E.xa=Q[1],0<E.xa-E.K&&Q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Fn(h(E.Va,E),6e3));el(E.h)<=1&&E.ta&&(E.ta=void 0)}else $r(E,11)}else if((d.L||E.g==d)&&Bi(E),!fe(w))for(Q=E.Ba.g.parse(w),w=0;w<Q.length;w++){let ve=Q[w];const lt=ve[0];if(!(lt<=E.K))if(E.K=lt,ve=ve[1],E.I==2)if(ve[0]=="c"){E.M=ve[1],E.ba=ve[2];const nt=ve[3];nt!=null&&(E.ka=nt,E.j.info("VER="+E.ka));const at=ve[4];at!=null&&(E.za=at,E.j.info("SVER="+E.za));const mt=ve[5];mt!=null&&typeof mt=="number"&&mt>0&&(L=1.5*mt,E.O=L,E.j.info("backChannelRequestTimeoutMs_="+L)),L=E;const ft=d.g;if(ft){const Pn=ft.g?ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pn){var W=L.h;W.g||Pn.indexOf("spdy")==-1&&Pn.indexOf("quic")==-1&&Pn.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(nl(W,W.h),W.h=null))}if(L.G){const Ys=ft.g?ft.g.getResponseHeader("X-HTTP-Session-Id"):null;Ys&&(L.wa=Ys,Xe(L.J,L.G,Ys))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-d.F,E.j.info("Handshake RTT: "+E.T+"ms"));var he=d;if((L=E).na=za(L,L.L?L.ba:null,L.W),he.L){Nt(L.h,he);var Ne=he,Be=L.O;Be&&(Ne.H=Be),Ne.D&&(Xo(Ne),Us(Ne)),L.g=he}else cl(L);E.i.length>0&&Va(E)}else ve[0]!="stop"&&ve[0]!="close"||$r(E,7);else E.I==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?$r(E,7):zr(E):ve[0]!="noop"&&E.l&&E.l.qa(ve),E.A=0)}}Or()}catch{}}pr.prototype.ba=function(d){d=d.target;const w=this.O;w&&xr(d)==3?w.j():this.Y(d)},pr.prototype.Y=function(d){try{if(d==this.g)e:{const Ne=xr(this.g),Be=this.g.ya();if(this.g.ca(),!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||jc(this.g)))){this.K||Ne!=4||Be==7||Or(),Xo(this);var w=this.g.ca();this.X=w;var E=(function(ve){if(!Di(ve))return ve.g.la();const lt=jc(ve.g);if(lt==="")return"";let nt="";const at=lt.length,mt=xr(ve.g)==4;if(!ve.h.i){if(typeof TextDecoder>"u")return Vr(ve),Un(ve),"";ve.h.i=new o.TextDecoder}for(let ft=0;ft<at;ft++)ve.h.h=!0,nt+=ve.h.i.decode(lt[ft],{stream:!(mt&&ft==at-1)});return lt.length=0,ve.h.g+=nt,ve.C=0,ve.h.g})(this);if(this.o=w==200,(function(ve,lt,nt,at,mt,ft,Pn){ve.info(function(){return"XMLHTTP RESP ("+at+") [ attempt "+mt+"]: "+lt+`
`+nt+`
`+ft+" "+Pn})})(this.i,this.v,this.B,this.l,this.S,Ne,w),this.o){if(this.U&&!this.L){t:{if(this.g){var L,Q=this.g;if((L=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fe(L)){var W=L;break t}}W=null}if(!(d=W)){this.o=!1,this.m=3,Ct(12),Vr(this),Un(this);break e}rn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ja(this,d)}if(this.R){let ve;for(d=!0;!this.K&&this.C<E.length;){if(ve=Pa(this,E),ve==us){Ne==4&&(this.m=4,Ct(14),d=!1),rn(this.i,this.l,null,"[Incomplete Response]");break}if(ve==Aa){this.m=4,Ct(15),rn(this.i,this.l,E,"[Invalid Chunk]"),d=!1;break}rn(this.i,this.l,ve,null),ja(this,ve)}if(Di(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||E.length!=0||this.h.h||(this.m=1,Ct(16),d=!1),this.o=this.o&&d,d){if(E.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Ui(he),he.P=!0,Ct(11))}}else rn(this.i,this.l,E,"[Invalid Chunked Response]"),Vr(this),Un(this)}else rn(this.i,this.l,E,null),ja(this,E);Ne==4&&Vr(this),this.o&&!this.K&&(Ne==4?$i(this.j,this):(this.o=!1,Us(this)))}else(function(ve){const lt={};ve=(ve.g&&xr(ve)>=2&&ve.g.getAllResponseHeaders()||"").split(`\r
`);for(let at=0;at<ve.length;at++){if(fe(ve[at]))continue;var nt=Qo(ve[at]);const mt=nt[0];if(typeof(nt=nt[1])!="string")continue;nt=nt.trim();const ft=lt[mt]||[];lt[mt]=ft,ft.push(nt)}(function(at,mt){for(const ft in at)mt.call(void 0,at[ft],ft,at)})(lt,function(at){return at.join(", ")})})(this.g),w==400&&E.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),Vr(this),Un(this)}}}catch{}},pr.prototype.cancel=function(){this.K=!0,Vr(this)},pr.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?((function(w,E){w.info(function(){return"TIMEOUT: "+E})})(this.i,this.B),this.M!=2&&(Or(),Ct(17)),Vr(this),this.m=2,Un(this)):Ic(this,this.T-d)};var _c=class{constructor(d,w){this.g=d,this.map=w}};function Jo(d){this.l=d||10,o.PerformanceNavigationTiming?d=(d=o.performance.getEntriesByType("navigation")).length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2"):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Zo(d){return!!d.h||!!d.g&&d.g.size>=d.j}function el(d){return d.h?1:d.g?d.g.size:0}function tl(d,w){return d.h?d.h==w:!!d.g&&d.g.has(w)}function nl(d,w){d.g?d.g.add(w):d.h=w}function Nt(d,w){d.h&&d.h==w?d.h=null:d.g&&d.g.has(w)&&d.g.delete(w)}function Ac(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let w=d.i;for(const E of d.g.values())w=w.concat(E.G);return w}return b(d.i)}Jo.prototype.cancel=function(){if(this.i=Ac(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};var Ra=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mr(d){let w;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,d instanceof mr?(this.l=d.l,Mi(this,d.j),this.o=d.o,this.g=d.g,zs(this,d.u),this.h=d.h,Bs(this,al(d.i)),this.m=d.m):d&&(w=String(d).match(Ra))?(this.l=!1,Mi(this,w[1]||"",!0),this.o=Li(w[2]||""),this.g=Li(w[3]||"",!0),zs(this,w[4]),this.h=Li(w[5]||"",!0),Bs(this,w[6]||"",!0),this.m=Li(w[7]||"")):(this.l=!1,this.i=new $s(null,this.l))}function In(d){return new mr(d)}function Mi(d,w,E){d.j=E?Li(w,!0):w,d.j&&(d.j=d.j.replace(/:$/,""))}function zs(d,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);d.u=w}else d.u=null}function Bs(d,w,E){w instanceof $s?(d.i=w,(function(L,Q){Q&&!L.j&&(gr(L),L.i=null,L.g.forEach(function(W,he){const Ne=he.toLowerCase();he!=Ne&&(qs(this,he),il(this,Ne,W))},L)),L.j=Q})(d.i,d.l)):(E||(w=Oi(w,cd)),d.i=new $s(w,d.l))}function Xe(d,w,E){d.i.set(w,E)}function dn(d){return Xe(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Li(d,w){return d?w?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Oi(d,w,E){return typeof d=="string"?(d=encodeURI(d).replace(w,rl),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function rl(d){return"%"+((d=d.charCodeAt(0))>>4&15).toString(16)+(15&d).toString(16)}mr.prototype.toString=function(){const d=[];var w=this.j;w&&d.push(Oi(w,Da,!0),":");var E=this.g;return(E||w=="file")&&(d.push("//"),(w=this.o)&&d.push(Oi(w,Da,!0),"@"),d.push(Os(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),(E=this.u)!=null&&d.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Oi(E,E.charAt(0)=="/"?Ma:Vi,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Oi(E,sl)),d.join("")},mr.prototype.resolve=function(d){const w=In(this);let E=!!d.j;E?Mi(w,d.j):E=!!d.o,E?w.o=d.o:E=!!d.g,E?w.g=d.g:E=d.u!=null;var L=d.h;if(E)zs(w,d.u);else if(E=!!d.h){if(L.charAt(0)!="/")if(this.g&&!this.h)L="/"+L;else{var Q=w.h.lastIndexOf("/");Q!=-1&&(L=w.h.slice(0,Q+1)+L)}if((Q=L)==".."||Q==".")L="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){L=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const W=[];for(let he=0;he<Q.length;){const Ne=Q[he++];Ne=="."?L&&he==Q.length&&W.push(""):Ne==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),L&&he==Q.length&&W.push("")):(W.push(Ne),L=!0)}L=W.join("/")}else L=Q}return E?w.h=L:E=d.i.toString()!=="",E?Bs(w,al(d.i)):E=!!d.m,E&&(w.m=d.m),w};var Da=/[#\/\?@]/g,Vi=/[#\?:]/g,Ma=/[#\?]/g,cd=/[#\?@]/g,sl=/#/g;function $s(d,w){this.h=this.g=null,this.i=d||null,this.j=!!w}function gr(d){d.g||(d.g=new Map,d.h=0,d.i&&(function(w,E){if(w){w=w.split("&");for(let L=0;L<w.length;L++){const Q=w[L].indexOf("=");let W,he=null;Q>=0?(W=w[L].substring(0,Q),he=w[L].substring(Q+1)):W=w[L],E(W,he?decodeURIComponent(he.replace(/\+/g," ")):"")}}})(d.i,function(w,E){d.add(decodeURIComponent(w.replace(/\+/g," ")),E)}))}function qs(d,w){gr(d),w=Fr(d,w),d.g.has(w)&&(d.i=null,d.h-=d.g.get(w).length,d.g.delete(w))}function La(d,w){return gr(d),w=Fr(d,w),d.g.has(w)}function it(d,w){gr(d);let E=[];if(typeof w=="string")La(d,w)&&(E=E.concat(d.g.get(Fr(d,w))));else for(d=Array.from(d.g.values()),w=0;w<d.length;w++)E=E.concat(d[w]);return E}function il(d,w,E){qs(d,w),E.length>0&&(d.i=null,d.g.set(Fr(d,w),b(E)),d.h+=E.length)}function al(d){const w=new $s;return w.i=d.i,d.g&&(w.g=new Map(d.g),w.h=d.h),w}function Fr(d,w){return w=String(w),d.j&&(w=w.toLowerCase()),w}function yr(d,w,E,L,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),L(E)}catch{}}function Pc(){this.g=new Vt}function Oa(d){this.i=d.Sb||null,this.h=d.ab||!1}function Hs(d,w){ee.call(this),this.H=d,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Fi(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}function _n(d){d.readyState=4,d.l=null,d.j=null,d.B=null,An(d)}function An(d){d.onreadystatechange&&d.onreadystatechange.call(d)}function vr(d){let w="";return Y(d,function(E,L){w+=L,w+=":",w+=E,w+=`\r
`}),w}function hs(d,w,E){e:{for(L in E){var L=!1;break e}L=!0}L||(E=vr(E),typeof d=="string"?E!=null&&Os(E):Xe(d,w,E))}function gt(d){ee.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(n=$s.prototype).add=function(d,w){gr(this),this.i=null,d=Fr(this,d);let E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(w),this.h+=1,this},n.forEach=function(d,w){gr(this),this.g.forEach(function(E,L){E.forEach(function(Q){d.call(w,Q,L,this)},this)},this)},n.set=function(d,w){return gr(this),this.i=null,La(this,d=Fr(this,d))&&(this.h-=this.g.get(d).length),this.g.set(d,[w]),this.h+=1,this},n.get=function(d,w){return d&&(d=it(this,d)).length>0?String(d[0]):w},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],w=Array.from(this.g.keys());for(let L=0;L<w.length;L++){var E=w[L];const Q=Os(E);E=it(this,E);for(let W=0;W<E.length;W++){let he=Q;E[W]!==""&&(he+="="+Os(E[W])),d.push(he)}}return this.i=d.join("&")},g(Oa,kt),Oa.prototype.g=function(){return new Hs(this.i,this.h)},g(Hs,ee),(n=Hs.prototype).open=function(d,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=w,this.readyState=1,An(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(w.body=d),(this.H||o).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,_n(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,An(this)),this.g&&(this.readyState=3,An(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(o.ReadableStream!==void 0&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fi(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))},n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var w=d.value?d.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!d.done}))&&(this.response=this.responseText+=w)}d.done?_n(this):An(this),this.readyState==3&&Fi(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,_n(this))},n.Na=function(d){this.g&&(this.response=d,_n(this))},n.ga=function(){this.g&&_n(this)},n.setRequestHeader=function(d,w){this.A.append(d,w)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],w=this.h.entries();for(var E=w.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=w.next();return d.join(`\r
`)},Object.defineProperty(Hs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}}),g(gt,ee);var Ur=/^https?$/i,ud=["POST","PUT"];function ol(d,w){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=w,d.o=5,Ws(d),ds(d)}function Ws(d){d.A||(d.A=!0,le(d,"complete"),le(d,"error"))}function ll(d){if(d.h&&i!==void 0){if(d.v&&xr(d)==4)setTimeout(d.Ca.bind(d),0);else if(le(d,"readystatechange"),xr(d)==4){d.h=!1;try{const W=d.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var E;if(!(E=w)){var L;if(L=W===0){let he=String(d.D).match(Ra)[1]||null;!he&&o.self&&o.self.location&&(he=o.self.location.protocol.slice(0,-1)),L=!Ur.test(he?he.toLowerCase():"")}E=L}if(E)le(d,"complete"),le(d,"success");else{d.o=6;try{var Q=xr(d)>2?d.g.statusText:""}catch{Q=""}d.l=Q+" ["+d.ca()+"]",Ws(d)}}finally{ds(d)}}}}function ds(d,w){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const E=d.g;d.g=null,w||le(d,"ready");try{E.onreadystatechange=null}catch{}}}function xr(d){return d.g?d.g.readyState:0}function jc(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function br(d,w,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||w}function Gs(d){this.za=0,this.i=[],this.j=new En,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=br("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=br("baseRetryDelayMs",5e3,d),this.Za=br("retryDelaySeedMs",1e4,d),this.Ta=br("forwardChannelMaxRetries",2,d),this.va=br("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Jo(d&&d.concurrentRequestLimit),this.Ba=new Pc,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function zr(d){if(Rc(d),d.I==3){var w=d.V++,E=In(d.J);if(Xe(E,"SID",d.M),Xe(E,"RID",w),Xe(E,"TYPE","terminate"),Br(d,E),(w=new pr(d,d.j,w)).M=2,w.A=dn(In(E)),E=!1,o.navigator&&o.navigator.sendBeacon)try{E=o.navigator.sendBeacon(w.A.toString(),"")}catch{}!E&&o.Image&&(new Image().src=w.A,E=!0),E||(w.g=Ba(w.j,null),w.g.ea(w.A)),w.F=Date.now(),Us(w)}fn(d)}function fs(d){d.g&&(Ui(d),d.g.cancel(),d.g=null)}function Rc(d){fs(d),d.v&&(o.clearTimeout(d.v),d.v=null),Bi(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&o.clearTimeout(d.m),d.m=null)}function Va(d){if(!Zo(d.h)&&!d.m){d.m=!0;var w=d.Ea;z||I(),P||(z(),P=!0),N.add(w,d),d.D=0}}function Fa(d,w){var E;E=w?w.l:d.V++;const L=In(d.J);Xe(L,"SID",d.M),Xe(L,"RID",E),Xe(L,"AID",d.K),Br(d,L),d.u&&d.o&&hs(L,d.u,d.o),E=new pr(d,d.j,E,d.D+1),d.u===null&&(E.J=d.o),w&&(d.i=w.G.concat(d.i)),w=Ua(d,E,1e3),E.H=Math.round(.5*d.va)+Math.round(.5*d.va*Math.random()),nl(d.h,E),Yo(E,L,w)}function Br(d,w){d.H&&Y(d.H,function(E,L){Xe(w,L,E)}),d.l&&Y({},function(E,L){Xe(w,L,E)})}function Ua(d,w,E){E=Math.min(d.i.length,E);const L=d.l?h(d.l.Ka,d.l,d):null;e:{var Q=d.i;let Ne=-1;for(;;){const Be=["count="+E];Ne==-1?E>0?(Ne=Q[0].g,Be.push("ofs="+Ne)):Ne=0:Be.push("ofs="+Ne);let ve=!0;for(let lt=0;lt<E;lt++){var W=Q[lt].g;const nt=Q[lt].map;if((W-=Ne)<0)Ne=Math.max(0,Q[lt].g-100),ve=!1;else try{W="req"+W+"_"||"";try{var he=nt instanceof Map?nt:Object.entries(nt);for(const[at,mt]of he){let ft=mt;l(mt)&&(ft=ot(mt)),Be.push(W+at+"="+encodeURIComponent(ft))}}catch(at){throw Be.push(W+"type="+encodeURIComponent("_badmap")),at}}catch{L&&L(nt)}}if(ve){he=Be.join("&");break e}}he=void 0}return d=d.i.splice(0,E),w.G=d,he}function cl(d){if(!d.g&&!d.v){d.Y=1;var w=d.Da;z||I(),P||(z(),P=!0),N.add(w,d),d.A=0}}function wr(d){return!(d.g||d.v||d.A>=3)&&(d.Y++,d.v=Fn(h(d.Da,d),qi(d,d.A)),d.A++,!0)}function Ui(d){d.B!=null&&(o.clearTimeout(d.B),d.B=null)}function zi(d){d.g=new pr(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var w=In(d.na);Xe(w,"RID","rpc"),Xe(w,"SID",d.M),Xe(w,"AID",d.K),Xe(w,"CI",d.F?"0":"1"),!d.F&&d.ia&&Xe(w,"TO",d.ia),Xe(w,"TYPE","xmlhttp"),Br(d,w),d.u&&d.o&&hs(w,d.u,d.o),d.O&&(d.g.H=d.O);var E=d.g;d=d.ba,E.M=1,E.A=dn(In(w)),E.u=null,E.R=!0,Fs(E,d)}function Bi(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function $i(d,w){var E=null;if(d.g==w){Bi(d),Ui(d),d.g=null;var L=2}else{if(!tl(d.h,w))return;E=w.G,Nt(d.h,w),L=1}if(d.I!=0){if(w.o)if(L==1){E=w.u?w.u.length:0,w=Date.now()-w.F;var Q=d.D;le(L=Vn(),new fr(L,E)),Va(d)}else cl(d);else if((Q=w.m)==3||Q==0&&w.X>0||!(L==1&&(function(W,he){return!(el(W.h)>=W.h.j-(W.m?1:0)||(W.m?(W.i=he.G.concat(W.i),0):W.I==1||W.I==2||W.D>=(W.Sa?0:W.Ta)||(W.m=Fn(h(W.Ea,W,he),qi(W,W.D)),W.D++,0)))})(d,w)||L==2&&wr(d)))switch(E&&E.length>0&&(w=d.h,w.i=w.i.concat(E)),Q){case 1:$r(d,5);break;case 4:$r(d,10);break;case 3:$r(d,6);break;default:$r(d,2)}}}function qi(d,w){let E=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(E*=2),E*w}function $r(d,w){if(d.j.info("Error code "+w),w==2){var E=h(d.bb,d),L=d.Ua;const Q=!L;L=new mr(L||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Mi(L,"https"),dn(L),Q?(function(W,he){const Ne=new En;if(o.Image){const Be=new Image;Be.onload=m(yr,Ne,"TestLoadImage: loaded",!0,he,Be),Be.onerror=m(yr,Ne,"TestLoadImage: error",!1,he,Be),Be.onabort=m(yr,Ne,"TestLoadImage: abort",!1,he,Be),Be.ontimeout=m(yr,Ne,"TestLoadImage: timeout",!1,he,Be),o.setTimeout(function(){Be.ontimeout&&Be.ontimeout()},1e4),Be.src=W}else he(!1)})(L.toString(),E):(function(W,he){new En;const Ne=new AbortController,Be=setTimeout(()=>{Ne.abort(),yr(0,0,!1,he)},1e4);fetch(W,{signal:Ne.signal}).then(ve=>{clearTimeout(Be),ve.ok?yr(0,0,!0,he):yr(0,0,!1,he)}).catch(()=>{clearTimeout(Be),yr(0,0,!1,he)})})(L.toString(),E)}else Ct(2);d.I=0,d.l&&d.l.pa(w),fn(d),Rc(d)}function fn(d){if(d.I=0,d.ja=[],d.l){const w=Ac(d.h);w.length==0&&d.i.length==0||(S(d.ja,w),S(d.ja,d.i),d.h.i.length=0,b(d.i),d.i.length=0),d.l.oa()}}function za(d,w,E){var L=E instanceof mr?In(E):new mr(E);if(L.g!="")w&&(L.g=w+"."+L.g),zs(L,L.u);else{var Q=o.location;L=Q.protocol,w=w?w+"."+Q.hostname:Q.hostname,Q=+Q.port;const W=new mr(null);L&&Mi(W,L),w&&(W.g=w),Q&&zs(W,Q),E&&(W.h=E),L=W}return E=d.G,w=d.wa,E&&w&&Xe(L,E,w),Xe(L,"VER",d.ka),Br(d,L),L}function Ba(d,w,E){if(w&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return(w=d.Aa&&!d.ma?new gt(new Oa({ab:E})):new gt(d.ma)).Fa(d.L),w}function Ks(){}function Sr(){}function sn(d,w){ee.call(this),this.g=new Gs(w),this.l=d,this.h=w&&w.messageUrlParams||null,d=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(d?d["X-WebChannel-Content-Type"]=w.messageContentType:d={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(d?d["X-WebChannel-Client-Profile"]=w.sa:d={"X-WebChannel-Client-Profile":w.sa}),this.g.U=d,(d=w&&w.Qb)&&!fe(d)&&(this.g.u=d),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!fe(w)&&(this.g.G=w,(d=this.h)!==null&&w in d&&w in(d=this.h)&&delete d[w]),this.j=new Er(this)}function Qs(d){hn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var w=d.__sm__;if(w){e:{for(const E in w){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,w=w!==null&&d in w?w[d]:void 0),this.data=w}else this.data=d}function Dc(){Gt.call(this),this.status=1}function Er(d){this.g=d}(n=gt.prototype).Fa=function(d){this.H=d},n.ea=function(d,w,E,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);w=w?w.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ls.g(),this.g.onreadystatechange=v(h(this.Ca,this));try{this.B=!0,this.g.open(w,String(d),!0),this.B=!1}catch(W){return void ol(this,W)}if(d=E||"",E=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var Q in L)E.set(Q,L[Q]);else{if(typeof L.keys!="function"||typeof L.get!="function")throw Error("Unknown input type for opt_headers: "+String(L));for(const W of L.keys())E.set(W,L.get(W))}L=Array.from(E.keys()).find(W=>W.toLowerCase()=="content-type"),Q=o.FormData&&d instanceof o.FormData,!(Array.prototype.indexOf.call(ud,w,void 0)>=0)||L||Q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,he]of E)this.g.setRequestHeader(W,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(W){ol(this,W)}},n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,le(this,"complete"),le(this,"abort"),ds(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ds(this,!0)),gt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ll(this):this.Xa())},n.Xa=function(){ll(this)},n.isActive=function(){return!!this.g},n.ca=function(){try{return xr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var w=this.g.responseText;return d&&w.indexOf(d)==0&&(w=w.substring(d.length)),At(w)}},n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)},(n=Gs.prototype).ka=8,n.I=1,n.connect=function(d,w,E,L){Ct(0),this.W=d,this.H=w||{},E&&L!==void 0&&(this.H.OSID=E,this.H.OAID=L),this.F=this.X,this.J=za(this,null,this.W),Va(this)},n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(1e5*Math.random()),d=this.V++;const Q=new pr(this,this.j,d);let W=this.o;if(this.U&&(W?(W=q(W),B(W,this.U)):W=this.U),this.u!==null||this.R||(Q.J=W,W=null),this.S)e:{for(var w=0,E=0;E<this.i.length;E++){var L=this.i[E];if((L="__data__"in L.map&&typeof(L=L.map.__data__)=="string"?L.length:void 0)===void 0)break;if((w+=L)>4096){w=E;break e}if(w===4096||E===this.i.length-1){w=E+1;break e}}w=1e3}else w=1e3;w=Ua(this,Q,w),Xe(E=In(this.J),"RID",d),Xe(E,"CVER",22),this.G&&Xe(E,"X-HTTP-Session-Id",this.G),Br(this,E),W&&(this.R?w="headers="+Os(vr(W))+"&"+w:this.u&&hs(E,this.u,W)),nl(this.h,Q),this.Ra&&Xe(E,"TYPE","init"),this.S?(Xe(E,"$req",w),Xe(E,"SID","null"),Q.U=!0,Yo(Q,E,null)):Yo(Q,E,w),this.I=2}}else this.I==3&&(d?Fa(this,d):this.i.length==0||Zo(this.h)||Fa(this))},n.Da=function(){if(this.v=null,zi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Fn(h(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),fs(this),zi(this))},n.Va=function(){this.C!=null&&(this.C=null,fs(this),wr(this),Ct(19))},n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=Ks.prototype).ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){},Sr.prototype.g=function(d,w){return new sn(d,w)},g(sn,ee),sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){zr(this.g)},sn.prototype.o=function(d){var w=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.v&&((E={}).__data__=ot(d),d=E);w.i.push(new _c(w.Ya++,d)),w.I==3&&Va(w)},sn.prototype.N=function(){this.g.l=null,delete this.j,zr(this.g),delete this.g,sn.Z.N.call(this)},g(Qs,hn),g(Dc,Gt),g(Er,Ks),Er.prototype.ra=function(){le(this.g,"a")},Er.prototype.qa=function(d){le(this.g,new Qs(d))},Er.prototype.pa=function(d){le(this.g,new Dc)},Er.prototype.oa=function(){le(this.g,"b")},Sr.prototype.createWebChannel=Sr.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,pS=function(){return new Sr},fS=function(){return Vn()},dS=yt,Tp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},cs.NO_ERROR=0,cs.TIMEOUT=8,cs.HTTP_ERROR=6,Gu=cs,Ri.COMPLETE="complete",hS=Ri,bt.EventType=Jt,Jt.OPEN="a",Jt.CLOSE="b",Jt.ERROR="c",Jt.MESSAGE="d",ee.prototype.listen=ee.prototype.J,Fl=bt,gt.prototype.listenOnce=gt.prototype.K,gt.prototype.getLastError=gt.prototype.Ha,gt.prototype.getLastErrorCode=gt.prototype.ya,gt.prototype.getStatus=gt.prototype.ca,gt.prototype.getResponseJson=gt.prototype.La,gt.prototype.getResponseText=gt.prototype.la,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Fa,uS=gt}).apply(Au!==void 0?Au:typeof self<"u"?self:typeof window<"u"?window:{});const fx="@firebase/firestore",px="4.9.2";class xn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xn.UNAUTHENTICATED=new xn(null),xn.GOOGLE_CREDENTIALS=new xn("google-credentials-uid"),xn.FIRST_PARTY=new xn("first-party-uid"),xn.MOCK_USER=new xn("mock-user");let Bo="12.3.0";const xa=new Mh("@firebase/firestore");function mo(){return xa.logLevel}function Se(n,...e){if(xa.logLevel<=Je.DEBUG){const t=e.map(km);xa.debug(`Firestore (${Bo}): ${n}`,...t)}}function Ps(n,...e){if(xa.logLevel<=Je.ERROR){const t=e.map(km);xa.error(`Firestore (${Bo}): ${n}`,...t)}}function Po(n,...e){if(xa.logLevel<=Je.WARN){const t=e.map(km);xa.warn(`Firestore (${Bo}): ${n}`,...t)}}function km(n){if(typeof n=="string")return n;try{return(function(e){return JSON.stringify(e)})(n)}catch{return n}}function Le(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,mS(n,r,t)}function mS(n,e,t){let r=`FIRESTORE (${Bo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ps(r),new Error(r)}function pt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||mS(e,i,r)}function $e(n,e){return n}const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Lr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ks{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class gS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xn.UNAUTHENTICATED))}shutdown(){}}class BN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $N{constructor(e){this.t=e,this.currentUser=xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pt(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new ks;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ks,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},u=h=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ks)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pt(typeof r.accessToken=="string",31837,{l:r}),new gS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string",2055,{h:e}),new xn(e)}}class qN{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=xn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class HN{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new qN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(xn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){pt(this.o===void 0,3512);const r=o=>{o.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,Se("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new mx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new mx(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function GN(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Cm{static newId(){const e=62*Math.floor(4.129032258064516);let t="";for(;t.length<20;){const r=GN(40);for(let i=0;i<r.length;++i)t.length<20&&r[i]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[i]%62))}return t}}function Ze(n,e){return n<e?-1:n>e?1:0}function kp(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return zf(i)===zf(o)?Ze(i,o):zf(i)?1:-1}return Ze(n.length,e.length)}const KN=55296,QN=57343;function zf(n){const e=n.charCodeAt(0);return e>=KN&&e<=QN}function jo(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}const gx="__name__";class Yr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Le(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Le(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Yr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Yr.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Ze(e.length,t.length)}static compareSegments(e,t){const r=Yr.isNumericId(e),i=Yr.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Yr.extractNumericId(e).compare(Yr.extractNumericId(t)):kp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wi.fromString(e.substring(4,e.length-2))}}class xt extends Yr{construct(e,t,r){return new xt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new xt(t)}static emptyPath(){return new xt([])}}const YN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends Yr{construct(e,t,r){return new cn(e,t,r)}static isValidIdentifier(e){return YN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gx}static keyField(){return new cn([gx])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new ye(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new ye(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ye(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else u==="`"?(l=!l,i++):u!=="."||l?(r+=u,i++):(o(),i++)}if(o(),l)throw new ye(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(t)}static emptyPath(){return new cn([])}}class je{constructor(e){this.path=e}static fromPath(e){return new je(xt.fromString(e))}static fromName(e){return new je(xt.fromString(e).popFirst(5))}static empty(){return new je(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new xt(e.slice()))}}function yS(n,e,t){if(!t)throw new ye(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yx(n){if(!je.isDocumentKey(n))throw new ye(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vx(n){if(je.isDocumentKey(n))throw new ye(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Uh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(t){return t.constructor?t.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Le(12329,{type:typeof n})}function jr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Uh(n);throw new ye(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Wt(n,e){const t={typeString:n};return e&&(t.value=e),t}function bc(n,e){if(!vS(n))throw new ye(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(i&&typeof l!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new ye(ie.INVALID_ARGUMENT,t);return!0}const xx=-62135596800,bx=1e6;class St{static now(){return St.fromMillis(Date.now())}static fromDate(e){return St.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*bx);return new St(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<xx)throw new ye(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bx}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:St._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bc(e,St._jsonSchema))return new St(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}St._jsonSchemaVersion="firestore/timestamp/1.0",St._jsonSchema={type:Wt("string",St._jsonSchemaVersion),seconds:Wt("number"),nanoseconds:Wt("number")};class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new St(0,0))}static max(){return new Ue(new St(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function XN(n){return new Ni(n.readTime,n.key,-1)}class Ni{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ni(Ue.min(),je.empty(),-1)}static max(){return new Ni(Ue.max(),je.empty(),-1)}}function JN(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=je.comparator(n.documentKey,e.documentKey),t!==0?t:Ze(n.largestBatchId,e.largestBatchId))}class ZN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function $o(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!=="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.")throw n;Se("LocalStore","Unexpectedly lost primary lease")}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let i=0,o=0,l=!1;e.forEach(u=>{++i,u.next(()=>{++o,l&&o===i&&t()},h=>r(h))}),l=!0,o===i&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(i=>i?ae.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new ae((r,i)=>{const o=e.length,l=new Array(o);let u=0;for(let h=0;h<o;h++){const m=h;t(e[m]).next(g=>{l[m]=g,++u,u===o&&r(l)},g=>i(g))}})}static doWhile(e,t){return new ae((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}function qo(n){return n.name==="IndexedDbTransactionError"}class zh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zh.ce=-1;function Bh(n){return n==null}function ph(n){return n===0&&1/n==-1/0}function eI(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function wx(n){return n+""}function Sx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ta(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function xS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Dt{constructor(e,t){this.comparator=e,this.root=t||ln.EMPTY}insert(e,t){return new Dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new Dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pu(this.root,e,this.comparator,!0)}}class Pu{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??ln.RED,this.left=i??ln.EMPTY,this.right=o??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new ln(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ln.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1,ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(n,e,t,r,i){return this}insert(n,e,t){return new ln(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Yt{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ex(this.data.getIterator())}getIteratorFrom(e){return new Ex(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Yt(this.comparator);return t.data=e,t}}class Ex{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ar{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new Ar([])}unionWith(e){let t=new Yt(cn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ar(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class bS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new bS("Invalid base64 string: "+i):i}})(e);return new un(t)}static fromUint8Array(e){const t=(function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i})(e);return new un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return(function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const tI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ii(n){if(pt(!!n,39018),typeof n=="string"){let e=0;const t=tI.exec(n);if(pt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ut(n.seconds),nanos:Ut(n.nanos)}}function Ut(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function _i(n){return typeof n=="string"?un.fromBase64String(n):un.fromUint8Array(n)}const wS="server_timestamp",SS="__type__",ES="__previous_value__",TS="__local_write_time__";function Nm(n){return(n?.mapValue?.fields||{})[SS]?.stringValue===wS}function $h(n){const e=n.mapValue.fields[ES];return Nm(e)?$h(e):e}function ic(n){const e=Ii(n.mapValue.fields[TS].timestampValue);return new St(e.seconds,e.nanos)}class nI{constructor(e,t,r,i,o,l,u,h,m,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=m,this.isUsingEmulator=g}}const mh="(default)";class ac{constructor(e,t){this.projectId=e,this.database=t||mh}static empty(){return new ac("","")}get isDefaultDatabase(){return this.database===mh}isEqual(e){return e instanceof ac&&e.projectId===this.projectId&&e.database===this.database}}const kS="__type__",rI="__max__",ju={},CS="__vector__",gh="value";function Ai(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Nm(n)?4:(function(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===rI})(n)?9007199254740991:(function(e){return(e?.mapValue?.fields||{})[kS]?.stringValue===CS})(n)?10:11:Le(28295,{value:n})}function os(n,e){if(n===e)return!0;const t=Ai(n);if(t!==Ai(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ic(n).isEqual(ic(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Ii(r.timestampValue),l=Ii(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,i){return _i(r.bytesValue).isEqual(_i(i.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,i){return Ut(r.geoPointValue.latitude)===Ut(i.geoPointValue.latitude)&&Ut(r.geoPointValue.longitude)===Ut(i.geoPointValue.longitude)})(n,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return Ut(r.integerValue)===Ut(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Ut(r.doubleValue),l=Ut(i.doubleValue);return o===l?ph(o)===ph(l):isNaN(o)&&isNaN(l)}return!1})(n,e);case 9:return jo(n.arrayValue.values||[],e.arrayValue.values||[],os);case 10:case 11:return(function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Sx(o)!==Sx(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!os(o[u],l[u])))return!1;return!0})(n,e);default:return Le(52216,{left:n})}}function oc(n,e){return(n.values||[]).find(t=>os(t,e))!==void 0}function Ro(n,e){if(n===e)return 0;const t=Ai(n),r=Ai(e);if(t!==r)return Ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ze(n.booleanValue,e.booleanValue);case 2:return(function(i,o){const l=Ut(i.integerValue||i.doubleValue),u=Ut(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1})(n,e);case 3:return Tx(n.timestampValue,e.timestampValue);case 4:return Tx(ic(n),ic(e));case 5:return kp(n.stringValue,e.stringValue);case 6:return(function(i,o){const l=_i(i),u=_i(o);return l.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const m=Ze(l[h],u[h]);if(m!==0)return m}return Ze(l.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(i,o){const l=Ze(Ut(i.latitude),Ut(o.latitude));return l!==0?l:Ze(Ut(i.longitude),Ut(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return kx(n.arrayValue,e.arrayValue);case 10:return(function(i,o){const l=i.fields||{},u=o.fields||{},h=l[gh]?.arrayValue,m=u[gh]?.arrayValue,g=Ze(h?.values?.length||0,m?.values?.length||0);return g!==0?g:kx(h,m)})(n.mapValue,e.mapValue);case 11:return(function(i,o){if(i===ju&&o===ju)return 0;if(i===ju)return 1;if(o===ju)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},m=Object.keys(h);u.sort(),m.sort();for(let g=0;g<u.length&&g<m.length;++g){const v=kp(u[g],m[g]);if(v!==0)return v;const b=Ro(l[u[g]],h[m[g]]);if(b!==0)return b}return Ze(u.length,m.length)})(n.mapValue,e.mapValue);default:throw Le(23264,{he:t})}}function Tx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ze(n,e);const t=Ii(n),r=Ii(e),i=Ze(t.seconds,r.seconds);return i!==0?i:Ze(t.nanos,r.nanos)}function kx(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Ro(t[i],r[i]);if(o)return o}return Ze(t.length,r.length)}function Do(n){return Cp(n)}function Cp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const t=Ii(e);return`time(${t.seconds},${t.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return _i(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return je.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let t="[",r=!0;for(const i of e.values||[])r?r=!1:t+=",",t+=Cp(i);return t+"]"})(n.arrayValue):"mapValue"in n?(function(e){const t=Object.keys(e.fields||{}).sort();let r="{",i=!0;for(const o of t)i?i=!1:r+=",",r+=`${o}:${Cp(e.fields[o])}`;return r+"}"})(n.mapValue):Le(61005,{value:n})}function Ku(n){switch(Ai(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$h(n);return e?16+Ku(e):16;case 5:return 2*n.stringValue.length;case 6:return _i(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(t){return(t.values||[]).reduce((r,i)=>r+Ku(i),0)})(n.arrayValue);case 10:case 11:return(function(t){let r=0;return Ta(t.fields,(i,o)=>{r+=i.length+Ku(o)}),r})(n.mapValue);default:throw Le(13486,{value:n})}}function Cx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Np(n){return!!n&&"integerValue"in n}function Im(n){return!!n&&"arrayValue"in n}function Nx(n){return!!n&&"nullValue"in n}function Ix(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qu(n){return!!n&&"mapValue"in n}function Wl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ta(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Wl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wl(n.arrayValue.values[t]);return e}return{...n}}class ar{constructor(e){this.value=e}static empty(){return new ar({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Qu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wl(t)}setAll(e){let t=cn.emptyPath(),r={},i=[];e.forEach((l,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=u.popLast()}l?r[u.lastSegment()]=Wl(l):i.push(u.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Qu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return os(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Qu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ta(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new ar(Wl(this.value))}}function NS(n){const e=[];return Ta(n.fields,(t,r)=>{const i=new cn([t]);if(Qu(r)){const o=NS(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new Ar(e)}class bn{constructor(e,t,r,i,o,l,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new bn(e,0,Ue.min(),Ue.min(),Ue.min(),ar.empty(),0)}static newFoundDocument(e,t,r,i){return new bn(e,1,t,Ue.min(),r,i,0)}static newNoDocument(e,t){return new bn(e,2,t,Ue.min(),Ue.min(),ar.empty(),0)}static newUnknownDocument(e,t){return new bn(e,3,t,Ue.min(),Ue.min(),ar.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ar.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ar.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yh{constructor(e,t){this.position=e,this.inclusive=t}}function _x(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(r=o.field.isKeyField()?je.comparator(je.fromName(l.referenceValue),t.key):Ro(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ax(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!os(n.position[t],e.position[t]))return!1;return!0}class lc{constructor(e,t="asc"){this.field=e,this.dir=t}}function sI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class IS{}class Ht extends IS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new iI(e,t,r):t==="array-contains"?new lI(e,r):t==="in"?new cI(e,r):t==="not-in"?new uI(e,r):t==="array-contains-any"?new hI(e,r):new Ht(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new aI(e,r):new oI(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ro(t,this.value)):t!==null&&Ai(this.value)===Ai(t)&&this.matchesComparison(Ro(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mr extends IS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Mr(e,t)}matches(e){return _S(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function _S(n){return n.op==="and"}function AS(n){return(function(e){for(const t of e.filters)if(t instanceof Mr)return!1;return!0})(n)&&_S(n)}function Ip(n){if(n instanceof Ht)return n.field.canonicalString()+n.op.toString()+Do(n.value);if(AS(n))return n.filters.map(e=>Ip(e)).join(",");{const e=n.filters.map(t=>Ip(t)).join(",");return`${n.op}(${e})`}}function PS(n,e){return n instanceof Ht?(function(t,r){return r instanceof Ht&&t.op===r.op&&t.field.isEqual(r.field)&&os(t.value,r.value)})(n,e):n instanceof Mr?(function(t,r){return r instanceof Mr&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,o,l)=>i&&PS(o,r.filters[l]),!0)})(n,e):void Le(19439)}function jS(n){return n instanceof Ht?(function(e){return`${e.field.canonicalString()} ${e.op} ${Do(e.value)}`})(n):n instanceof Mr?(function(e){return e.op.toString()+" {"+e.getFilters().map(jS).join(" ,")+"}"})(n):"Filter"}class iI extends Ht{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.matchesComparison(t)}}class aI extends Ht{constructor(e,t){super(e,"in",t),this.keys=RS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class oI extends Ht{constructor(e,t){super(e,"not-in",t),this.keys=RS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function RS(n,e){return(e.arrayValue?.values||[]).map(t=>je.fromName(t.referenceValue))}class lI extends Ht{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Im(t)&&oc(t.arrayValue,this.value)}}class cI extends Ht{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&oc(this.value.arrayValue,t)}}class uI extends Ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!oc(this.value.arrayValue,t)}}class hI extends Ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Im(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>oc(this.value.arrayValue,r))}}class dI{constructor(e,t=null,r=[],i=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=u,this.Te=null}}function Px(n,e=null,t=[],r=[],i=null,o=null,l=null){return new dI(n,e,t,r,i,o,l)}function _m(n){const e=$e(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ip(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(i){return i.field.canonicalString()+i.dir})(r)).join(","),Bh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Do(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Do(r)).join(",")),e.Te=t}return e.Te}function Am(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!sI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!PS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ax(n.startAt,e.startAt)&&Ax(n.endAt,e.endAt)}function _p(n){return je.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Ho{constructor(e,t=null,r=[],i=[],o=null,l="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function qh(n){return new Ho(n)}function jx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function DS(n){return n.collectionGroup!==null}function Gl(n){const e=$e(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Yt(cn.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new lc(o,r))}),t.has(cn.keyField().canonicalString())||e.Ie.push(new lc(cn.keyField(),r))}return e.Ie}function Zr(n){const e=$e(n);return e.Ee||(e.Ee=(function(t,r){if(t.limitType==="F")return Px(t.path,t.collectionGroup,r,t.filters,t.limit,t.startAt,t.endAt);{r=r.map(l=>{const u=l.dir==="desc"?"asc":"desc";return new lc(l.field,u)});const i=t.endAt?new yh(t.endAt.position,t.endAt.inclusive):null,o=t.startAt?new yh(t.startAt.position,t.startAt.inclusive):null;return Px(t.path,t.collectionGroup,r,t.filters,t.limit,i,o)}})(e,Gl(n))),e.Ee}function Ap(n,e){const t=n.filters.concat([e]);return new Ho(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function vh(n,e,t){return new Ho(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Hh(n,e){return Am(Zr(n),Zr(e))&&n.limitType===e.limitType}function MS(n){return`${_m(Zr(n))}|lt:${n.limitType}`}function go(n){return`Query(target=${(function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>jS(r)).join(", ")}]`),Bh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>(function(i){return`${i.field.canonicalString()} (${i.dir})`})(r)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Do(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Do(r)).join(",")),`Target(${t})`})(Zr(n))}; limitType=${n.limitType})`}function Wh(n,e){return e.isFoundDocument()&&(function(t,r){const i=r.key.path;return t.collectionGroup!==null?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):je.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)})(n,e)&&(function(t,r){for(const i of Gl(t))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(n,e)&&(function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0})(n,e)&&(function(t,r){return!(t.startAt&&!(function(i,o,l){const u=_x(i,o,l);return i.inclusive?u<=0:u<0})(t.startAt,Gl(t),r))&&!(t.endAt&&!(function(i,o,l){const u=_x(i,o,l);return i.inclusive?u>=0:u>0})(t.endAt,Gl(t),r))})(n,e)}function LS(n){return(e,t)=>{let r=!1;for(const i of Gl(n)){const o=fI(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function fI(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):(function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?Ro(u,h):Le(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Le(19790,{direction:n.dir})}}class ka{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ta(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return xS(this.inner)}size(){return this.innerSize}}const pI=new Dt(je.comparator);function js(){return pI}const OS=new Dt(je.comparator);function Ul(...n){let e=OS;for(const t of n)e=e.insert(t.key,t);return e}function VS(n){let e=OS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ca(){return Kl()}function FS(){return Kl()}function Kl(){return new ka(n=>n.toString(),(n,e)=>n.isEqual(e))}const mI=new Dt(je.comparator),gI=new Yt(je.comparator);function et(...n){let e=gI;for(const t of n)e=e.add(t);return e}const yI=new Yt(Ze);function Pm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ph(e)?"-0":e}}function US(n){return{integerValue:""+n}}function vI(n,e){return(function(t){return typeof t=="number"&&Number.isInteger(t)&&!ph(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER})(e)?US(e):Pm(n,e)}class Gh{constructor(){this._=void 0}}function xI(n,e,t){return n instanceof cc?(function(r,i){const o={fields:{[SS]:{stringValue:wS},[TS]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Nm(i)&&(i=$h(i)),i&&(o.fields[ES]=i),{mapValue:o}})(t,e):n instanceof uc?BS(n,e):n instanceof hc?$S(n,e):(function(r,i){const o=zS(r,i),l=Rx(o)+Rx(r.Ae);return Np(o)&&Np(r.Ae)?US(l):Pm(r.serializer,l)})(n,e)}function bI(n,e,t){return n instanceof uc?BS(n,e):n instanceof hc?$S(n,e):t}function zS(n,e){return n instanceof xh?(function(t){return Np(t)||(function(r){return!!r&&"doubleValue"in r})(t)})(e)?e:{integerValue:0}:null}class cc extends Gh{}class uc extends Gh{constructor(e){super(),this.elements=e}}function BS(n,e){const t=qS(e);for(const r of n.elements)t.some(i=>os(i,r))||t.push(r);return{arrayValue:{values:t}}}class hc extends Gh{constructor(e){super(),this.elements=e}}function $S(n,e){let t=qS(e);for(const r of n.elements)t=t.filter(i=>!os(i,r));return{arrayValue:{values:t}}}class xh extends Gh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Rx(n){return Ut(n.integerValue||n.doubleValue)}function qS(n){return Im(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class wI{constructor(e,t){this.field=e,this.transform=t}}class SI{constructor(e,t){this.version=e,this.transformResults=t}}class es{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new es}static exists(e){return new es(void 0,e)}static updateTime(e){return new es(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Kh{}function HS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new GS(n.key,es.none()):new wc(n.key,n.data,es.none());{const t=n.data,r=ar.empty();let i=new Yt(cn.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new Ca(n.key,r,new Ar(i.toArray()),es.none())}}function EI(n,e,t){n instanceof wc?(function(r,i,o){const l=r.value.clone(),u=Mx(r.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(n,e,t):n instanceof Ca?(function(r,i,o){if(!Yu(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Mx(r.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(WS(r)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(n,e,t):(function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Ql(n,e,t,r){return n instanceof wc?(function(i,o,l,u){if(!Yu(i.precondition,o))return l;const h=i.value.clone(),m=Lx(i.fieldTransforms,u,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ca?(function(i,o,l,u){if(!Yu(i.precondition,o))return l;const h=Lx(i.fieldTransforms,u,o),m=o.data;return m.setAll(WS(i)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))})(n,e,t,r):(function(i,o,l){return Yu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l})(n,e,t)}function TI(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=zS(r.transform,i||null);o!=null&&(t===null&&(t=ar.empty()),t.set(r.field,o))}return t||null}function Dx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(t,r){return t===void 0&&r===void 0||!(!t||!r)&&jo(t,r,(i,o)=>(function(l,u){return l.field.isEqual(u.field)&&(function(h,m){return h instanceof uc&&m instanceof uc||h instanceof hc&&m instanceof hc?jo(h.elements,m.elements,os):h instanceof xh&&m instanceof xh?os(h.Ae,m.Ae):h instanceof cc&&m instanceof cc})(l.transform,u.transform)})(i,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class wc extends Kh{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ca extends Kh{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function WS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Mx(n,e,t){const r=new Map;pt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,u=e.data.field(o.field);r.set(o.field,bI(l,u,t[i]))}return r}function Lx(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,xI(o,l,e))}return r}class GS extends Kh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kI extends Kh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class CI{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&EI(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ql(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ql(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=FS();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(i.key)?null:u;const h=HS(l,u);h!==null&&r.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(Ue.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),et())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,(t,r)=>Dx(t,r))&&jo(this.baseMutations,e.baseMutations,(t,r)=>Dx(t,r))}}class jm{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){pt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=mI;const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new jm(e,t,r,i)}}class NI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class II{constructor(e,t){this.count=e,this.unchangedNames=t}}var $t,tt;function KS(n){if(n===void 0)return Ps("GRPC error has no .code"),ie.UNKNOWN;switch(n){case $t.OK:return ie.OK;case $t.CANCELLED:return ie.CANCELLED;case $t.UNKNOWN:return ie.UNKNOWN;case $t.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case $t.INTERNAL:return ie.INTERNAL;case $t.UNAVAILABLE:return ie.UNAVAILABLE;case $t.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case $t.NOT_FOUND:return ie.NOT_FOUND;case $t.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case $t.ABORTED:return ie.ABORTED;case $t.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case $t.DATA_LOSS:return ie.DATA_LOSS;default:return Le(39323,{code:n})}}(tt=$t||($t={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";const _I=new wi([4294967295,4294967295],0);function Ox(n){const e=new TextEncoder().encode(n),t=new cS;return t.update(e),new Uint8Array(t.digest())}function Vx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new wi([t,r],0),new wi([i,o],0)]}class Rm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new zl(`Invalid padding: ${t}`);if(r<0)throw new zl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new zl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=wi.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(wi.fromNumber(r)));return i.compare(_I)===1&&(i=new wi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Ox(e),[r,i]=Vx(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);if(!this.we(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Rm(o,i,t);return r.forEach(u=>l.insert(u)),l}insert(e){if(this.ge===0)return;const t=Ox(e),[r,i]=Vx(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qh{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Sc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Qh(Ue.min(),i,new Dt(Ze),js(),et())}}class Sc{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Sc(r,t,et(),et(),et())}}class Xu{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class QS{constructor(e,t){this.targetId=e,this.Ce=t}}class YS{constructor(e,t,r=un.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Fx{constructor(){this.ve=0,this.Fe=Ux(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=et(),t=et(),r=et();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Le(38017,{changeType:o})}}),new Sc(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Ux()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,pt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class AI{constructor(e){this.Ge=e,this.ze=new Map,this.je=js(),this.Je=Ru(),this.He=Ru(),this.Ye=new Dt(Ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Le(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(_p(o))if(r===0){const l=new je(o.path);this.et(t,l,bn.newNoDocument(l,Ue.min()))}else pt(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const u=this.ut(e),h=u?this.ct(u,e,l):1;if(h!==0){this.it(t);const m=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let l,u;try{l=_i(r).toUint8Array()}catch(h){if(h instanceof bS)return Po("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new Rm(l,i,o)}catch(h){return Po(h instanceof zl?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((o,l)=>{const u=this.ot(l);if(u){if(o.current&&_p(u.target)){const h=new je(u.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,bn.newNoDocument(h,e))}o.Be&&(t.set(l,o.ke()),o.qe())}});let r=et();this.He.forEach((o,l)=>{let u=!0;l.forEachWhile(h=>{const m=this.ot(h);return!m||m.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const i=new Qh(e,t,this.Ye,this.je,r);return this.je=js(),this.Je=Ru(),this.He=Ru(),this.Ye=new Dt(Ze),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Fx,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Yt(Ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Yt(Ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Se("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Fx),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ru(){return new Dt(je.comparator)}function Ux(){return new Dt(je.comparator)}const PI={asc:"ASCENDING",desc:"DESCENDING"},jI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RI={and:"AND",or:"OR"};class DI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Pp(n,e){return n.useProto3Json||Bh(e)?e:{value:e}}function bh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function MI(n,e){return bh(n,e.toTimestamp())}function Xr(n){return pt(!!n,49232),Ue.fromTimestamp((function(e){const t=Ii(e);return new St(t.seconds,t.nanos)})(n))}function Dm(n,e){return jp(n,e).canonicalString()}function jp(n,e){const t=(function(r){return new xt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function JS(n){const e=xt.fromString(n);return pt(rE(e),10190,{key:e.toString()}),e}function Rp(n,e){return Dm(n.databaseId,e.path)}function Bf(n,e){const t=JS(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(eE(t))}function ZS(n,e){return Dm(n.databaseId,e)}function Dp(n){return new xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function eE(n){return pt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function zx(n,e,t){return{name:Rp(n,e),fields:t.value.mapValue.fields}}function LI(n,e){return{documents:[ZS(n,e.path)]}}function OI(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=ZS(n,i);const o=(function(h){if(h.length!==0)return nE(Mr.create(h,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(h){if(h.length!==0)return h.map(m=>(function(g){return{field:yo(g.field),direction:FI(g.dir)}})(m))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=Pp(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:i}}function VI(n){let e=(function(g){const v=JS(g);return v.length===4?xt.emptyPath():eE(v)})(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){pt(r===1,65062);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(g){const v=tE(g);return v instanceof Mr&&AS(v)?v.getFilters():[v]})(t.where));let l=[];t.orderBy&&(l=(function(g){return g.map(v=>(function(b){return new lc(vo(b.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(v))})(t.orderBy));let u=null;t.limit&&(u=(function(g){let v;return v=typeof g=="object"?g.value:g,Bh(v)?null:v})(t.limit));let h=null;t.startAt&&(h=(function(g){const v=!!g.before,b=g.values||[];return new yh(b,v)})(t.startAt));let m=null;return t.endAt&&(m=(function(g){const v=!g.before,b=g.values||[];return new yh(b,v)})(t.endAt)),(function(g,v,b,S,T,_,D,O){return new Ho(g,v,b,S,T,_,D,O)})(e,i,l,o,u,"F",h,m)}function tE(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=vo(e.unaryFilter.field);return Ht.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=vo(e.unaryFilter.field);return Ht.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=vo(e.unaryFilter.field);return Ht.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=vo(e.unaryFilter.field);return Ht.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(n):n.fieldFilter!==void 0?(function(e){return Ht.create(vo(e.fieldFilter.field),(function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return Mr.create(e.compositeFilter.filters.map(t=>tE(t)),(function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(e.compositeFilter.op))})(n):Le(30097,{filter:n})}function FI(n){return PI[n]}function UI(n){return jI[n]}function zI(n){return RI[n]}function yo(n){return{fieldPath:n.canonicalString()}}function vo(n){return cn.fromServerFormat(n.fieldPath)}function nE(n){return n instanceof Ht?(function(e){if(e.op==="=="){if(Ix(e.value))return{unaryFilter:{field:yo(e.field),op:"IS_NAN"}};if(Nx(e.value))return{unaryFilter:{field:yo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Ix(e.value))return{unaryFilter:{field:yo(e.field),op:"IS_NOT_NAN"}};if(Nx(e.value))return{unaryFilter:{field:yo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yo(e.field),op:UI(e.op),value:e.value}}})(n):n instanceof Mr?(function(e){const t=e.getFilters().map(r=>nE(r));return t.length===1?t[0]:{compositeFilter:{op:zI(e.op),filters:t}}})(n):Le(54877,{filter:n})}function BI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function rE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class gi{constructor(e,t,r,i,o=Ue.min(),l=Ue.min(),u=un.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $I{constructor(e){this.yt=e}}function qI(n){const e=VI({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?vh(e,e.limit,"L"):e}class HI{constructor(){this.Cn=new WI}addToCollectionParentIndex(e,t){return this.Cn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(Ni.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(Ni.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class WI{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Yt(xt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Yt(xt.comparator)).toArray()}}const Bx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sE=41943040;class On{static withCacheSize(e){return new On(e,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}On.DEFAULT_COLLECTION_PERCENTILE=10,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,On.DEFAULT=new On(sE,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),On.DISABLED=new On(-1,0,0);class Mo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Mo(0)}static cr(){return new Mo(-1)}}const $x="LruGarbageCollector";function qx([n,e],[t,r]){const i=Ze(n,t);return i===0?Ze(e,r):i}class GI{constructor(e){this.Ir=e,this.buffer=new Yt(qx),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();qx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KI{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Se($x,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){qo(t)?Se($x,"Ignoring IndexedDB error during garbage collection: ",t):await $o(t)}await this.Vr(3e5)})}}class QI{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ae.resolve(zh.ce);const r=new GI(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(Bx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bx):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,l,u,h,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,l=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,u=Date.now(),this.removeTargets(e,r,t))).next(v=>(o=v,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(m=Date.now(),mo()<=Je.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${i} in `+(u-l)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${v} documents in `+(m-h)+`ms
Total Duration: ${m-g}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:v})))}}class YI{constructor(){this.changes=new ka(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class XI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class JI{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ql(r.mutation,i,Ar.empty(),St.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,et()).next(()=>r))}getLocalViewOfDocuments(e,t,r=et()){const i=ca();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let l=Ul();return o.forEach((u,h)=>{l=l.insert(u,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=ca();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,et()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,u)=>{t.set(l,u)})})}computeViews(e,t,r,i){let o=js();const l=Kl(),u=Kl();return t.forEach((h,m)=>{const g=r.get(m.key);i.has(m.key)&&(g===void 0||g.mutation instanceof Ca)?o=o.insert(m.key,m):g!==void 0?(l.set(m.key,g.mutation.getFieldMask()),Ql(g.mutation,m,g.mutation.getFieldMask(),St.now())):l.set(m.key,Ar.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((m,g)=>l.set(m,g)),t.forEach((m,g)=>u.set(m,new XI(g,l.get(m)??null))),u))}recalculateAndSaveOverlays(e,t){const r=Kl();let i=new Dt((l,u)=>l-u),o=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const u of l)u.keys().forEach(h=>{const m=t.get(h);if(m===null)return;let g=r.get(h)||Ar.empty();g=u.applyToLocalView(m,g),r.set(h,g);const v=(i.get(u.batchId)||et()).add(h);i=i.insert(u.batchId,v)})}).next(()=>{const l=[],u=i.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),m=h.key,g=h.value,v=FS();g.forEach(b=>{if(!o.has(b)){const S=HS(t.get(b),r.get(b));S!==null&&v.set(b,S),o=o.add(b)}}),l.push(this.documentOverlayCache.saveOverlays(e,m,v))}return ae.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return je.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):DS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ae.resolve(ca());let u=-1,h=o;return l.next(m=>ae.forEach(m,(g,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),o.get(g)?ae.resolve():this.remoteDocumentCache.getEntry(e,g).next(b=>{h=h.insert(g,b)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,h,m,et())).next(g=>({batchId:u,changes:VS(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new je(t)).next(r=>{let i=Ul();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let l=Ul();return this.indexManager.getCollectionParents(e,o).next(u=>ae.forEach(u,h=>{const m=(function(g,v){return new Ho(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next(g=>{g.forEach((v,b)=>{l=l.insert(v,b)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(l=>{o.forEach((h,m)=>{const g=m.getKey();l.get(g)===null&&(l=l.insert(g,bn.newInvalidDocument(g)))});let u=Ul();return l.forEach((h,m)=>{const g=o.get(h);g!==void 0&&Ql(g.mutation,m,Ar.empty(),St.now()),Wh(t,m)&&(u=u.insert(h,m))}),u})}}class ZI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ae.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Xr(r.createTime)}})(t)),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:qI(r.bundledQuery),readTime:Xr(r.readTime)}})(t)),ae.resolve()}}class e_{constructor(){this.overlays=new Dt(je.comparator),this.qr=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ca();return ae.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const i=ca(),o=t.length+1,l=new je(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const h=u.getNext().value,m=h.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Dt((m,g)=>m-g);const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let g=o.get(m.largestBatchId);g===null&&(g=ca(),o=o.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const u=ca(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((m,g)=>u.set(m,g)),!(u.size()>=i)););return ae.resolve(u)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new NI(t,r));let o=this.qr.get(t);o===void 0&&(o=et(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}class t_{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ae.resolve()}}class Mm{constructor(){this.Qr=new Yt(nn.$r),this.Ur=new Yt(nn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new nn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new nn(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){const t=new je(new xt([])),r=new nn(t,e),i=new nn(t,e+1),o=[];return this.Ur.forEachInRange([r,i],l=>{this.Gr(l),o.push(l.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new je(new xt([])),r=new nn(t,e),i=new nn(t,e+1);let o=et();return this.Ur.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new nn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class nn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return je.comparator(e.key,t.key)||Ze(e.Yr,t.Yr)}static Kr(e,t){return Ze(e.Yr,t.Yr)||je.comparator(e.key,t.key)}}class n_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Yt(nn.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new CI(o,t,r,i);this.mutationQueue.push(l);for(const u of i)this.Zr=this.Zr.add(new nn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ae.resolve(l)}lookupMutationBatch(e,t){return ae.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),o=i<0?0:i;return ae.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?-1:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new nn(t,0),i=new nn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],l=>{const u=this.Xr(l.Yr);o.push(u)}),ae.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Yt(Ze);return t.forEach(i=>{const o=new nn(i,0),l=new nn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],u=>{r=r.add(u.Yr)})}),ae.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;je.isDocumentKey(o)||(o=o.child(""));const l=new nn(new je(o),0);let u=new Yt(Ze);return this.Zr.forEachWhile(h=>{const m=h.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(u=u.add(h.Yr)),!0)},l),ae.resolve(this.ti(u))}ti(e){const t=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){pt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ae.forEach(t.mutations,i=>{const o=new nn(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){const r=new nn(t,0),i=this.Zr.firstAfterOrEqual(r);return ae.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class r_{constructor(e){this.ri=e,this.docs=new Dt(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():bn.newInvalidDocument(t))}getEntries(e,t){let r=js();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():bn.newInvalidDocument(i))}),ae.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=js();const l=t.path,u=new je(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:m,value:{document:g}}=h.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||JN(XN(g),r)<=0||(i.has(g.key)||Wh(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return ae.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Le(9500)}ii(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new s_(this)}getSize(e){return ae.resolve(this.size)}}class s_ extends YI{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class i_{constructor(e){this.persistence=e,this.si=new ka(t=>_m(t),Am),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.oi=0,this._i=new Mm,this.targetCount=0,this.ai=Mo.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ae.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Mo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Pr(t),ae.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.si.forEach((l,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),ae.waitFor(o).next(()=>i)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),ae.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this._i.containsKey(t))}}class iE{constructor(e,t){this.ui={},this.overlays={},this.ci=new zh(0),this.li=!1,this.li=!0,this.hi=new t_,this.referenceDelegate=e(this),this.Pi=new i_(this),this.indexManager=new HI,this.remoteDocumentCache=(function(r){return new r_(r)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new $I(t),this.Ii=new ZI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new e_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new n_(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Se("MemoryPersistence","Starting transaction:",e);const i=new a_(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return ae.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}}class a_ extends ZN{constructor(e){super(),this.currentSequenceNumber=e}}class Lm{constructor(e){this.persistence=e,this.Ri=new Mm,this.Vi=null}static mi(e){return new Lm(e)}get fi(){if(this.Vi)return this.Vi;throw Le(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,r=>{const i=je.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,Ue.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ae.or([()=>ae.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class wh{constructor(e,t){this.persistence=e,this.pi=new ka(r=>(function(i){let o="";for(let l=0;l<i.length;l++)o.length>0&&(o=wx(o)),o=eI(i.get(l),o);return wx(o)})(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=(function(r,i){return new QI(r,i)})(this,t)}static mi(e,t){return new wh(e,t)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return ae.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?ae.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,l=>this.br(e,l,t).next(u=>{u||(r++,o.removeEntry(l,Ue.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ae.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ae.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ae.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ku(e.data.value)),t}br(e,t,r){return ae.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ae.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Om{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=et(),i=et();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Om(e,t.fromCache,r,i)}}class o_{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class l_{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=Nk()?8:(function(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)})(Sn())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ys(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new o_;return this.Ss(e,t,l).next(u=>{if(o.result=u,this.Vs)return this.bs(e,t,l,u.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(mo()<=Je.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",go(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(mo()<=Je.DEBUG&&Se("QueryEngine","Query:",go(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(mo()<=Je.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",go(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zr(t))):ae.resolve())}ys(e,t){if(jx(t))return ae.resolve(null);let r=Zr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=vh(t,null,"F"),r=Zr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=et(...o);return this.ps.getDocuments(e,l).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{const m=this.Ds(t,u);return this.Cs(t,m,l,h.readTime)?this.ys(e,vh(t,null,"F")):this.vs(e,m,t,h)}))})))}ws(e,t,r,i){return jx(t)||i.isEqual(Ue.min())?ae.resolve(null):this.ps.getDocuments(e,r).next(o=>{const l=this.Ds(t,o);return this.Cs(t,l,r,i)?ae.resolve(null):(mo()<=Je.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),go(t)),this.vs(e,l,t,(function(u,h){const m=u.toTimestamp().seconds,g=u.toTimestamp().nanoseconds+1,v=Ue.fromTimestamp(g===1e9?new St(m+1,0):new St(m,g));return new Ni(v,je.empty(),h)})(i,-1)).next(u=>u))})}Ds(e,t){let r=new Yt(LS(e));return t.forEach((i,o)=>{Wh(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return mo()<=Je.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",go(t)),this.ps.getDocumentsMatchingQuery(e,t,Ni.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}const Vm="LocalStore";class c_{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Dt(Ze),this.xs=new ka(o=>_m(o),Am),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}async function aE(n,e){const t=$e(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],u=[];let h=et();for(const m of i){l.push(m.batchId);for(const g of m.mutations)h=h.add(g.key)}for(const m of o){u.push(m.batchId);for(const g of m.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(r,h).next(m=>({Ls:m,removedBatchIds:l,addedBatchIds:u}))})})}function oE(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function u_(n,e){const t=$e(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const u=[];e.targetChanges.forEach((g,v)=>{const b=i.get(v);if(!b)return;u.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,v).next(()=>t.Pi.addMatchingKeys(o,g.addedDocuments,v)));let S=b.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?S=S.withResumeToken(un.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):g.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(g.resumeToken,r)),i=i.insert(v,S),(function(T,_,D){return T.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0})(b,S,g)&&u.push(t.Pi.updateTargetData(o,S))});let h=js(),m=et();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push((function(g,v,b){let S=et(),T=et();return b.forEach(_=>S=S.add(_)),v.getEntries(g,S).next(_=>{let D=js();return b.forEach((O,z)=>{const P=_.get(O);z.isFoundDocument()!==P.isFoundDocument()&&(T=T.add(O)),z.isNoDocument()&&z.version.isEqual(Ue.min())?(v.removeEntry(O,z.readTime),D=D.insert(O,z)):!P.isValidDocument()||z.version.compareTo(P.version)>0||z.version.compareTo(P.version)===0&&P.hasPendingWrites?(v.addEntry(z),D=D.insert(O,z)):Se(Vm,"Ignoring outdated watch update for ",O,". Current version:",P.version," Watch version:",z.version)}),{ks:D,qs:T}})})(o,l,e.documentUpdates).next(g=>{h=g.ks,m=g.qs})),!r.isEqual(Ue.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next(v=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(g)}return ae.waitFor(u).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,h,m)).next(()=>h)}).then(o=>(t.Ms=i,o))}function h_(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}async function Mp(n,e,t){const r=$e(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!qo(l))throw l;Se(Vm,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Hx(n,e,t){const r=$e(n);let i=Ue.min(),o=et();return r.persistence.runTransaction("Execute query","readwrite",l=>(function(u,h,m){const g=$e(u),v=g.xs.get(m);return v!==void 0?ae.resolve(g.Ms.get(v)):g.Pi.getTargetData(h,m)})(r,l,Zr(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,u.targetId).next(h=>{o=h})}).next(()=>r.Fs.getDocumentsMatchingQuery(l,e,t?i:Ue.min(),t?o:et())).next(u=>((function(h,m,g){let v=h.Os.get(m)||Ue.min();g.forEach((b,S)=>{S.readTime.compareTo(v)>0&&(v=S.readTime)}),h.Os.set(m,v)})(r,(function(h){return h.collectionGroup||(h.path.length%2==1?h.path.lastSegment():h.path.get(h.path.length-2))})(e),u),{documents:u,Qs:o})))}class Wx{constructor(){this.activeTargetIds=yI}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class d_{constructor(){this.Mo=new Wx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Wx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class f_{Oo(e){}shutdown(){}}const Gx="ConnectivityMonitor";class Kx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Se(Gx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Se(Gx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Du=null;function Lp(){return Du===null?Du=268435456+Math.round(2147483648*Math.random()):Du++,"0x"+Du.toString(16)}const $f="RestConnection",p_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class m_{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===mh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){const l=Lp(),u=this.zo(e,t.toUriEncodedString());Se($f,`Sending RPC '${e}' ${l}:`,u,r);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,i,o);const{host:m}=new URL(u),g=Uo(m);return this.Jo(e,u,h,r,g).then(v=>(Se($f,`Received RPC '${e}' ${l}: `,v),v),v=>{throw Po($f,`RPC '${e}' ${l} failed with error: `,v,"url: ",u,"request:",r),v})}Ho(e,t,r,i,o,l){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Bo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){const r=p_[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class g_{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const yn="WebChannelConnection";class y_ extends m_{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const l=Lp();return new Promise((u,h)=>{const m=new uS;m.setWithCredentials(!0),m.listenOnce(hS.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Gu.NO_ERROR:const v=m.getResponseJson();Se(yn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),u(v);break;case Gu.TIMEOUT:Se(yn,`RPC '${e}' ${l} timed out`),h(new ye(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Gu.HTTP_ERROR:const b=m.getStatus();if(Se(yn,`RPC '${e}' ${l} failed with status:`,b,"response text:",m.getResponseText()),b>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const T=S?.error;if(T&&T.status&&T.message){const _=(function(D){const O=D.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(O)>=0?O:ie.UNKNOWN})(T.status);h(new ye(_,T.message))}else h(new ye(ie.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new ye(ie.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{l_:e,streamId:l,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{Se(yn,`RPC '${e}' ${l} completed.`)}});const g=JSON.stringify(i);Se(yn,`RPC '${e}' ${l} sending request:`,i),m.send(t,"POST",g,r,15)})}T_(e,t,r){const i=Lp(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=pS(),u=fS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(h.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const g=o.join("");Se(yn,`Creating RPC '${e}' stream ${i}: ${g}`,h);const v=l.createWebChannel(g,h);this.I_(v);let b=!1,S=!1;const T=new g_({Yo:D=>{S?Se(yn,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(b||(Se(yn,`Opening RPC '${e}' stream ${i} transport.`),v.open(),b=!0),Se(yn,`RPC '${e}' stream ${i} sending:`,D),v.send(D))},Zo:()=>v.close()}),_=(D,O,z)=>{D.listen(O,P=>{try{z(P)}catch(N){setTimeout(()=>{throw N},0)}})};return _(v,Fl.EventType.OPEN,()=>{S||(Se(yn,`RPC '${e}' stream ${i} transport opened.`),T.o_())}),_(v,Fl.EventType.CLOSE,()=>{S||(S=!0,Se(yn,`RPC '${e}' stream ${i} transport closed`),T.a_(),this.E_(v))}),_(v,Fl.EventType.ERROR,D=>{S||(S=!0,Po(yn,`RPC '${e}' stream ${i} transport errored. Name:`,D.name,"Message:",D.message),T.a_(new ye(ie.UNAVAILABLE,"The operation could not be completed")))}),_(v,Fl.EventType.MESSAGE,D=>{if(!S){const O=D.data[0];pt(!!O,16349);const z=O,P=z?.error||z[0]?.error;if(P){Se(yn,`RPC '${e}' stream ${i} received error:`,P);const N=P.status;let I=(function(R){const C=$t[R];if(C!==void 0)return KS(C)})(N),A=P.message;I===void 0&&(I=ie.INTERNAL,A="Unknown error status: "+N+" with message "+P.message),S=!0,T.a_(new ye(I,A)),v.close()}else Se(yn,`RPC '${e}' stream ${i} received:`,O),T.u_(O)}}),_(u,dS.STAT_EVENT,D=>{D.stat===Tp.PROXY?Se(yn,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===Tp.NOPROXY&&Se(yn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function qf(){return typeof document<"u"?document:null}function Yh(n){return new DI(n,!0)}class lE{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Qx="PersistentStream";class cE{constructor(e,t,r,i,o,l,u,h){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Ps(t.toString()),Ps("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{const i=new ye(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Se(Qx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Se(Qx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class v_ extends cE{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=(function(i,o){let l;if("targetChange"in o){o.targetChange;const u=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:Le(39313,{state:b})})(o.targetChange.targetChangeType||"NO_CHANGE"),h=o.targetChange.targetIds||[],m=(function(b,S){return b.useProto3Json?(pt(S===void 0||typeof S=="string",58123),un.fromBase64String(S||"")):(pt(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),un.fromUint8Array(S||new Uint8Array))})(i,o.targetChange.resumeToken),g=o.targetChange.cause,v=g&&(function(b){const S=b.code===void 0?ie.UNKNOWN:KS(b.code);return new ye(S,b.message||"")})(g);l=new YS(u,h,m,v||null)}else if("documentChange"in o){o.documentChange;const u=o.documentChange;u.document,u.document.name,u.document.updateTime;const h=Bf(i,u.document.name),m=Xr(u.document.updateTime),g=u.document.createTime?Xr(u.document.createTime):Ue.min(),v=new ar({mapValue:{fields:u.document.fields}}),b=bn.newFoundDocument(h,m,g,v),S=u.targetIds||[],T=u.removedTargetIds||[];l=new Xu(S,T,b.key,b)}else if("documentDelete"in o){o.documentDelete;const u=o.documentDelete;u.document;const h=Bf(i,u.document),m=u.readTime?Xr(u.readTime):Ue.min(),g=bn.newNoDocument(h,m),v=u.removedTargetIds||[];l=new Xu([],v,g.key,g)}else if("documentRemove"in o){o.documentRemove;const u=o.documentRemove;u.document;const h=Bf(i,u.document),m=u.removedTargetIds||[];l=new Xu([],m,h,null)}else{if(!("filter"in o))return Le(11601,{Rt:o});{o.filter;const u=o.filter;u.targetId;const{count:h=0,unchangedNames:m}=u,g=new II(h,m),v=u.targetId;l=new QS(v,g)}}return l})(this.serializer,e),r=(function(i){if(!("targetChange"in i))return Ue.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ue.min():o.readTime?Xr(o.readTime):Ue.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Dp(this.serializer),t.addTarget=(function(i,o){let l;const u=o.target;if(l=_p(u)?{documents:LI(i,u)}:{query:OI(i,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=XS(i,o.resumeToken);const h=Pp(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(Ue.min())>0){l.readTime=bh(i,o.snapshotVersion.toTimestamp());const h=Pp(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l})(this.serializer,e);const r=(function(i,o){const l=(function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:u})}})(o.purpose);return l==null?null:{"goog-listen-tags":l}})(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Dp(this.serializer),t.removeTarget=e,this.q_(t)}}class x_ extends cE{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=(function(i,o){return i&&i.length>0?(pt(o!==void 0,14353),i.map(l=>(function(u,h){let m=u.updateTime?Xr(u.updateTime):Xr(h);return m.isEqual(Ue.min())&&(m=Xr(h)),new SI(m,u.transformResults||[])})(l,o))):[]})(e.writeResults,e.commitTime),r=Xr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Dp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>(function(i,o){let l;if(o instanceof wc)l={update:zx(i,o.key,o.value)};else if(o instanceof GS)l={delete:Rp(i,o.key)};else if(o instanceof Ca)l={update:zx(i,o.key,o.data),updateMask:BI(o.fieldMask)};else{if(!(o instanceof kI))return Le(16599,{Vt:o.type});l={verify:Rp(i,o.key)}}return o.fieldTransforms.length>0&&(l.updateTransforms=o.fieldTransforms.map(u=>(function(h,m){const g=m.transform;if(g instanceof cc)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof uc)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof hc)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof xh)return{fieldPath:m.field.canonicalString(),increment:g.Ae};throw Le(20930,{transform:m.transform})})(0,u))),o.precondition.isNone||(l.currentDocument=(function(u,h){return h.updateTime!==void 0?{updateTime:MI(u,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:Le(27497)})(i,o.precondition)),l})(this.serializer,r))};this.q_(t)}}class b_{}class w_ extends b_{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ye(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Go(e,jp(t,r),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(ie.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Ho(e,jp(t,r),i,l,u,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(ie.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class S_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ps(t),this.aa=!1):Se("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ba="RemoteStore";class E_{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(l=>{r.enqueueAndForget(async()=>{Na(this)&&(Se(ba,"Restarting streams for network reachability change."),await(async function(u){const h=$e(u);h.Ea.add(4),await dc(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Xh(h)})(this))})}),this.Ra=new S_(r,i)}}async function Xh(n){if(Na(n))for(const e of n.da)await e(!0)}async function dc(n){for(const e of n.da)await e(!1)}function uE(n,e){const t=$e(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Bm(t)?zm(t):Wo(t).O_()&&Um(t,e))}function Fm(n,e){const t=$e(n),r=Wo(t);t.Ia.delete(e),r.O_()&&hE(t,e),t.Ia.size===0&&(r.O_()?r.L_():Na(t)&&t.Ra.set("Unknown"))}function Um(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wo(n).Y_(e)}function hE(n,e){n.Va.Ue(e),Wo(n).Z_(e)}function zm(n){n.Va=new AI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Wo(n).start(),n.Ra.ua()}function Bm(n){return Na(n)&&!Wo(n).x_()&&n.Ia.size>0}function Na(n){return $e(n).Ea.size===0}function dE(n){n.Va=void 0}async function T_(n){n.Ra.set("Online")}async function k_(n){n.Ia.forEach((e,t)=>{Um(n,e)})}async function C_(n,e){dE(n),Bm(n)?(n.Ra.ha(e),zm(n)):n.Ra.set("Unknown")}async function N_(n,e,t){if(n.Ra.set("Online"),e instanceof YS&&e.state===2&&e.cause)try{await(async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ia.delete(l),r.Va.removeTarget(l))})(n,e)}catch(r){Se(ba,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Sh(n,r)}else if(e instanceof Xu?n.Va.Ze(e):e instanceof QS?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ue.min()))try{const r=await oE(n.localStore);t.compareTo(r)>=0&&await(function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const m=i.Ia.get(h);m&&i.Ia.set(h,m.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const m=i.Ia.get(u);if(!m)return;i.Ia.set(u,m.withResumeToken(un.EMPTY_BYTE_STRING,m.snapshotVersion)),hE(i,u);const g=new gi(m.target,u,h,m.sequenceNumber);Um(i,g)}),i.remoteSyncer.applyRemoteEvent(l)})(n,t)}catch(r){Se(ba,"Failed to raise snapshot:",r),await Sh(n,r)}}async function Sh(n,e,t){if(!qo(e))throw e;n.Ea.add(1),await dc(n),n.Ra.set("Offline"),t||(t=()=>oE(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Se(ba,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Xh(n)})}function fE(n,e){return e().catch(t=>Sh(n,t,e))}async function Jh(n){const e=$e(n),t=Pi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:-1;for(;I_(e);)try{const i=await h_(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,__(e,i)}catch(i){await Sh(e,i)}pE(e)&&mE(e)}function I_(n){return Na(n)&&n.Ta.length<10}function __(n,e){n.Ta.push(e);const t=Pi(n);t.O_()&&t.X_&&t.ea(e.mutations)}function pE(n){return Na(n)&&!Pi(n).x_()&&n.Ta.length>0}function mE(n){Pi(n).start()}async function A_(n){Pi(n).ra()}async function P_(n){const e=Pi(n);for(const t of n.Ta)e.ea(t.mutations)}async function j_(n,e,t){const r=n.Ta.shift(),i=jm.from(r,e,t);await fE(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Jh(n)}async function R_(n,e){e&&Pi(n).X_&&await(async function(t,r){if((function(i){return(function(o){switch(o){case ie.OK:return Le(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Le(15467,{code:o})}})(i)&&i!==ie.ABORTED})(r.code)){const i=t.Ta.shift();Pi(t).B_(),await fE(t,()=>t.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Jh(t)}})(n,e),pE(n)&&mE(n)}async function Yx(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),Se(ba,"RemoteStore received new credentials");const r=Na(t);t.Ea.add(3),await dc(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Xh(t)}function Wo(n){return n.ma||(n.ma=(function(e,t,r){const i=$e(e);return i.sa(),new v_(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(n.datastore,n.asyncQueue,{Xo:T_.bind(null,n),t_:k_.bind(null,n),r_:C_.bind(null,n),H_:N_.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),Bm(n)?zm(n):n.Ra.set("Unknown")):(await n.ma.stop(),dE(n))})),n.ma}function Pi(n){return n.fa||(n.fa=(function(e,t,r){const i=$e(e);return i.sa(),new x_(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:A_.bind(null,n),r_:R_.bind(null,n),ta:P_.bind(null,n),na:j_.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await Jh(n)):(await n.fa.stop(),n.Ta.length>0&&(Se(ba,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}class $m{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,u=new $m(e,t,l,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qm(n,e){if(Ps("AsyncQueue",`${e}: ${n}`),qo(n))return new ye(ie.UNAVAILABLE,`${e}: ${n}`);throw n}class Io{static emptySet(e){return new Io(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=Ul(),this.sortedSet=new Dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Io)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Io;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Xx{constructor(){this.ga=new Dt(je.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Le(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class Lo{constructor(e,t,r,i,o,l,u,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach(u=>{l.push({type:0,doc:u})}),new Lo(e,t,Io.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class D_{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class M_{constructor(){this.queries=Jx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,t){const r=$e(e),i=r.queries;r.queries=Jx(),i.forEach((o,l)=>{for(const u of l.Sa)u.onError(t)})})(this,new ye(ie.ABORTED,"Firestore shutting down"))}}function Jx(){return new ka(n=>MS(n),Hh)}async function Hm(n,e){const t=$e(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new D_,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const u=qm(l,`Initialization of query '${go(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Gm(t)}async function Wm(n,e){const t=$e(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function L_(n,e){const t=$e(n);let r=!1;for(const i of e){const o=i.query,l=t.queries.get(o);if(l){for(const u of l.Sa)u.Fa(i)&&(r=!0);l.wa=i}}r&&Gm(t)}function O_(n,e,t){const r=$e(n),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function Gm(n){n.Ca.forEach(e=>{e.next()})}var Op,Zx;(Zx=Op||(Op={})).Ma="default",Zx.Cache="cache";class Km{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Lo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Op.Cache}}class gE{constructor(e){this.key=e}}class yE{constructor(e){this.key=e}}class V_{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=et(),this.mutatedKeys=et(),this.eu=LS(e),this.tu=new Io(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Xx,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,u=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,v)=>{const b=i.get(g),S=Wh(this.query,v)?v:null,T=!!b&&this.mutatedKeys.has(b.key),_=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let D=!1;b&&S?b.data.isEqual(S.data)?T!==_&&(r.track({type:3,doc:S}),D=!0):this.su(b,S)||(r.track({type:2,doc:S}),D=!0,(h&&this.eu(S,h)>0||m&&this.eu(S,m)<0)&&(u=!0)):!b&&S?(r.track({type:0,doc:S}),D=!0):b&&!S&&(r.track({type:1,doc:b}),D=!0,(h||m)&&(u=!0)),D&&(S?(l=l.add(S),o=_?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{tu:l,iu:r,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((g,v)=>(function(b,S){const T=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{Rt:_})}};return T(b)-T(S)})(g.type,v.type)||this.eu(g.doc,v.doc)),this.ou(r),i=i??!1;const u=t&&!i?this._u():[],h=this.Xa.size===0&&this.current&&!i?1:0,m=h!==this.Za;return this.Za=h,l.length!==0||m?{snapshot:new Lo(this.query,e.tu,o,l,e.mutatedKeys,h===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Xx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=et(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new yE(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new gE(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=et();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Lo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Qm="SyncEngine";class F_{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class U_{constructor(e){this.key=e,this.hu=!1}}class z_{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new ka(u=>MS(u),Hh),this.Iu=new Map,this.Eu=new Set,this.du=new Dt(je.comparator),this.Au=new Map,this.Ru=new Mm,this.Vu={},this.mu=new Map,this.fu=Mo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function B_(n,e,t=!0){const r=EE(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await vE(r,e,t,!0),i}async function $_(n,e){const t=EE(n);await vE(t,e,!0,!1)}async function vE(n,e,t,r){const i=await(function(h,m){const g=$e(h);return g.persistence.runTransaction("Allocate target","readwrite",v=>{let b;return g.Pi.getTargetData(v,m).next(S=>S?(b=S,ae.resolve(b)):g.Pi.allocateTargetId(v).next(T=>(b=new gi(m,T,"TargetPurposeListen",v.currentSequenceNumber),g.Pi.addTargetData(v,b).next(()=>b))))}).then(v=>{const b=g.Ms.get(v.targetId);return(b===null||v.snapshotVersion.compareTo(b.snapshotVersion)>0)&&(g.Ms=g.Ms.insert(v.targetId,v),g.xs.set(m,v.targetId)),v})})(n.localStore,Zr(e)),o=i.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let u;return r&&(u=await(async function(h,m,g,v,b){h.pu=(P,N,I)=>(async function(A,R,C,V){let fe=R.view.ru(C);fe.Cs&&(fe=await Hx(A.localStore,R.query,!1).then(({documents:Ie})=>R.view.ru(Ie,fe)));const Te=V&&V.targetChanges.get(R.targetId),Re=V&&V.targetMismatches.get(R.targetId)!=null,ke=R.view.applyChanges(fe,A.isPrimaryClient,Te,Re);return t1(A,R.targetId,ke.au),ke.snapshot})(h,P,N,I);const S=await Hx(h.localStore,m,!0),T=new V_(m,S.Qs),_=T.ru(S.documents),D=Sc.createSynthesizedTargetChangeForCurrentChange(g,v&&h.onlineState!=="Offline",b),O=T.applyChanges(_,h.isPrimaryClient,D);t1(h,g,O.au);const z=new F_(m,g,T);return h.Tu.set(m,z),h.Iu.has(g)?h.Iu.get(g).push(m):h.Iu.set(g,[m]),O.snapshot})(n,e,o,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&uE(n.remoteStore,i),u}async function q_(n,e,t){const r=$e(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(l=>!Hh(l,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Mp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Fm(r.remoteStore,i.targetId),Vp(r,i.targetId)}).catch($o)):(Vp(r,i.targetId),await Mp(r.localStore,i.targetId,!0))}async function H_(n,e){const t=$e(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Fm(t.remoteStore,r.targetId))}async function W_(n,e,t){const r=(function(i){const o=$e(i);return o.remoteStore.remoteSyncer.applySuccessfulWrite=K_.bind(null,o),o.remoteStore.remoteSyncer.rejectFailedWrite=Q_.bind(null,o),o})(n);try{const i=await(function(o,l){const u=$e(o),h=St.now(),m=l.reduce((b,S)=>b.add(S.key),et());let g,v;return u.persistence.runTransaction("Locally write mutations","readwrite",b=>{let S=js(),T=et();return u.Ns.getEntries(b,m).next(_=>{S=_,S.forEach((D,O)=>{O.isValidDocument()||(T=T.add(D))})}).next(()=>u.localDocuments.getOverlayedDocuments(b,S)).next(_=>{g=_;const D=[];for(const O of l){const z=TI(O,g.get(O.key).overlayedDocument);z!=null&&D.push(new Ca(O.key,z,NS(z.value.mapValue),es.exists(!0)))}return u.mutationQueue.addMutationBatch(b,h,D,l)}).next(_=>{v=_;const D=_.applyToLocalDocumentSet(g,T);return u.documentOverlayCache.saveOverlays(b,_.batchId,D)})}).then(()=>({batchId:v.batchId,changes:VS(g)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,l,u){let h=o.Vu[o.currentUser.toKey()];h||(h=new Dt(Ze)),h=h.insert(l,u),o.Vu[o.currentUser.toKey()]=h})(r,i.batchId,t),await Ec(r,i.changes),await Jh(r.remoteStore)}catch(i){const o=qm(i,"Failed to persist write");t.reject(o)}}async function xE(n,e){const t=$e(n);try{const r=await u_(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t.Au.get(o);l&&(pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?pt(l.hu,14607):i.removedDocuments.size>0&&(pt(l.hu,42227),l.hu=!1))}),await Ec(t,r,e)}catch(r){await $o(r)}}function e1(n,e,t){const r=$e(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach((o,l)=>{const u=l.view.va(e);u.snapshot&&i.push(u.snapshot)}),(function(o,l){const u=$e(o);u.onlineState=l;let h=!1;u.queries.forEach((m,g)=>{for(const v of g.Sa)v.va(l)&&(h=!0)}),h&&Gm(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function G_(n,e,t){const r=$e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let l=new Dt(je.comparator);l=l.insert(o,bn.newNoDocument(o,Ue.min()));const u=et().add(o),h=new Qh(Ue.min(),new Map,new Dt(Ze),l,u);await xE(r,h),r.du=r.du.remove(o),r.Au.delete(e),Ym(r)}else await Mp(r.localStore,e,!1).then(()=>Vp(r,e,t)).catch($o)}async function K_(n,e){const t=$e(n),r=e.batch.batchId;try{const i=await(function(o,l){const u=$e(o);return u.persistence.runTransaction("Acknowledge batch","readwrite-primary",h=>{const m=l.batch.keys(),g=u.Ns.newChangeBuffer({trackRemovals:!0});return(function(v,b,S,T){const _=S.batch,D=_.keys();let O=ae.resolve();return D.forEach(z=>{O=O.next(()=>T.getEntry(b,z)).next(P=>{const N=S.docVersions.get(z);pt(N!==null,48541),P.version.compareTo(N)<0&&(_.applyToRemoteDocument(P,S),P.isValidDocument()&&(P.setReadTime(S.commitVersion),T.addEntry(P)))})}),O.next(()=>v.mutationQueue.removeMutationBatch(b,_))})(u,h,l,g).next(()=>g.apply(h)).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,m,l.batch.batchId)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,(function(v){let b=et();for(let S=0;S<v.mutationResults.length;++S)v.mutationResults[S].transformResults.length>0&&(b=b.add(v.batch.mutations[S].key));return b})(l))).next(()=>u.localDocuments.getDocuments(h,m))})})(t.localStore,e);wE(t,r,null),bE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ec(t,i)}catch(i){await $o(i)}}async function Q_(n,e,t){const r=$e(n);try{const i=await(function(o,l){const u=$e(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(pt(g!==null,37113),m=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>u.localDocuments.getDocuments(h,m))})})(r.localStore,e);wE(r,e,t),bE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ec(r,i)}catch(i){await $o(i)}}function bE(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function wE(n,e,t){const r=$e(n);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Vp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||SE(n,r)})}function SE(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Fm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Ym(n))}function t1(n,e,t){for(const r of t)r instanceof gE?(n.Ru.addReference(r.key,e),Y_(n,r)):r instanceof yE?(Se(Qm,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||SE(n,r.key)):Le(19791,{wu:r})}function Y_(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Se(Qm,"New document in limbo: "+t),n.Eu.add(r),Ym(n))}function Ym(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new je(xt.fromString(e)),r=n.fu.next();n.Au.set(r,new U_(t)),n.du=n.du.insert(t,r),uE(n.remoteStore,new gi(Zr(qh(t.path)),r,"TargetPurposeLimboResolution",zh.ce))}}async function Ec(n,e,t){const r=$e(n),i=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach((u,h)=>{l.push(r.pu(h,e,t).then(m=>{if((m||t)&&r.isPrimaryClient){const g=m?!m.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(m){i.push(m);const g=Om.As(h.targetId,m);o.push(g)}}))}),await Promise.all(l),r.Pu.H_(i),await(async function(u,h){const m=$e(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>ae.forEach(h,v=>ae.forEach(v.Es,b=>m.persistence.referenceDelegate.addReference(g,v.targetId,b)).next(()=>ae.forEach(v.ds,b=>m.persistence.referenceDelegate.removeReference(g,v.targetId,b)))))}catch(g){if(!qo(g))throw g;Se(Vm,"Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const b=m.Ms.get(v),S=b.snapshotVersion,T=b.withLastLimboFreeSnapshotVersion(S);m.Ms=m.Ms.insert(v,T)}}})(r.localStore,o))}async function X_(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){Se(Qm,"User change. New user:",e.toKey());const r=await aE(t.localStore,e);t.currentUser=e,(function(i,o){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new ye(ie.CANCELLED,o))})}),i.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ec(t,r.Ls)}}function J_(n,e){const t=$e(n),r=t.Au.get(e);if(r&&r.hu)return et().add(r.key);{let i=et();const o=t.Iu.get(e);if(!o)return i;for(const l of o){const u=t.Tu.get(l);i=i.unionWith(u.view.nu)}return i}}function EE(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=G_.bind(null,e),e.Pu.H_=L_.bind(null,e.eventManager),e.Pu.yu=O_.bind(null,e.eventManager),e}class Eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return(function(t,r,i,o){return new c_(t,r,i,o)})(this.persistence,new l_,e.initialUser,this.serializer)}Cu(e){return new iE(Lm.mi,this.serializer)}Du(e){return new d_}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eh.provider={build:()=>new Eh};class Z_ extends Eh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){pt(this.persistence.referenceDelegate instanceof wh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new KI(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new iE(r=>wh.mi(r,t),this.serializer)}}class Fp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>e1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=X_.bind(null,this.syncEngine),await(async function(r,i){const o=$e(r);i?(o.Ea.delete(2),await Xh(o)):i||(o.Ea.add(2),await dc(o),o.Ra.set("Unknown"))})(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new M_}createDatastore(e){const t=Yh(e.databaseInfo.databaseId),r=(function(i){return new y_(i)})(e.databaseInfo);return(function(i,o,l,u){return new w_(i,o,l,u)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(t,r,i,o,l){return new E_(t,r,i,o,l)})(this.localStore,this.datastore,e.asyncQueue,t=>e1(this.syncEngine,t,0),Kx.v()?new Kx:new f_)}createSyncEngine(e,t){return(function(r,i,o,l,u,h,m){const g=new z_(r,i,o,l,u,h);return m&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(e){const t=$e(e);Se(ba,"RemoteStore shutting down."),t.Ea.add(5),await dc(t),t.Aa.shutdown(),t.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Fp.provider={build:()=>new Fp};class Xm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ps("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Si="FirestoreClient";class eA{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=xn.UNAUTHENTICATED,this.clientId=Cm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{Se(Si,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(Se(Si,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=qm(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hf(n,e){n.asyncQueue.verifyOperationInProgress(),Se(Si,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await aE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function n1(n,e){n.asyncQueue.verifyOperationInProgress();const t=await(async function(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Se(Si,"Using user provided OfflineComponentProvider");try{await Hf(r,r._uninitializedComponentsProvider._offline)}catch(i){const o=i;if(!(function(l){return l.name==="FirebaseError"?l.code===ie.FAILED_PRECONDITION||l.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(o))throw o;Po("Error using user provided cache. Falling back to memory cache: "+o),await Hf(r,new Eh)}}else Se(Si,"Using default OfflineComponentProvider"),await Hf(r,new Z_(void 0));return r._offlineComponents})(n);Se(Si,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Yx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Yx(e.remoteStore,i)),n._onlineComponents=e}async function TE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Se(Si,"Using user provided OnlineComponentProvider"),await n1(n,n._uninitializedComponentsProvider._online)):(Se(Si,"Using default OnlineComponentProvider"),await n1(n,new Fp))),n._onlineComponents}async function Th(n){const e=await TE(n),t=e.eventManager;return t.onListen=B_.bind(null,e.syncEngine),t.onUnlisten=q_.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$_.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=H_.bind(null,e.syncEngine),t}function kE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const r1=new Map,CE="firestore.googleapis.com",s1=!0;class i1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CE,this.ssl=s1}else this.host=e.host,this.ssl=e.ssl??s1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ye(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(t,r,i,o){if(r===!0&&o===!0)throw new ye(ie.INVALID_ARGUMENT,`${t} and ${i} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kE(e.experimentalLongPollingOptions??{}),(function(t){if(t.timeoutSeconds!==void 0){if(isNaN(t.timeoutSeconds))throw new ye(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new ye(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new ye(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(t,r){return t.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zh{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(t){if(!t)return new zN;switch(t.type){case"firstParty":return new HN(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ye(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const t=r1.get(e);t&&(Se("ComponentProvider","Removing Datastore"),r1.delete(e),t.terminate())})(this),Promise.resolve()}}function tA(n,e,t,r={}){n=jr(n,Zh);const i=Uo(e),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;i&&(iw(`https://${u}`),aw("Firestore",!0)),o.host!==CE&&o.host!==u&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:i,emulatorOptions:r};if(!Ci(h,l)&&(n._setSettings(h),r.mockUserToken)){let m,g;if(typeof r.mockUserToken=="string")m=r.mockUserToken,g=xn.MOCK_USER;else{m=(function(b,S){if(b.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const T=S||"demo-project",_=b.iat||0,D=b.sub||b.user_id;if(!D)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const O={iss:`https://securetoken.google.com/${T}`,aud:T,iat:_,exp:_+3600,auth_time:_,sub:D,user_id:D,firebase:{sign_in_provider:"custom",identities:{}},...b};return[rh(JSON.stringify({alg:"none",type:"JWT"})),rh(JSON.stringify(O)),""].join(".")})(r.mockUserToken,n._app?.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new ye(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new xn(v)}n._authCredentials=new BN(new gS(m,g))}}class Ms{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ms(this.firestore,e,this._query)}}class zt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zt(this.firestore,e,this._key)}toJSON(){return{type:zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(bc(t,zt._jsonSchema))return new zt(e,r||null,new je(xt.fromString(t.referencePath)))}}zt._jsonSchemaVersion="firestore/documentReference/1.0",zt._jsonSchema={type:Wt("string",zt._jsonSchemaVersion),referencePath:Wt("string")};class Ei extends Ms{constructor(e,t,r){super(e,t,qh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new je(e))}withConverter(e){return new Ei(this.firestore,e,this._path)}}function or(n,e,...t){if(n=Ot(n),yS("collection","path",e),n instanceof Zh){const r=xt.fromString(e,...t);return vx(r),new Ei(n,null,r)}{if(!(n instanceof zt||n instanceof Ei))throw new ye(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xt.fromString(e,...t));return vx(r),new Ei(n.firestore,null,r)}}function Rt(n,e,...t){if(n=Ot(n),arguments.length===1&&(e=Cm.newId()),yS("doc","path",e),n instanceof Zh){const r=xt.fromString(e,...t);return yx(r),new zt(n,null,new je(r))}{if(!(n instanceof zt||n instanceof Ei))throw new ye(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xt.fromString(e,...t));return yx(r),new zt(n.firestore,n instanceof Ei?n.converter:null,new je(r))}}const a1="AsyncQueue";class o1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lE(this,"async_queue_retry"),this._c=()=>{const r=qf();r&&Se(a1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=qf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=qf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new ks;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!qo(e))throw e;Se(a1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ps("INTERNAL UNHANDLED ERROR: ",l1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=$m.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&Le(47125,{Pc:l1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function l1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function c1(n){return(function(e,t){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of t)if(i in r&&typeof r[i]=="function")return!0;return!1})(n,["next","error","complete"])}class wa extends Zh{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new o1,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new o1(e),this._firestoreClient=void 0,await e}}}function ed(n){if(n._terminated)throw new ye(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||(function(e){const t=e._freezeSettings(),r=(function(i,o,l,u){return new nI(i,o,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,kE(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new eA(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&(function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(e._componentsProvider))})(n),n._firestoreClient}class lr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lr(un.fromBase64String(e))}catch(t){throw new ye(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new lr(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:lr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bc(e,lr._jsonSchema))return lr.fromBase64String(e.bytes)}}lr._jsonSchemaVersion="firestore/bytes/1.0",lr._jsonSchema={type:Wt("string",lr._jsonSchemaVersion),bytes:Wt("string")};class Jm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zm{constructor(e){this._methodName=e}}class ts{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ts._jsonSchemaVersion}}static fromJSON(e){if(bc(e,ts._jsonSchema))return new ts(e.latitude,e.longitude)}}ts._jsonSchemaVersion="firestore/geoPoint/1.0",ts._jsonSchema={type:Wt("string",ts._jsonSchemaVersion),latitude:Wt("number"),longitude:Wt("number")};class ns{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(t,r){if(t.length!==r.length)return!1;for(let i=0;i<t.length;++i)if(t[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ns._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bc(e,ns._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new ns(e.vectorValues);throw new ye(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ns._jsonSchemaVersion="firestore/vectorValue/1.0",ns._jsonSchema={type:Wt("string",ns._jsonSchemaVersion),vectorValues:Wt("object")};const nA=/^__.*__$/;class rA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ca(e,this.data,this.fieldMask,t,this.fieldTransforms):new wc(e,this.data,t,this.fieldTransforms)}}function NE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{Ac:n})}}class eg{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new eg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return kh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(NE(this.Ac)&&nA.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class sA{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Yh(e)}Cc(e,t,r,i=!1){return new eg({Ac:e,methodName:t,Dc:r,path:cn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tg(n){const e=n._freezeSettings(),t=Yh(n._databaseId);return new sA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function IE(n,e,t,r,i,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);PE("Data must be an object, but it was:",l,r);const u=_E(r,l);let h,m;if(o.merge)h=new Ar(l.fieldMask),m=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const b=iA(e,v,t);if(!l.contains(b))throw new ye(ie.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);oA(g,b)||g.push(b)}h=new Ar(g),m=l.fieldTransforms.filter(v=>h.covers(v.field))}else h=null,m=l.fieldTransforms;return new rA(new ar(u),h,m)}class ng extends Zm{_toFieldTransform(e){return new wI(e.path,new cc)}isEqual(e){return e instanceof ng}}function rg(n,e){if(AE(n=Ot(n)))return PE("Unsupported field value:",e,n),_E(n,e);if(n instanceof Zm)return(function(t,r){if(!NE(r.Ac))throw r.Sc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(t,r){const i=[];let o=0;for(const l of t){let u=rg(l,r.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}})(n,e)}return(function(t,r){if((t=Ot(t))===null)return{nullValue:"NULL_VALUE"};if(typeof t=="number")return vI(r.serializer,t);if(typeof t=="boolean")return{booleanValue:t};if(typeof t=="string")return{stringValue:t};if(t instanceof Date){const i=St.fromDate(t);return{timestampValue:bh(r.serializer,i)}}if(t instanceof St){const i=new St(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:bh(r.serializer,i)}}if(t instanceof ts)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof lr)return{bytesValue:XS(r.serializer,t._byteString)};if(t instanceof zt){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Dm(t.firestore._databaseId||r.databaseId,t._key.path)}}if(t instanceof ns)return(function(i,o){return{mapValue:{fields:{[kS]:{stringValue:CS},[gh]:{arrayValue:{values:i.toArray().map(l=>{if(typeof l!="number")throw o.Sc("VectorValues must only contain numeric values.");return Pm(o.serializer,l)})}}}}}})(t,r);throw r.Sc(`Unsupported field value: ${Uh(t)}`)})(n,e)}function _E(n,e){const t={};return xS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ta(n,(r,i)=>{const o=rg(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function AE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof St||n instanceof ts||n instanceof lr||n instanceof zt||n instanceof Zm||n instanceof ns)}function PE(n,e,t){if(!AE(t)||!vS(t)){const r=Uh(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function iA(n,e,t){if((e=Ot(e))instanceof Jm)return e._internalPath;if(typeof e=="string")return jE(n,e);throw kh("Field path arguments must be of type string or ",n,!1,void 0,t)}const aA=new RegExp("[~\\*/\\[\\]]");function jE(n,e,t){if(e.search(aA)>=0)throw kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jm(...e.split("."))._internalPath}catch{throw kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kh(n,e,t,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${i}`),h+=")"),new ye(ie.INVALID_ARGUMENT,u+n+h)}function oA(n,e){return n.some(t=>t.isEqual(e))}class RE{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class lA extends RE{data(){return super.data()}}function sg(n,e){return typeof e=="string"?jE(n,e):e instanceof Jm?e._internalPath:e._delegate._internalPath}function DE(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ig{}class ag extends ig{}function Ti(n,e,...t){let r=[];e instanceof ig&&r.push(e),r=r.concat(t),(function(i){const o=i.filter(u=>u instanceof lg).length,l=i.filter(u=>u instanceof og).length;if(o>1||o>0&&l>0)throw new ye(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class og extends ag{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new og(e,t,r)}_apply(e){const t=this._parse(e);return LE(e._query,t),new Ms(e.firestore,e.converter,Ap(e._query,t))}_parse(e){const t=tg(e.firestore);return(function(i,o,l,u,h,m,g){let v;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new ye(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){h1(g,m);const b=[];for(const S of g)b.push(u1(u,i,S));v={arrayValue:{values:b}}}else v=u1(u,i,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||h1(g,m),v=(function(b,S,T,_=!1){return rg(T,b.Cc(_?4:3,S))})(l,o,g,m==="in"||m==="not-in");return Ht.create(h,m,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class lg extends ig{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new lg(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Mr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,i){let o=r;const l=i.getFlattenedFilters();for(const u of l)LE(o,u),o=Ap(o,u)})(e._query,t),new Ms(e.firestore,e.converter,Ap(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cg extends ag{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new cg(e,t)}_apply(e){const t=(function(r,i,o){if(r.startAt!==null)throw new ye(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ye(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lc(i,o)})(e._query,this._field,this._direction);return new Ms(e.firestore,e.converter,(function(r,i){const o=r.explicitOrderBy.concat([i]);return new Ho(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}}function Oo(n,e="asc"){const t=e,r=sg("orderBy",n);return cg._create(r,t)}class ug extends ag{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new ug(e,t,r)}_apply(e){return new Ms(e.firestore,e.converter,vh(e._query,this._limit,this._limitType))}}function ME(n){return(function(e,t){if(t<=0)throw new ye(ie.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)})("limit",n),ug._create("limit",n,"F")}function u1(n,e,t){if(typeof(t=Ot(t))=="string"){if(t==="")throw new ye(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DS(e)&&t.indexOf("/")!==-1)throw new ye(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(xt.fromString(t));if(!je.isDocumentKey(r))throw new ye(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cx(n,new je(r))}if(t instanceof zt)return Cx(n,t._key);throw new ye(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uh(t)}.`)}function h1(n,e){if(!Array.isArray(n)||n.length===0)throw new ye(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LE(n,e){const t=(function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ye(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class cA{convertValue(e,t="none"){switch(Ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Le(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ta(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){const t=e.fields?.[gh].arrayValue?.values?.map(r=>Ut(r.doubleValue));return new ns(t)}convertGeoPoint(e){return new ts(Ut(e.latitude),Ut(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=$h(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ic(e));default:return null}}convertTimestamp(e){const t=Ii(e);return new St(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=xt.fromString(e);pt(rE(r),9688,{name:e});const i=new ac(r.get(1),r.get(3)),o=new je(r.popFirst(5));return i.isEqual(t)||Ps(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function OE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Bl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ha extends RE{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ju(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ha._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()&&(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED")),t}}ha._jsonSchemaVersion="firestore/documentSnapshot/1.0",ha._jsonSchema={type:Wt("string",ha._jsonSchemaVersion),bundleSource:Wt("string","DocumentSnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class Ju extends ha{data(e={}){return super.data(e)}}class da{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Bl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ju(this._firestore,this._userDataWriter,r.key,r,new Bl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const u=new Ju(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Bl(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Ju(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Bl(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,m=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),m=o.indexOf(l.doc.key)),{type:uA(l.type),doc:u,oldIndex:h,newIndex:m}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=da._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uA(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:n})}}function dr(n){n=jr(n,zt);const e=jr(n.firestore,wa);return(function(t,r,i={}){const o=new ks;return t.asyncQueue.enqueueAndForget(async()=>(function(l,u,h,m,g){const v=new Xm({next:S=>{v.Nu(),u.enqueueAndForget(()=>Wm(l,b));const T=S.docs.has(h);!T&&S.fromCache?g.reject(new ye(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&S.fromCache&&m&&m.source==="server"?g.reject(new ye(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),b=new Km(qh(h.path),v,{includeMetadataChanges:!0,qa:!0});return Hm(l,b)})(await Th(t),t.asyncQueue,r,i,o)),o.promise})(ed(e),n._key).then(t=>FE(e,n,t))}da._jsonSchemaVersion="firestore/querySnapshot/1.0",da._jsonSchema={type:Wt("string",da._jsonSchemaVersion),bundleSource:Wt("string","QuerySnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class hg extends cA{constructor(e){super(),this.firestore=e}convertBytes(e){return new lr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,t)}}function Ch(n){n=jr(n,Ms);const e=jr(n.firestore,wa),t=ed(e),r=new hg(e);return DE(n._query),(function(i,o,l={}){const u=new ks;return i.asyncQueue.enqueueAndForget(async()=>(function(h,m,g,v,b){const S=new Xm({next:_=>{S.Nu(),m.enqueueAndForget(()=>Wm(h,T)),_.fromCache&&v.source==="server"?b.reject(new ye(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(_)},error:_=>b.reject(_)}),T=new Km(g,S,{includeMetadataChanges:!0,qa:!0});return Hm(h,T)})(await Th(i),i.asyncQueue,o,l,u)),u.promise})(t,n._query).then(i=>new da(e,r,n,i))}function ur(n,e,t){n=jr(n,zt);const r=jr(n.firestore,wa),i=OE(n.converter,e,t);return VE(r,[IE(tg(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,es.none())])}function ki(n,...e){n=Ot(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||c1(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(c1(e[r])){const h=e[r];e[r]=h.next?.bind(h),e[r+1]=h.error?.bind(h),e[r+2]=h.complete?.bind(h)}let o,l,u;if(n instanceof zt)l=jr(n.firestore,wa),u=qh(n._key.path),o={next:h=>{e[r]&&e[r](FE(l,n,h))},error:e[r+1],complete:e[r+2]};else{const h=jr(n,Ms);l=jr(h.firestore,wa),u=h._query;const m=new hg(l);o={next:g=>{e[r]&&e[r](new da(l,m,h,g))},error:e[r+1],complete:e[r+2]},DE(n._query)}return(function(h,m,g,v){const b=new Xm(v),S=new Km(m,b,g);return h.asyncQueue.enqueueAndForget(async()=>Hm(await Th(h),S)),()=>{b.Nu(),h.asyncQueue.enqueueAndForget(async()=>Wm(await Th(h),S))}})(ed(l),u,i,o)}function VE(n,e){return(function(t,r){const i=new ks;return t.asyncQueue.enqueueAndForget(async()=>W_(await(function(o){return TE(o).then(l=>l.syncEngine)})(t),r,i)),i.promise})(ed(n),e)}function FE(n,e,t){const r=t.docs.get(e._key),i=new hg(n);return new ha(n,i,e._key,r,new Bl(t.hasPendingWrites,t.fromCache),e.converter)}function Rs(){return new ng("serverTimestamp")}(function(n,e=!0){(function(t){Bo=t})(zo),is(new Rr("firestore",(t,{instanceIdentifier:r,options:i})=>{const o=t.getProvider("app").getImmediate(),l=new wa(new $N(t.getProvider("auth-internal")),new WN(o,t.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ye(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ac(u.options.projectId,h)})(o,r),o);return i={useFetchStreams:e,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),cr(fx,px,n),cr(fx,px,"esm2020")})();const dg=hw({apiKey:"AIzaSyAsg53BgU7tNR8-pAAS-CNf1HV_vWFdVCs",authDomain:"fyzenapp.firebaseapp.com",projectId:"fyzenapp",storageBucket:"fyzenapp.firebasestorage.app",messagingSenderId:"854636080862",appId:"1:854636080862:web:f24913edc6b359210d9c4f",measurementId:"G-7EWR7SPVE2"});typeof window<"u"&&(async function(){if(am()||!ow()||!om())return!1;try{return await lm()}catch{return!1}})().then(n=>{n&&FN(dg)});const Et=(function(n=cm()){const e=pa(n,"auth");if(e.isInitialized())return e.getImmediate();const t=(function(l,u){const h=pa(l,"auth");if(h.isInitialized()){const m=h.getImmediate();if(Ci(h.getOptions(),u??{}))return m;hr(m,"already-initialized")}return h.initialize({options:u})})(n,{popupRedirectResolver:vN,persistence:[HC,$C,Uw]}),r=sw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const u=(i=l.toString(),async h=>{const m=h&&await h.getIdTokenResult(),g=m&&(new Date().getTime()-Date.parse(m.issuedAtTime))/1e3;if(g&&g>bN)return;const v=m?.token;ex!==v&&(ex=v,await fetch(i,{method:v?"POST":"DELETE",headers:v?{Authorization:`Bearer ${v}`}:{}}))});(function(h,m,g){Ot(h).beforeAuthStateChanged(m,g)})(t,u,()=>u(t.currentUser)),(function(h,m,g,v){Ot(h).onIdTokenChanged(m,g,v)})(t,h=>u(h))}}var i;const o=nw("auth");return o&&MC(t,`http://${o}`),t})(dg),rt=(function(n){const e=typeof n=="object"?n:cm(),t=typeof n=="string"?n:mh,r=pa(e,"firestore").getImmediate({identifier:t});if(!r._initialized){const i=(o=>{const l=nw(o);if(!l)return;const u=l.lastIndexOf(":");if(u<=0||u+1===l.length)throw new Error(`Invalid host ${l} with no separate hostname and port!`);const h=parseInt(l.substring(u+1),10);return l[0]==="["?[l.substring(1,u-1),h]:[l.substring(0,u),h]})("firestore");i&&tA(r,...i)}return r})(dg);window.auth=Et;const fg=U.createContext({});function pg(n){const e=U.useRef(null);return e.current===null&&(e.current=n()),e.current}const td=U.createContext(null),mg=U.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class hA extends U.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function dA({children:n,isPresent:e}){const t=U.useId(),r=U.useRef(null),i=U.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=U.useContext(mg);return U.useInsertionEffect(()=>{const{width:l,height:u,top:h,left:m}=i.current;if(e||!r.current||!l||!u)return;r.current.dataset.motionPopId=t;const g=document.createElement("style");return o&&(g.nonce=o),document.head.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            top: ${h}px !important;
            left: ${m}px !important;
          }
        `),()=>{document.head.removeChild(g)}},[e]),p.jsx(hA,{isPresent:e,childRef:r,sizeRef:i,children:U.cloneElement(n,{ref:r})})}const fA=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:l})=>{const u=pg(pA),h=U.useId(),m=U.useCallback(v=>{u.set(v,!0);for(const b of u.values())if(!b)return;r&&r()},[u,r]),g=U.useMemo(()=>({id:h,initial:e,isPresent:t,custom:i,onExitComplete:m,register:v=>(u.set(v,!1),()=>u.delete(v))}),o?[Math.random(),m]:[t,m]);return U.useMemo(()=>{u.forEach((v,b)=>u.set(b,!1))},[t]),U.useEffect(()=>{!t&&!u.size&&r&&r()},[t]),l==="popLayout"&&(n=p.jsx(dA,{isPresent:t,children:n})),p.jsx(td.Provider,{value:g,children:n})};function pA(){return new Map}function UE(n=!0){const e=U.useContext(td);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,o=U.useId();U.useEffect(()=>{n&&i(o)},[n]);const l=U.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,l]:[!0]}const Mu=n=>n.key||"";function d1(n){const e=[];return U.Children.forEach(n,t=>{U.isValidElement(t)&&e.push(t)}),e}const gg=typeof window<"u",zE=gg?U.useLayoutEffect:U.useEffect,nd=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:l=!1})=>{const[u,h]=UE(l),m=U.useMemo(()=>d1(n),[n]),g=l&&!u?[]:m.map(Mu),v=U.useRef(!0),b=U.useRef(m),S=pg(()=>new Map),[T,_]=U.useState(m),[D,O]=U.useState(m);zE(()=>{v.current=!1,b.current=m;for(let N=0;N<D.length;N++){const I=Mu(D[N]);g.includes(I)?S.delete(I):S.get(I)!==!0&&S.set(I,!1)}},[D,g.length,g.join("-")]);const z=[];if(m!==T){let N=[...m];for(let I=0;I<D.length;I++){const A=D[I],R=Mu(A);g.includes(R)||(N.splice(I,0,A),z.push(A))}return o==="wait"&&z.length&&(N=z),O(d1(N)),void _(m)}const{forceRender:P}=U.useContext(fg);return p.jsx(p.Fragment,{children:D.map(N=>{const I=Mu(N),A=!(l&&!u)&&(m===D||g.includes(I));return p.jsx(fA,{isPresent:A,initial:!(v.current&&!t)&&void 0,custom:A?void 0:e,presenceAffectsLayout:i,mode:o,onExitComplete:A?void 0:()=>{if(!S.has(I))return;S.set(I,!0);let R=!0;S.forEach(C=>{C||(R=!1)}),R&&(P?.(),O(b.current),l&&h?.(),r&&r())},children:N},I)})})},Kn=n=>n;let BE=Kn;function yg(n){let e;return()=>(e===void 0&&(e=n()),e)}const Vo=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},Cs=n=>1e3*n,Ns=n=>n/1e3,mA=!1,Lu=["read","resolveKeyframes","update","preRender","render","postRender"];function $E(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,l=Lu.reduce((T,_)=>(T[_]=(function(D){let O=new Set,z=new Set,P=!1,N=!1;const I=new WeakSet;let A={delta:0,timestamp:0,isProcessing:!1};function R(V){I.has(V)&&(C.schedule(V),D()),V(A)}const C={schedule:(V,fe=!1,Te=!1)=>{const Re=Te&&P?O:z;return fe&&I.add(V),Re.has(V)||Re.add(V),V},cancel:V=>{z.delete(V),I.delete(V)},process:V=>{A=V,P?N=!0:(P=!0,[O,z]=[z,O],O.forEach(R),O.clear(),P=!1,N&&(N=!1,C.process(V)))}};return C})(o),T),{}),{read:u,resolveKeyframes:h,update:m,preRender:g,render:v,postRender:b}=l,S=()=>{const T=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(T-i.timestamp,40),1),i.timestamp=T,i.isProcessing=!0,u.process(i),h.process(i),m.process(i),g.process(i),v.process(i),b.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(S))};return{schedule:Lu.reduce((T,_)=>{const D=l[_];return T[_]=(O,z=!1,P=!1)=>(t||(t=!0,r=!0,i.isProcessing||n(S)),D.schedule(O,z,P)),T},{}),cancel:T=>{for(let _=0;_<Lu.length;_++)l[Lu[_]].cancel(T)},state:i,steps:l}}const{schedule:Tt,cancel:yi,state:on,steps:Wf}=$E(typeof requestAnimationFrame<"u"?requestAnimationFrame:Kn,!0),qE=U.createContext({strict:!1}),f1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_o={};for(const n in f1)_o[n]={isEnabled:e=>f1[n].some(t=>!!e[t])};const gA=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Nh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||gA.has(n)}let HE=n=>!Nh(n);try{(p1=require("@emotion/is-prop-valid").default)&&(HE=n=>n.startsWith("on")?!Nh(n):p1(n))}catch{}var p1;function yA(n){if(typeof Proxy>"u")return n;const e=new Map;return new Proxy((...t)=>n(...t),{get:(t,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const rd=U.createContext({});function fc(n){return typeof n=="string"||Array.isArray(n)}function sd(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const vg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],xg=["initial",...vg];function id(n){return sd(n.animate)||xg.some(e=>fc(n[e]))}function WE(n){return!!(id(n)||n.variants)}function vA(n){const{initial:e,animate:t}=(function(r,i){if(id(r)){const{initial:o,animate:l}=r;return{initial:o===!1||fc(o)?o:void 0,animate:fc(l)?l:void 0}}return r.inherit!==!1?i:{}})(n,U.useContext(rd));return U.useMemo(()=>({initial:e,animate:t}),[m1(e),m1(t)])}function m1(n){return Array.isArray(n)?n.join(" "):n}const xA=Symbol.for("motionComponentSymbol");function xo(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function bA(n,e,t){return U.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):xo(t)&&(t.current=r))},[e])}const bg=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),GE="data-"+bg("framerAppearId"),{schedule:wg}=$E(queueMicrotask,!1),KE=U.createContext({});function wA(n,e,t,r,i){var o,l;const{visualElement:u}=U.useContext(rd),h=U.useContext(qE),m=U.useContext(td),g=U.useContext(mg).reducedMotion,v=U.useRef(null);r=r||h.renderer,!v.current&&r&&(v.current=r(n,{visualState:e,parent:u,props:t,presenceContext:m,blockInitialAnimation:!!m&&m.initial===!1,reducedMotionConfig:g}));const b=v.current,S=U.useContext(KE);!b||b.projection||!i||b.type!=="html"&&b.type!=="svg"||(function(O,z,P,N){const{layoutId:I,layout:A,drag:R,dragConstraints:C,layoutScroll:V,layoutRoot:fe}=z;O.projection=new P(O.latestValues,z["data-framer-portal-id"]?void 0:QE(O.parent)),O.projection.setOptions({layoutId:I,layout:A,alwaysMeasureLayout:!!R||C&&xo(C),visualElement:O,animationType:typeof A=="string"?A:"both",initialPromotionConfig:N,layoutScroll:V,layoutRoot:fe})})(v.current,t,i,S);const T=U.useRef(!1);U.useInsertionEffect(()=>{b&&T.current&&b.update(t,m)});const _=t[GE],D=U.useRef(!!_&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,_))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,_)));return zE(()=>{b&&(T.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),wg.render(b.render),D.current&&b.animationState&&b.animationState.animateChanges())}),U.useEffect(()=>{b&&(!D.current&&b.animationState&&b.animationState.animateChanges(),D.current&&(queueMicrotask(()=>{var O;(O=window.MotionHandoffMarkAsComplete)===null||O===void 0||O.call(window,_)}),D.current=!1))}),b}function QE(n){if(n)return n.options.allowProjection!==!1?n.projection:QE(n.parent)}function SA({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){var o,l;function u(m,g){let v;const b={...U.useContext(mg),...m,layoutId:EA(m)},{isStatic:S}=b,T=vA(m),_=r(m,S);if(!S&&gg){U.useContext(qE).strict;const D=(function(O){const{drag:z,layout:P}=_o;if(!z&&!P)return{};const N={...z,...P};return{MeasureLayout:z?.isEnabled(O)||P?.isEnabled(O)?N.MeasureLayout:void 0,ProjectionNode:N.ProjectionNode}})(b);v=D.MeasureLayout,T.visualElement=wA(i,_,b,e,D.ProjectionNode)}return p.jsxs(rd.Provider,{value:T,children:[v&&T.visualElement?p.jsx(v,{visualElement:T.visualElement,...b}):null,t(i,m,bA(_,T.visualElement,g),_,S,T.visualElement)]})}n&&(function(m){for(const g in m)_o[g]={..._o[g],...m[g]}})(n),u.displayName=`motion.${typeof i=="string"?i:`create(${(l=(o=i.displayName)!==null&&o!==void 0?o:i.name)!==null&&l!==void 0?l:""})`}`;const h=U.forwardRef(u);return h[xA]=i,h}function EA({layoutId:n}){const e=U.useContext(fg).id;return e&&n!==void 0?e+"-"+n:n}const TA=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Sg(n){return typeof n=="string"&&!n.includes("-")&&!!(TA.indexOf(n)>-1||/[A-Z]/u.test(n))}function g1(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function Eg(n,e,t,r){if(typeof e=="function"){const[i,o]=g1(r);e=e(t!==void 0?t:n.custom,i,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,o]=g1(r);e=e(t!==void 0?t:n.custom,i,o)}return e}const Up=n=>Array.isArray(n),kA=n=>Up(n)?n[n.length-1]||0:n,wn=n=>!!(n&&n.getVelocity);function Zu(n){const e=wn(n)?n.get():n;return t=e,t&&typeof t=="object"&&t.mix&&t.toValue?e.toValue():e;var t}const YE=n=>(e,t)=>{const r=U.useContext(rd),i=U.useContext(td),o=()=>(function({scrapeMotionValuesFromProps:l,createRenderState:u,onUpdate:h},m,g,v){const b={latestValues:CA(m,g,v,l),renderState:u()};return h&&(b.onMount=S=>h({props:m,current:S,...b}),b.onUpdate=S=>h(S)),b})(n,e,r,i);return t?o():pg(o)};function CA(n,e,t,r){const i={},o=r(n,{});for(const b in o)i[b]=Zu(o[b]);let{initial:l,animate:u}=n;const h=id(n),m=WE(n);e&&m&&!h&&n.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let g=!!t&&t.initial===!1;g=g||l===!1;const v=g?u:l;if(v&&typeof v!="boolean"&&!sd(v)){const b=Array.isArray(v)?v:[v];for(let S=0;S<b.length;S++){const T=Eg(n,b[S]);if(T){const{transitionEnd:_,transition:D,...O}=T;for(const z in O){let P=O[z];Array.isArray(P)&&(P=P[g?P.length-1:0]),P!==null&&(i[z]=P)}for(const z in _)i[z]=_[z]}}}return i}const Go=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ia=new Set(Go),XE=n=>e=>typeof e=="string"&&e.startsWith(n),JE=XE("--"),NA=XE("var(--"),Tg=n=>!!NA(n)&&IA.test(n.split("/*")[0].trim()),IA=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,y1=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Ds=(n,e,t)=>t>e?e:t<n?n:t,Ko={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},pc={...Ko,transform:n=>Ds(0,1,n)},Ou={...Ko,default:1},Tc=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),di=Tc("deg"),rs=Tc("%"),De=Tc("px"),_A=Tc("vh"),AA=Tc("vw"),v1={...rs,parse:n=>rs.parse(n)/100,transform:n=>rs.transform(100*n)},PA={borderWidth:De,borderTopWidth:De,borderRightWidth:De,borderBottomWidth:De,borderLeftWidth:De,borderRadius:De,radius:De,borderTopLeftRadius:De,borderTopRightRadius:De,borderBottomRightRadius:De,borderBottomLeftRadius:De,width:De,maxWidth:De,height:De,maxHeight:De,top:De,right:De,bottom:De,left:De,padding:De,paddingTop:De,paddingRight:De,paddingBottom:De,paddingLeft:De,margin:De,marginTop:De,marginRight:De,marginBottom:De,marginLeft:De,backgroundPositionX:De,backgroundPositionY:De},jA={rotate:di,rotateX:di,rotateY:di,rotateZ:di,scale:Ou,scaleX:Ou,scaleY:Ou,scaleZ:Ou,skew:di,skewX:di,skewY:di,distance:De,translateX:De,translateY:De,translateZ:De,x:De,y:De,z:De,perspective:De,transformPerspective:De,opacity:pc,originX:v1,originY:v1,originZ:De},x1={...Ko,transform:Math.round},zp={...PA,...jA,zIndex:x1,size:De,fillOpacity:pc,strokeOpacity:pc,numOctaves:x1},RA={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},DA=Go.length;function kg(n,e,t){const{style:r,vars:i,transformOrigin:o}=n;let l=!1,u=!1;for(const h in e){const m=e[h];if(Ia.has(h))l=!0;else if(JE(h))i[h]=m;else{const g=y1(m,zp[h]);h.startsWith("origin")?(u=!0,o[h]=g):r[h]=g}}if(e.transform||(l||t?r.transform=(function(h,m,g){let v="",b=!0;for(let S=0;S<DA;S++){const T=Go[S],_=h[T];if(_===void 0)continue;let D=!0;if(D=typeof _=="number"?_===(T.startsWith("scale")?1:0):parseFloat(_)===0,!D||g){const O=y1(_,zp[T]);D||(b=!1,v+=`${RA[T]||T}(${O}) `),g&&(m[T]=O)}}return v=v.trim(),g?v=g(m,b?"":v):b&&(v="none"),v})(e,n.transform,t):r.transform&&(r.transform="none")),u){const{originX:h="50%",originY:m="50%",originZ:g=0}=o;r.transformOrigin=`${h} ${m} ${g}`}}const MA={offset:"stroke-dashoffset",array:"stroke-dasharray"},LA={offset:"strokeDashoffset",array:"strokeDasharray"};function b1(n,e,t){return typeof n=="string"?n:De.transform(e+t*n)}function Cg(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:o,pathLength:l,pathSpacing:u=1,pathOffset:h=0,...m},g,v){if(kg(n,m,v),g)return void(n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox));n.attrs=n.style,n.style={};const{attrs:b,style:S,dimensions:T}=n;b.transform&&(T&&(S.transform=b.transform),delete b.transform),T&&(i!==void 0||o!==void 0||S.transform)&&(S.transformOrigin=(function(_,D,O){return`${b1(D,_.x,_.width)} ${b1(O,_.y,_.height)}`})(T,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(b.x=e),t!==void 0&&(b.y=t),r!==void 0&&(b.scale=r),l!==void 0&&(function(_,D,O=1,z=0,P=!0){_.pathLength=1;const N=P?MA:LA;_[N.offset]=De.transform(-z);const I=De.transform(D),A=De.transform(O);_[N.array]=`${I} ${A}`})(b,l,u,h,!1)}const OA=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),VA=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),Ng=n=>typeof n=="string"&&n.toLowerCase()==="svg";function ZE(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const o in t)n.style.setProperty(o,t[o])}const e2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function t2(n,e,t,r){ZE(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(e2.has(i)?i:bg(i),e.attrs[i])}const Ih={};function n2(n,{layout:e,layoutId:t}){return Ia.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Ih[n]||n==="opacity")}function Ig(n,e,t){var r;const{style:i}=n,o={};for(const l in i)(wn(i[l])||e.style&&wn(e.style[l])||n2(l,n)||((r=t?.getValue(l))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[l]=i[l]);return o}function r2(n,e,t){const r=Ig(n,e,t);for(const i in n)(wn(n[i])||wn(e[i]))&&(r[Go.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=n[i]);return r}const w1=["x","y","width","height","cx","cy","r"],FA={useVisualState:YE({scrapeMotionValuesFromProps:r2,createRenderState:VA,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:i})=>{if(!t)return;let o=!!n.drag;if(!o){for(const u in i)if(Ia.has(u)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let u=0;u<w1.length;u++){const h=w1[u];n[h]!==e[h]&&(l=!0)}l&&Tt.read(()=>{(function(u,h){try{h.dimensions=typeof u.getBBox=="function"?u.getBBox():u.getBoundingClientRect()}catch{h.dimensions={x:0,y:0,width:0,height:0}}})(t,r),Tt.render(()=>{Cg(r,i,Ng(t.tagName),n.transformTemplate),t2(t,r)})})}})},UA={useVisualState:YE({scrapeMotionValuesFromProps:Ig,createRenderState:OA})};function s2(n,e,t){for(const r in e)wn(e[r])||n2(r,t)||(n[r]=e[r])}function zA(n,e){const t={};return s2(t,n.style||{},n),Object.assign(t,(function({transformTemplate:r},i){return U.useMemo(()=>{const o={style:{},transform:{},transformOrigin:{},vars:{}};return kg(o,i,r),Object.assign({},o.vars,o.style)},[i])})(n,e)),t}function BA(n,e){const t={},r=zA(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":"pan-"+(n.drag==="x"?"y":"x")),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}function $A(n,e,t,r){const i=U.useMemo(()=>{const o={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return Cg(o,e,Ng(r),n.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};s2(o,n.style,n),i.style={...o,...i.style}}return i}function qA(n=!1){return(e,t,r,{latestValues:i},o)=>{const l=(Sg(e)?$A:BA)(t,i,o,e),u=(function(v,b,S){const T={};for(const _ in v)_==="values"&&typeof v.values=="object"||(HE(_)||S===!0&&Nh(_)||!b&&!Nh(_)||v.draggable&&_.startsWith("onDrag"))&&(T[_]=v[_]);return T})(t,typeof e=="string",n),h=e!==U.Fragment?{...u,...l,ref:r}:{},{children:m}=t,g=U.useMemo(()=>wn(m)?m.get():m,[m]);return U.createElement(e,{...h,children:g})}}function HA(n,e){return function(t,{forwardMotionProps:r}={forwardMotionProps:!1}){return SA({...Sg(t)?FA:UA,preloadedFeatures:n,useRender:qA(r),createVisualElement:e,Component:t})}}function i2(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function ad(n,e,t){const r=n.getProps();return Eg(r,e,t!==void 0?t:r.custom,n)}const WA=yg(()=>window.ScrollTimeline!==void 0);class GA{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(i=>WA()&&i.attachTimeline?i.attachTimeline(e):typeof t=="function"?t(i):void 0);return()=>{r.forEach((i,o)=>{i&&i(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class KA extends GA{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function _g(n,e){return n?n[e]||n.default||n:void 0}const Bp=2e4;function a2(n){let e=0,t=n.next(e);for(;!t.done&&e<Bp;)e+=50,t=n.next(e);return e>=Bp?1/0:e}function Ag(n){return typeof n=="function"}function S1(n,e){n.timeline=e,n.onfinish=null}const Pg=n=>Array.isArray(n)&&typeof n[0]=="number",QA={linearEasing:void 0};function YA(n,e){const t=yg(n);return()=>{var r;return(r=QA[e])!==null&&r!==void 0?r:t()}}const _h=YA(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),o2=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let o=0;o<i;o++)r+=n(Vo(0,i-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function l2(n){return!!(typeof n=="function"&&_h()||!n||typeof n=="string"&&(n in $p||_h())||Pg(n)||Array.isArray(n)&&n.every(l2))}const $l=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,$p={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$l([0,.65,.55,1]),circOut:$l([.55,0,1,.45]),backIn:$l([.31,.01,.66,-.59]),backOut:$l([.33,1.53,.69,.99])};function c2(n,e){return n?typeof n=="function"&&_h()?o2(n,e):Pg(n)?$l(n):Array.isArray(n)?n.map(t=>c2(t,e)||$p.easeOut):$p[n]:void 0}const Ir={x:!1,y:!1};function u2(){return Ir.x||Ir.y}function h2(n,e){const t=(function(i){if(i instanceof Element)return[i];if(typeof i=="string"){const o=document.querySelectorAll(i);return o?Array.from(o):[]}return Array.from(i)})(n),r=new AbortController;return[t,{passive:!0,...e,signal:r.signal},()=>r.abort()]}function E1(n){return e=>{e.pointerType==="touch"||u2()||n(e)}}const d2=(n,e)=>!!e&&(n===e||d2(n,e.parentElement)),jg=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,XA=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]),Ol=new WeakSet;function T1(n){return e=>{e.key==="Enter"&&n(e)}}function Gf(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}function k1(n){return jg(n)&&!u2()}function JA(n,e,t={}){const[r,i,o]=h2(n,t),l=u=>{const h=u.currentTarget;if(!k1(u)||Ol.has(h))return;Ol.add(h);const m=e(u),g=(S,T)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",b),k1(S)&&Ol.has(h)&&(Ol.delete(h),typeof m=="function"&&m(S,{success:T}))},v=S=>{g(S,t.useGlobalTarget||d2(h,S.target))},b=S=>{g(S,!1)};window.addEventListener("pointerup",v,i),window.addEventListener("pointercancel",b,i)};return r.forEach(u=>{(function(h){return XA.has(h.tagName)||h.tabIndex!==-1})(u)||u.getAttribute("tabindex")!==null||(u.tabIndex=0),(t.useGlobalTarget?window:u).addEventListener("pointerdown",l,i),u.addEventListener("focus",h=>((m,g)=>{const v=m.currentTarget;if(!v)return;const b=T1(()=>{if(Ol.has(v))return;Gf(v,"down");const S=T1(()=>{Gf(v,"up")});v.addEventListener("keyup",S,g),v.addEventListener("blur",()=>Gf(v,"cancel"),g)});v.addEventListener("keydown",b,g),v.addEventListener("blur",()=>v.removeEventListener("keydown",b),g)})(h,i),i)}),o}const f2=new Set(["width","height","top","left","right","bottom",...Go]);let eh;function ZA(){eh=void 0}const ss={now:()=>(eh===void 0&&ss.set(on.isProcessing||mA?on.timestamp:performance.now()),eh),set:n=>{eh=n,queueMicrotask(ZA)}};function Rg(n,e){n.indexOf(e)===-1&&n.push(e)}function Dg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class Mg{constructor(){this.subscriptions=[]}add(e){return Rg(this.subscriptions,e),()=>Dg(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let o=0;o<i;o++){const l=this.subscriptions[o];l&&l(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function p2(n,e){return e?n*(1e3/e):0}class eP{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const o=ss.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=ss.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Mg);const r=this.events[e].add(t);return e==="change"?()=>{r(),Tt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ss.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return p2(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Yl(n,e){return new eP(n,e)}function tP(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Yl(t))}function qp(n,e){const t=n.getValue("willChange");if(r=t,!!(wn(r)&&r.add))return t.add(e);var r}function m2(n){return n.props[GE]}const C1=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n;function kc(n,e,t,r){if(n===e&&t===r)return Kn;const i=o=>(function(l,u,h,m,g){let v,b,S=0;do b=u+(h-u)/2,v=C1(b,m,g)-l,v>0?h=b:u=b;while(Math.abs(v)>1e-7&&++S<12);return b})(o,0,1,n,t);return o=>o===0||o===1?o:C1(i(o),e,r)}const g2=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,y2=n=>e=>1-n(1-e),v2=kc(.33,1.53,.69,.99),Lg=y2(v2),x2=g2(Lg),b2=n=>(n*=2)<1?.5*Lg(n):.5*(2-Math.pow(2,-10*(n-1))),Og=n=>1-Math.sin(Math.acos(n)),w2=y2(Og),S2=g2(Og),E2=n=>/^0[^.\s]+$/u.test(n);function nP(n){return typeof n=="number"?n===0:n===null||n==="none"||n==="0"||E2(n)}const Xl=n=>Math.round(1e5*n)/1e5,Vg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,rP=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Fg=(n,e)=>t=>!!(typeof t=="string"&&rP.test(t)&&t.startsWith(n)||e&&!(function(r){return r==null})(t)&&Object.prototype.hasOwnProperty.call(t,e)),T2=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,o,l,u]=r.match(Vg);return{[n]:parseFloat(i),[e]:parseFloat(o),[t]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},Kf={...Ko,transform:n=>Math.round((e=>Ds(0,255,e))(n))},ua={test:Fg("rgb","red"),parse:T2("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Kf.transform(n)+", "+Kf.transform(e)+", "+Kf.transform(t)+", "+Xl(pc.transform(r))+")"},Hp={test:Fg("#"),parse:function(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:ua.transform},bo={test:Fg("hsl","hue"),parse:T2("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+rs.transform(Xl(e))+", "+rs.transform(Xl(t))+", "+Xl(pc.transform(r))+")"},vn={test:n=>ua.test(n)||Hp.test(n)||bo.test(n),parse:n=>ua.test(n)?ua.parse(n):bo.test(n)?bo.parse(n):Hp.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?ua.transform(n):bo.transform(n)},sP=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,k2="number",C2="color",iP=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function mc(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let o=0;const l=e.replace(iP,u=>(vn.test(u)?(r.color.push(o),i.push(C2),t.push(vn.parse(u))):u.startsWith("var(")?(r.var.push(o),i.push("var"),t.push(u)):(r.number.push(o),i.push(k2),t.push(parseFloat(u))),++o,"${}")).split("${}");return{values:t,split:l,indexes:r,types:i}}function N1(n){return mc(n).values}function I1(n){const{split:e,types:t}=mc(n),r=e.length;return i=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],i[l]!==void 0){const u=t[l];o+=u===k2?Xl(i[l]):u===C2?vn.transform(i[l]):i[l]}return o}}const aP=n=>typeof n=="number"?0:n,ji={test:function(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Vg))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(sP))===null||t===void 0?void 0:t.length)||0)>0},parse:N1,createTransformer:I1,getAnimatableNone:function(n){const e=N1(n);return I1(n)(e.map(aP))}},oP=new Set(["brightness","contrast","saturate","opacity"]);function lP(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Vg)||[];if(!r)return n;const i=t.replace(r,"");let o=oP.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+i+")"}const cP=/\b([a-z-]*)\(.*?\)/gu,Wp={...ji,getAnimatableNone:n=>{const e=n.match(cP);return e?e.map(lP).join(" "):n}},uP={...zp,color:vn,backgroundColor:vn,outlineColor:vn,fill:vn,stroke:vn,borderColor:vn,borderTopColor:vn,borderRightColor:vn,borderBottomColor:vn,borderLeftColor:vn,filter:Wp,WebkitFilter:Wp},Ug=n=>uP[n];function N2(n,e){let t=Ug(n);return t!==Wp&&(t=ji),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const hP=new Set(["auto","none","0"]),_1=n=>n===Ko||n===De,A1=(n,e)=>parseFloat(n.split(", ")[e]),P1=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return A1(i[1],e);{const o=r.match(/^matrix\((.+)\)$/u);return o?A1(o[1],n):0}},dP=new Set(["x","y","z"]),fP=Go.filter(n=>!dP.has(n)),wo={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:P1(4,13),y:P1(5,14)};wo.translateX=wo.x,wo.translateY=wo.y;const fa=new Set;let Gp=!1,Kp=!1;function I2(){if(Kp){const n=Array.from(fa).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=(function(o){const l=[];return fP.forEach(u=>{const h=o.getValue(u);h!==void 0&&(l.push([u,h.get()]),h.set(u.startsWith("scale")?1:0))}),l})(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([o,l])=>{var u;(u=r.getValue(o))===null||u===void 0||u.set(l)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Kp=!1,Gp=!1,fa.forEach(n=>n.complete()),fa.clear()}function _2(){fa.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Kp=!0)})}class zg{constructor(e,t,r,i,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(fa.add(this),Gp||(Gp=!0,Tt.read(_2),Tt.resolveKeyframes(I2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=i?.get(),u=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&t){const h=r.readValue(t,u);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=u),i&&l===void 0&&i.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),fa.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,fa.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const A2=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),pP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function P2(n,e,t=1){const[r,i]=(function(l){const u=pP.exec(l);if(!u)return[,];const[,h,m,g]=u;return[`--${h??m}`,g]})(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return A2(l)?parseFloat(l):l}return Tg(i)?P2(i,e,t+1):i}const j2=n=>e=>e.test(n),R2=[Ko,De,rs,di,AA,_A,{test:n=>n==="auto",parse:n=>n}],j1=n=>R2.find(j2(n));class D2 extends zg{constructor(e,t,r,i,o){super(e,t,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let m=e[h];if(typeof m=="string"&&(m=m.trim(),Tg(m))){const g=P2(m,t.current);g!==void 0&&(e[h]=g),h===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!f2.has(r)||e.length!==2)return;const[i,o]=e,l=j1(i),u=j1(o);if(l!==u)if(_1(l)&&_1(u))for(let h=0;h<e.length;h++){const m=e[h];typeof m=="string"&&(e[h]=parseFloat(m))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)nP(e[i])&&r.push(i);r.length&&(function(i,o,l){let u,h=0;for(;h<i.length&&!u;){const m=i[h];typeof m=="string"&&!hP.has(m)&&mc(m).values.length&&(u=i[h]),h++}if(u&&l)for(const m of o)i[m]=N2(l,u)})(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const o=t.getValue(r);o&&o.jump(this.measuredOrigin,!1);const l=i.length-1,u=i[l];i[l]=wo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([h,m])=>{t.getValue(h).set(m)}),this.resolveNoneKeyframes()}}const R1=(n,e)=>e!=="zIndex"&&(!(typeof n!="number"&&!Array.isArray(n))||!(typeof n!="string"||!ji.test(n)&&n!=="0"||n.startsWith("url(")));function mP(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],l=R1(i,e),u=R1(o,e);return!(!l||!u)&&((function(h){const m=h[0];if(h.length===1)return!0;for(let g=0;g<h.length;g++)if(h[g]!==m)return!0})(n)||(t==="spring"||Ag(t))&&r)}const gP=n=>n!==null;function od(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(gP),o=e&&t!=="loop"&&e%2==1?0:i.length-1;return o&&r!==void 0?r:i[o]}class M2{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ss.now(),this.options={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:o,repeatType:l,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(_2(),I2()),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=ss.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:o,delay:l,onComplete:u,onUpdate:h,isGenerator:m}=this.options;if(!m&&!mP(e,r,i,o)){if(!l)return h&&h(od(e,this.options,t)),u&&u(),void this.resolveFinishedPromise();this.options.duration=0}const g=this.initPlayback(e,t);g!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...g},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const jt=(n,e,t)=>n+(e-n)*t;function Qf(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Ah(n,e){return t=>t>0?e:n}const Yf=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},yP=[Hp,ua,bo];function D1(n){const e=(t=n,yP.find(i=>i.test(t)));var t;if(!e)return!1;let r=e.parse(n);return e===bo&&(r=(function({hue:i,saturation:o,lightness:l,alpha:u}){i/=360,l/=100;let h=0,m=0,g=0;if(o/=100){const v=l<.5?l*(1+o):l+o-l*o,b=2*l-v;h=Qf(b,v,i+1/3),m=Qf(b,v,i),g=Qf(b,v,i-1/3)}else h=m=g=l;return{red:Math.round(255*h),green:Math.round(255*m),blue:Math.round(255*g),alpha:u}})(r)),r}const M1=(n,e)=>{const t=D1(n),r=D1(e);if(!t||!r)return Ah(n,e);const i={...t};return o=>(i.red=Yf(t.red,r.red,o),i.green=Yf(t.green,r.green,o),i.blue=Yf(t.blue,r.blue,o),i.alpha=jt(t.alpha,r.alpha,o),ua.transform(i))},vP=(n,e)=>t=>e(n(t)),Cc=(...n)=>n.reduce(vP),Xf=new Set(["none","hidden"]);function xP(n,e){return t=>jt(n,e,t)}function Bg(n){return typeof n=="number"?xP:typeof n=="string"?Tg(n)?Ah:vn.test(n)?M1:wP:Array.isArray(n)?L2:typeof n=="object"?vn.test(n)?M1:bP:Ah}function L2(n,e){const t=[...n],r=t.length,i=n.map((o,l)=>Bg(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)t[l]=i[l](o);return t}}function bP(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=Bg(n[i])(n[i],e[i]));return i=>{for(const o in r)t[o]=r[o](i);return t}}const wP=(n,e)=>{const t=ji.createTransformer(e),r=mc(n),i=mc(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Xf.has(n)&&!i.values.length||Xf.has(e)&&!r.values.length?(function(o,l){return Xf.has(o)?u=>u<=0?o:l:u=>u>=1?l:o})(n,e):Cc(L2((function(o,l){var u;const h=[],m={color:0,var:0,number:0};for(let g=0;g<l.values.length;g++){const v=l.types[g],b=o.indexes[v][m[v]],S=(u=o.values[b])!==null&&u!==void 0?u:0;h[g]=S,m[v]++}return h})(r,i),i.values),t):Ah(n,e)};function O2(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?jt(n,e,t):Bg(n)(n,e)}function V2(n,e,t){const r=Math.max(e-5,0);return p2(t-n(r),e-r)}const F2=100,U2=10,th=1,z2=0,SP=800,B2=.3,EP=.3,L1={granular:.01,default:2},O1={granular:.005,default:.5},TP=.01,kP=10,CP=.05,NP=1,V1=.001;function IP({duration:n=SP,bounce:e=B2,velocity:t=z2,mass:r=th}){let i,o,l=1-e;l=Ds(CP,NP,l),n=Ds(TP,kP,Ns(n)),l<1?(i=h=>{const m=h*l,g=m*n,v=m-t,b=Qp(h,l),S=Math.exp(-g);return V1-v/b*S},o=h=>{const m=h*l*n,g=m*t+t,v=Math.pow(l,2)*Math.pow(h,2)*n,b=Math.exp(-m),S=Qp(Math.pow(h,2),l);return(-i(h)+V1>0?-1:1)*((g-v)*b)/S}):(i=h=>Math.exp(-h*n)*((h-t)*n+1)-.001,o=h=>Math.exp(-h*n)*(n*n*(t-h)));const u=(function(h,m,g){let v=g;for(let b=1;b<_P;b++)v-=h(v)/m(v);return v})(i,o,5/n);if(n=Cs(n),isNaN(u))return{stiffness:F2,damping:U2,duration:n};{const h=Math.pow(u,2)*r;return{stiffness:h,damping:2*l*Math.sqrt(r*h),duration:n}}}const _P=12;function Qp(n,e){return n*Math.sqrt(1-e*e)}const AP=["duration","bounce"],PP=["stiffness","damping","mass"];function F1(n,e){return e.some(t=>n[t]!==void 0)}function $2(n=EP,e=B2){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const o=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],u={done:!1,value:o},{stiffness:h,damping:m,mass:g,duration:v,velocity:b,isResolvedFromDuration:S}=(function(I){let A={velocity:z2,stiffness:F2,damping:U2,mass:th,isResolvedFromDuration:!1,...I};if(!F1(I,PP)&&F1(I,AP))if(I.visualDuration){const R=I.visualDuration,C=2*Math.PI/(1.2*R),V=C*C,fe=2*Ds(.05,1,1-(I.bounce||0))*Math.sqrt(V);A={...A,mass:th,stiffness:V,damping:fe}}else{const R=IP(I);A={...A,...R,mass:th},A.isResolvedFromDuration=!0}return A})({...t,velocity:-Ns(t.velocity||0)}),T=b||0,_=m/(2*Math.sqrt(h*g)),D=l-o,O=Ns(Math.sqrt(h/g)),z=Math.abs(D)<5;let P;if(r||(r=z?L1.granular:L1.default),i||(i=z?O1.granular:O1.default),_<1){const I=Qp(O,_);P=A=>{const R=Math.exp(-_*O*A);return l-R*((T+_*O*D)/I*Math.sin(I*A)+D*Math.cos(I*A))}}else if(_===1)P=I=>l-Math.exp(-O*I)*(D+(T+O*D)*I);else{const I=O*Math.sqrt(_*_-1);P=A=>{const R=Math.exp(-_*O*A),C=Math.min(I*A,300);return l-R*((T+_*O*D)*Math.sinh(C)+I*D*Math.cosh(C))/I}}const N={calculatedDuration:S&&v||null,next:I=>{const A=P(I);if(S)u.done=I>=v;else{let R=0;_<1&&(R=I===0?Cs(T):V2(P,I,A));const C=Math.abs(R)<=r,V=Math.abs(l-A)<=i;u.done=C&&V}return u.value=u.done?l:A,u},toString:()=>{const I=Math.min(a2(N),Bp),A=o2(R=>N.next(I*R).value,I,30);return I+"ms "+A}};return N}function U1({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:h,restDelta:m=.5,restSpeed:g}){const v=n[0],b={done:!1,value:v},S=R=>u===void 0?h:h===void 0||Math.abs(u-R)<Math.abs(h-R)?u:h;let T=t*e;const _=v+T,D=l===void 0?_:l(_);D!==_&&(T=D-v);const O=R=>-T*Math.exp(-R/r),z=R=>D+O(R),P=R=>{const C=O(R),V=z(R);b.done=Math.abs(C)<=m,b.value=b.done?D:V};let N,I;const A=R=>{var C;C=b.value,(u!==void 0&&C<u||h!==void 0&&C>h)&&(N=R,I=$2({keyframes:[b.value,S(b.value)],velocity:V2(z,R,b.value),damping:i,stiffness:o,restDelta:m,restSpeed:g}))};return A(0),{calculatedDuration:null,next:R=>{let C=!1;return I||N!==void 0||(C=!0,P(R),A(R)),N!==void 0&&R>=N?I.next(R-N):(!C&&P(R),b)}}}const jP=kc(.42,0,1,1),RP=kc(0,0,.58,1),q2=kc(.42,0,.58,1),DP={linear:Kn,easeIn:jP,easeInOut:q2,easeOut:RP,circIn:Og,circInOut:S2,circOut:w2,backIn:Lg,backInOut:x2,backOut:v2,anticipate:b2},z1=n=>{if(Pg(n)){BE(n.length===4);const[e,t,r,i]=n;return kc(e,t,r,i)}return typeof n=="string"?DP[n]:n};function MP(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const o=n.length;if(BE(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=(function(g,v,b){const S=[],T=b||O2,_=g.length-1;for(let D=0;D<_;D++){let O=T(g[D],g[D+1]);if(v){const z=Array.isArray(v)?v[D]||Kn:v;O=Cc(z,O)}S.push(O)}return S})(e,r,i),h=u.length,m=g=>{if(l&&g<n[0])return e[0];let v=0;if(h>1)for(;v<n.length-2&&!(g<n[v+1]);v++);const b=Vo(n[v],n[v+1],g);return u[v](b)};return t?g=>m(Ds(n[0],n[o-1],g)):m}function LP(n){const e=[0];return(function(t,r){const i=t[t.length-1];for(let o=1;o<=r;o++){const l=Vo(0,r,o);t.push(jt(i,1,l))}})(e,n.length-1),e}function Ph({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=(g=>Array.isArray(g)&&typeof g[0]!="number")(r)?r.map(z1):z1(r),o={done:!1,value:e[0]},l=(function(g,v){return g.map(b=>b*v)})(t&&t.length===e.length?t:LP(e),n),u=MP(l,e,{ease:Array.isArray(i)?i:(h=e,m=i,h.map(()=>m||q2).splice(0,h.length-1))});var h,m;return{calculatedDuration:n,next:g=>(o.value=u(g),o.done=g>=n,o)}}const OP=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Tt.update(e,!0),stop:()=>yi(e),now:()=>on.isProcessing?on.timestamp:ss.now()}},VP={decay:U1,inertia:U1,tween:Ph,keyframes:Ph,spring:$2},FP=n=>n/100;class Yp extends M2{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:t,motionValue:r,element:i,keyframes:o}=this.options,l=i?.KeyframeResolver||zg;this.resolver=new l(o,(u,h)=>this.onKeyframesResolved(u,h),t,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:l=0}=this.options,u=Ag(t)?t:VP[t]||Ph;let h,m;u!==Ph&&typeof e[0]!="number"&&(h=Cc(FP,O2(e[0],e[1])),e=[0,100]);const g=u({...this.options,keyframes:e});o==="mirror"&&(m=u({...this.options,keyframes:[...e].reverse(),velocity:-l})),g.calculatedDuration===null&&(g.calculatedDuration=a2(g));const{calculatedDuration:v}=g,b=v+i;return{generator:g,mirroredGenerator:m,mapPercentToKeyframes:h,calculatedDuration:v,resolvedDuration:b,totalDuration:b*(r+1)-i}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState!=="paused"&&e?this.state=this.pendingPlayState:this.pause()}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:i,generator:o,mirroredGenerator:l,mapPercentToKeyframes:u,keyframes:h,calculatedDuration:m,totalDuration:g,resolvedDuration:v}=r;if(this.startTime===null)return o.next(0);const{delay:b,repeat:S,repeatType:T,repeatDelay:_,onUpdate:D}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-g/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const O=this.currentTime-b*(this.speed>=0?1:-1),z=this.speed>=0?O<0:O>g;this.currentTime=Math.max(O,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=g);let P=this.currentTime,N=o;if(S){const C=Math.min(this.currentTime,g)/v;let V=Math.floor(C),fe=C%1;!fe&&C>=1&&(fe=1),fe===1&&V--,V=Math.min(V,S+1),V%2&&(T==="reverse"?(fe=1-fe,_&&(fe-=_/v)):T==="mirror"&&(N=l)),P=Ds(0,1,fe)*v}const I=z?{done:!1,value:h[0]}:N.next(P);u&&(I.value=u(I.value));let{done:A}=I;z||m===null||(A=this.speed>=0?this.currentTime>=g:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return R&&i!==void 0&&(I.value=od(h,this.options,i)),D&&D(I.value),R&&this.finish(),I}get duration(){const{resolved:e}=this;return e?Ns(e.calculatedDuration):0}get time(){return Ns(this.currentTime)}set time(e){e=Cs(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Ns(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:e=OP,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;this._resolved?(this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0):this.pendingPlayState="paused"}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const UP=new Set(["opacity","clipPath","filter","transform"]);function zP(n,e,t,{delay:r=0,duration:i=300,repeat:o=0,repeatType:l="loop",ease:u="easeInOut",times:h}={}){const m={[e]:t};h&&(m.offset=h);const g=c2(u,i);return Array.isArray(g)&&(m.easing=g),n.animate(m,{delay:r,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}const BP=yg(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),B1={anticipate:b2,backInOut:x2,circInOut:S2};class $1 extends M2{constructor(e){super(e);const{name:t,motionValue:r,element:i,keyframes:o}=this.options;this.resolver=new D2(o,(l,u)=>this.onKeyframesResolved(l,u),t,r,i),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:i,ease:o,type:l,motionValue:u,name:h,startTime:m}=this.options;if(!u.owner||!u.owner.current)return!1;var g;if(typeof o=="string"&&_h()&&o in B1&&(o=B1[o]),Ag((g=this.options).type)||g.type==="spring"||!l2(g.ease)){const{onComplete:b,onUpdate:S,motionValue:T,element:_,...D}=this.options,O=(function(z,P){const N=new Yp({...P,keyframes:z,repeat:0,delay:0,isGenerator:!0});let I={done:!1,value:z[0]};const A=[];let R=0;for(;!I.done&&R<2e4;)I=N.sample(R),A.push(I.value),R+=10;return{times:void 0,keyframes:A,duration:R-10,ease:"linear"}})(e,D);(e=O.keyframes).length===1&&(e[1]=e[0]),r=O.duration,i=O.times,o=O.ease,l="keyframes"}const v=zP(u.owner.current,h,e,{...this.options,duration:r,times:i,ease:o});return v.startTime=m??this.calcStartTime(),this.pendingTimeline?(S1(v,this.pendingTimeline),this.pendingTimeline=void 0):v.onfinish=()=>{const{onComplete:b}=this.options;u.set(od(e,this.options,t)),b&&b(),this.cancel(),this.resolveFinishedPromise()},{animation:v,duration:r,times:i,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Ns(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Ns(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=Cs(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(this._resolved){const{resolved:t}=this;if(!t)return Kn;const{animation:r}=t;S1(r,e)}else this.pendingTimeline=e;return Kn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:i,type:o,ease:l,times:u}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:m,onUpdate:g,onComplete:v,element:b,...S}=this.options,T=new Yp({...S,keyframes:r,duration:i,type:o,ease:l,times:u,isGenerator:!0}),_=Cs(this.time);m.setWithVelocity(T.sample(_-10).value,T.sample(_).value,10)}const{onStop:h}=this.options;h&&h(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:i,repeatType:o,damping:l,type:u}=e;if(!(t&&t.owner&&t.owner.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:m}=t.owner.getProps();return BP()&&r&&UP.has(r)&&!h&&!m&&!i&&o!=="mirror"&&l!==0&&u!=="inertia"}}const $P={type:"spring",stiffness:500,damping:25,restSpeed:10},qP={type:"keyframes",duration:.8},HP={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},WP=(n,{keyframes:e})=>e.length>2?qP:Ia.has(n)?n.startsWith("scale")?{type:"spring",stiffness:550,damping:e[1]===0?2*Math.sqrt(550):30,restSpeed:10}:$P:HP,$g=(n,e,t,r={},i,o)=>l=>{const u=_g(r,n)||{},h=u.delay||r.delay||0;let{elapsed:m=0}=r;m-=Cs(h);let g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-m,onUpdate:b=>{e.set(b),u.onUpdate&&u.onUpdate(b)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:n,motionValue:e,element:o?void 0:i};(function({when:b,delay:S,delayChildren:T,staggerChildren:_,staggerDirection:D,repeat:O,repeatType:z,repeatDelay:P,from:N,elapsed:I,...A}){return!!Object.keys(A).length})(u)||(g={...g,...WP(n,g)}),g.duration&&(g.duration=Cs(g.duration)),g.repeatDelay&&(g.repeatDelay=Cs(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(v=!0)),v&&!o&&e.get()!==void 0){const b=od(g.keyframes,u);if(b!==void 0)return Tt.update(()=>{g.onUpdate(b),g.onComplete()}),new KA([])}return!o&&$1.supports(g)?new $1(g):new Yp(g)};function GP({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function H2(n,e,{delay:t=0,transitionOverride:r,type:i}={}){var o;let{transition:l=n.getDefaultTransition(),transitionEnd:u,...h}=e;r&&(l=r);const m=[],g=i&&n.animationState&&n.animationState.getState()[i];for(const v in h){const b=n.getValue(v,(o=n.latestValues[v])!==null&&o!==void 0?o:null),S=h[v];if(S===void 0||g&&GP(g,v))continue;const T={delay:t,..._g(l||{},v)};let _=!1;if(window.MotionHandoffAnimation){const O=m2(n);if(O){const z=window.MotionHandoffAnimation(O,v,Tt);z!==null&&(T.startTime=z,_=!0)}}qp(n,v),b.start($g(v,b,S,n.shouldReduceMotion&&f2.has(v)?{type:!1}:T,n,_));const D=b.animation;D&&m.push(D)}return u&&Promise.all(m).then(()=>{Tt.update(()=>{u&&(function(v,b){const S=ad(v,b);let{transitionEnd:T={},transition:_={},...D}=S||{};D={...D,...T};for(const O in D)tP(v,O,kA(D[O]))})(n,u)})}),m}function Xp(n,e,t={}){var r;const i=ad(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(o=t.transitionOverride);const l=i?()=>Promise.all(H2(n,i,t)):()=>Promise.resolve(),u=n.variantChildren&&n.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:v,staggerDirection:b}=o;return(function(S,T,_=0,D=0,O=1,z){const P=[],N=(S.variantChildren.size-1)*D,I=O===1?(A=0)=>A*D:(A=0)=>N-A*D;return Array.from(S.variantChildren).sort(KP).forEach((A,R)=>{A.notify("AnimationStart",T),P.push(Xp(A,T,{...z,delay:_+I(R)}).then(()=>A.notify("AnimationComplete",T)))}),Promise.all(P)})(n,e,g+m,v,b,t)}:()=>Promise.resolve(),{when:h}=o;if(h){const[m,g]=h==="beforeChildren"?[l,u]:[u,l];return m().then(()=>g())}return Promise.all([l(),u(t.delay)])}function KP(n,e){return n.sortNodePosition(e)}const QP=xg.length;function W2(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent&&W2(n.parent)||{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<QP;t++){const r=xg[t],i=n.props[r];(fc(i)||i===!1)&&(e[r]=i)}return e}const YP=[...vg].reverse(),XP=vg.length;function JP(n){return e=>Promise.all(e.map(({animation:t,options:r})=>(function(i,o,l={}){let u;if(i.notify("AnimationStart",o),Array.isArray(o)){const h=o.map(m=>Xp(i,m,l));u=Promise.all(h)}else if(typeof o=="string")u=Xp(i,o,l);else{const h=typeof o=="function"?ad(i,o,l.custom):o;u=Promise.all(H2(i,h,l))}return u.then(()=>{i.notify("AnimationComplete",o)})})(n,t,r)))}function ZP(n){let e=JP(n),t=q1(),r=!0;const i=l=>(u,h)=>{var m;const g=ad(n,h,l==="exit"?(m=n.presenceContext)===null||m===void 0?void 0:m.custom:void 0);if(g){const{transition:v,transitionEnd:b,...S}=g;u={...u,...S,...b}}return u};function o(l){const{props:u}=n,h=W2(n.parent)||{},m=[],g=new Set;let v={},b=1/0;for(let T=0;T<XP;T++){const _=YP[T],D=t[_],O=u[_]!==void 0?u[_]:h[_],z=fc(O),P=_===l?D.isActive:null;P===!1&&(b=T);let N=O===h[_]&&O!==u[_]&&z;if(N&&r&&n.manuallyAnimateOnMount&&(N=!1),D.protectedKeys={...v},!D.isActive&&P===null||!O&&!D.prevProp||sd(O)||typeof O=="boolean")continue;const I=e4(D.prevProp,O);let A=I||_===l&&D.isActive&&!N&&z||T>b&&z,R=!1;const C=Array.isArray(O)?O:[O];let V=C.reduce(i(_),{});P===!1&&(V={});const{prevResolvedValues:fe={}}=D,Te={...fe,...V},Re=ke=>{A=!0,g.has(ke)&&(R=!0,g.delete(ke)),D.needsAnimating[ke]=!0;const Ie=n.getValue(ke);Ie&&(Ie.liveStyle=!1)};for(const ke in Te){const Ie=V[ke],st=fe[ke];if(v.hasOwnProperty(ke))continue;let Y=!1;Y=Up(Ie)&&Up(st)?!i2(Ie,st):Ie!==st,Y?Ie!=null?Re(ke):g.add(ke):Ie!==void 0&&g.has(ke)?Re(ke):D.protectedKeys[ke]=!0}D.prevProp=O,D.prevResolvedValues=V,D.isActive&&(v={...v,...V}),r&&n.blockInitialAnimation&&(A=!1),A&&(!(N&&I)||R)&&m.push(...C.map(ke=>({animation:ke,options:{type:_}})))}if(g.size){const T={};g.forEach(_=>{const D=n.getBaseTarget(_),O=n.getValue(_);O&&(O.liveStyle=!0),T[_]=D??null}),m.push({animation:T})}let S=!!m.length;return!r||u.initial!==!1&&u.initial!==u.animate||n.manuallyAnimateOnMount||(S=!1),r=!1,S?e(m):Promise.resolve()}return{animateChanges:o,setActive:function(l,u){var h;if(t[l].isActive===u)return Promise.resolve();(h=n.variantChildren)===null||h===void 0||h.forEach(g=>{var v;return(v=g.animationState)===null||v===void 0?void 0:v.setActive(l,u)}),t[l].isActive=u;const m=o(l);for(const g in t)t[g].protectedKeys={};return m},setAnimateFunction:function(l){e=l(n)},getState:()=>t,reset:()=>{t=q1(),r=!0}}}function e4(n,e){return typeof e=="string"?e!==n:!!Array.isArray(e)&&!i2(e,n)}function sa(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function q1(){return{animate:sa(!0),whileInView:sa(),whileHover:sa(),whileTap:sa(),whileDrag:sa(),whileFocus:sa(),exit:sa()}}class vi{constructor(e){this.isMounted=!1,this.node=e}update(){}}let t4=0;const n4={animation:{Feature:class extends vi{constructor(n){super(n),n.animationState||(n.animationState=ZP(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();sd(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:e}=this.node.prevProps||{};n!==e&&this.updateAnimationControlsSubscription()}unmount(){var n;this.node.animationState.reset(),(n=this.unmountControls)===null||n===void 0||n.call(this)}}},exit:{Feature:class extends vi{constructor(){super(...arguments),this.id=t4++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:e}=this.node.presenceContext,{isPresent:t}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===t)return;const r=this.node.animationState.setActive("exit",!n);e&&!n&&r.then(()=>e(this.id))}mount(){const{register:n}=this.node.presenceContext||{};n&&(this.unmount=n(this.id))}unmount(){}}}};function gc(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function Nc(n){return{point:{x:n.pageX,y:n.pageY}}}function Jl(n,e,t,r){return gc(n,e,(i=>o=>jg(o)&&i(o,Nc(o)))(t),r)}const H1=(n,e)=>Math.abs(n-e);class G2{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const g=Zf(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,b=(function(O,z){const P=H1(O.x,z.x),N=H1(O.y,z.y);return Math.sqrt(P**2+N**2)})(g.offset,{x:0,y:0})>=3;if(!v&&!b)return;const{point:S}=g,{timestamp:T}=on;this.history.push({...S,timestamp:T});const{onStart:_,onMove:D}=this.handlers;v||(_&&_(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Jf(v,this.transformPagePoint),Tt.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:b,onSessionEnd:S,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const _=Zf(g.type==="pointercancel"?this.lastMoveEventInfo:Jf(v,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,_),S&&S(g,_)},!jg(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const l=Jf(Nc(e),this.transformPagePoint),{point:u}=l,{timestamp:h}=on;this.history=[{...u,timestamp:h}];const{onSessionStart:m}=t;m&&m(e,Zf(l,this.history)),this.removeListeners=Cc(Jl(this.contextWindow,"pointermove",this.handlePointerMove),Jl(this.contextWindow,"pointerup",this.handlePointerUp),Jl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),yi(this.updatePoint)}}function Jf(n,e){return e?{point:e(n.point)}:n}function W1(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Zf({point:n},e){return{point:n,delta:W1(n,K2(e)),offset:W1(n,r4(e)),velocity:s4(e,.1)}}function r4(n){return n[0]}function K2(n){return n[n.length-1]}function s4(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=K2(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Cs(e)));)t--;if(!r)return{x:0,y:0};const o=Ns(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function Qn(n){return n.max-n.min}function G1(n,e,t,r=.5){n.origin=r,n.originPoint=jt(e.min,e.max,n.origin),n.scale=Qn(t)/Qn(e),n.translate=jt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=.9999&&n.scale<=1.0001||isNaN(n.scale))&&(n.scale=1),(n.translate>=-.01&&n.translate<=.01||isNaN(n.translate))&&(n.translate=0)}function Zl(n,e,t,r){G1(n.x,e.x,t.x,r?r.originX:void 0),G1(n.y,e.y,t.y,r?r.originY:void 0)}function K1(n,e,t){n.min=t.min+e.min,n.max=n.min+Qn(e)}function Q1(n,e,t){n.min=e.min-t.min,n.max=n.min+Qn(e)}function ec(n,e,t){Q1(n.x,e.x,t.x),Q1(n.y,e.y,t.y)}function Y1(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function X1(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}const ep=.35;function J1(n,e,t){return{min:Z1(n,e),max:Z1(n,t)}}function Z1(n,e){return typeof n=="number"?n:n[e]||0}const Q2=()=>({x:{min:0,max:0},y:{min:0,max:0}});function ir(n){return[n("x"),n("y")]}function Y2({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function tp(n){return n===void 0||n===1}function Jp({scale:n,scaleX:e,scaleY:t}){return!tp(n)||!tp(e)||!tp(t)}function ia(n){return Jp(n)||X2(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function X2(n){return eb(n.x)||eb(n.y)}function eb(n){return n&&n!=="0%"}function jh(n,e,t){return t+e*(n-t)}function tb(n,e,t,r,i){return i!==void 0&&(n=jh(n,i,r)),jh(n,t,r)+e}function Zp(n,e=0,t=1,r,i){n.min=tb(n.min,e,t,r,i),n.max=tb(n.max,e,t,r,i)}function nb(n,{x:e,y:t}){Zp(n.x,e.translate,e.scale,e.originPoint),Zp(n.y,t.translate,t.scale,t.originPoint)}const rb=.999999999999,sb=1.0000000000001;function So(n,e){n.min=n.min+e,n.max=n.max+e}function ib(n,e,t,r,i=.5){Zp(n,e,t,jt(n.min,n.max,i),r)}function fo(n,e){ib(n.x,e.x,e.scaleX,e.scale,e.originX),ib(n.y,e.y,e.scaleY,e.scale,e.originY)}function J2(n,e){return Y2((function(t,r){if(!r)return t;const i=r({x:t.left,y:t.top}),o=r({x:t.right,y:t.bottom});return{top:i.y,left:i.x,bottom:o.y,right:o.x}})(n.getBoundingClientRect(),e))}const Z2=({current:n})=>n?n.ownerDocument.defaultView:null,i4=new WeakMap;class a4{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const{dragSnapToOrigin:i}=this.getProps();this.panSession=new G2(e,{onSessionStart:o=>{const{dragSnapToOrigin:l}=this.getProps();l?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Nc(o).point)},onStart:(o,l)=>{const{drag:u,dragPropagation:h,onDragStart:m}=this.getProps();if(u&&!h&&(this.openDragLock&&this.openDragLock(),this.openDragLock=(g=u)==="x"||g==="y"?Ir[g]?null:(Ir[g]=!0,()=>{Ir[g]=!1}):Ir.x||Ir.y?null:(Ir.x=Ir.y=!0,()=>{Ir.x=Ir.y=!1}),!this.openDragLock))return;var g;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ir(b=>{let S=this.getAxisMotionValue(b).get()||0;if(rs.test(S)){const{projection:T}=this.visualElement;if(T&&T.layout){const _=T.layout.layoutBox[b];_&&(S=Qn(_)*(parseFloat(S)/100))}}this.originPoint[b]=S}),m&&Tt.postRender(()=>m(o,l)),qp(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},onMove:(o,l)=>{const{dragPropagation:u,dragDirectionLock:h,onDirectionLock:m,onDrag:g}=this.getProps();if(!u&&!this.openDragLock)return;const{offset:v}=l;if(h&&this.currentDirection===null)return this.currentDirection=(function(b,S=10){let T=null;return Math.abs(b.y)>S?T="y":Math.abs(b.x)>S&&(T="x"),T})(v),void(this.currentDirection!==null&&m&&m(this.currentDirection));this.updateAxis("x",l.point,v),this.updateAxis("y",l.point,v),this.visualElement.render(),g&&g(o,l)},onSessionEnd:(o,l)=>this.stop(o,l),resumeAnimation:()=>ir(o=>{var l;return this.getAnimationState(o)==="paused"&&((l=this.getAxisMotionValue(o).animation)===null||l===void 0?void 0:l.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:i,contextWindow:Z2(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Tt.postRender(()=>o(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Vu(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=(function(u,{min:h,max:m},g){return h!==void 0&&u<h?u=g?jt(h,u,g.min):Math.max(u,h):m!==void 0&&u>m&&(u=g?jt(m,u,g.max):Math.min(u,m)),u})(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;t&&xo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!i)&&(function(l,{top:u,left:h,bottom:m,right:g}){return{x:Y1(l.x,h,g),y:Y1(l.y,u,m)}})(i.layoutBox,t),this.elastic=(function(l=ep){return l===!1?l=0:l===!0&&(l=ep),{x:J1(l,"left","right"),y:J1(l,"top","bottom")}})(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ir(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=(function(u,h){const m={};return h.min!==void 0&&(m.min=h.min-u.min),h.max!==void 0&&(m.max=h.max-u.min),m})(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!xo(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=(function(u,h,m){const g=J2(u,m),{scroll:v}=h;return v&&(So(g.x,v.offset.x),So(g.y,v.offset.y)),g})(r,i.root,this.visualElement.getTransformPagePoint());let l=(function(u,h){return{x:X1(u.x,h.x),y:X1(u.y,h.y)}})(i.layout.layoutBox,o);if(t){const u=t((function({x:h,y:m}){return{top:m.min,right:h.max,bottom:m.max,left:h.min}})(l));this.hasMutatedConstraints=!!u,u&&(l=Y2(u))}return l}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},m=ir(g=>{if(!Vu(g,t,this.currentDirection))return;let v=h&&h[g]||{};l&&(v={min:0,max:0});const b=i?200:1e6,S=i?40:1e7,T={type:"inertia",velocity:r?e[g]:0,bounceStiffness:b,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(g,T)});return Promise.all(m).then(u)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return qp(this.visualElement,e),r.start($g(e,r,0,t,this.visualElement,!1))}stopAnimation(){ir(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ir(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps();return r[t]||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ir(t=>{const{drag:r}=this.getProps();if(!Vu(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(t);if(i&&i.layout){const{min:l,max:u}=i.layout.layoutBox[t];o.set(e[t]-jt(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!xo(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ir(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const h=u.get();i[l]=(function(m,g){let v=.5;const b=Qn(m),S=Qn(g);return S>b?v=Vo(g.min,g.max-b,m.min):b>S&&(v=Vo(m.min,m.max-S,g.min)),Ds(0,1,v)})({min:h,max:h},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ir(l=>{if(!Vu(l,e,null))return;const u=this.getAxisMotionValue(l),{min:h,max:m}=this.constraints[l];u.set(jt(h,m,i[l]))})}addListeners(){if(!this.visualElement.current)return;i4.set(this.visualElement,this);const e=Jl(this.visualElement.current,"pointerdown",u=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(u)}),t=()=>{const{dragConstraints:u}=this.getProps();xo(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",t);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Tt.read(t);const o=gc(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(ir(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=u[m].translate,g.set(g.get()+u[m].translate))}),this.visualElement.render())});return()=>{o(),e(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:l=ep,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function Vu(n,e,t){return!(e!==!0&&e!==n||t!==null&&t!==n)}const ab=n=>(e,t)=>{n&&Tt.postRender(()=>n(e,t))},nh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ob(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Vl={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string"){if(!De.test(n))return n;n=parseFloat(n)}return`${ob(n,e.target.x)}% ${ob(n,e.target.y)}%`}},o4={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=ji.parse(n);if(i.length>5)return r;const o=ji.createTransformer(n),l=typeof i[0]!="number"?1:0,u=t.x.scale*e.x,h=t.y.scale*e.y;i[0+l]/=u,i[1+l]/=h;const m=jt(u,h,.5);return typeof i[2+l]=="number"&&(i[2+l]/=m),typeof i[3+l]=="number"&&(i[3+l]/=m),o(i)}};class l4 extends U.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;var l;l=c4,Object.assign(Ih,l),o&&(t.group&&t.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),nh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:o}=this.props,l=r.projection;return l&&(l.isPresent=o,i||e.layoutDependency!==t||t===void 0?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||Tt.postRender(()=>{const u=l.getStack();u&&u.members.length||this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),wg.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function eT(n){const[e,t]=UE(),r=U.useContext(fg);return p.jsx(l4,{...n,layoutGroup:r,switchLayoutGroup:U.useContext(KE),isPresent:e,safeToRemove:t})}const c4={borderRadius:{...Vl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vl,borderTopRightRadius:Vl,borderBottomLeftRadius:Vl,borderBottomRightRadius:Vl,boxShadow:o4},u4=(n,e)=>n.depth-e.depth;class h4{constructor(){this.children=[],this.isDirty=!1}add(e){Rg(this.children,e),this.isDirty=!0}remove(e){Dg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(u4),this.isDirty=!1,this.children.forEach(e)}}const tT=["TopLeft","TopRight","BottomLeft","BottomRight"],d4=tT.length,lb=n=>typeof n=="string"?parseFloat(n):n,cb=n=>typeof n=="number"||De.test(n);function ub(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const f4=nT(0,.5,w2),p4=nT(.5,.95,Kn);function nT(n,e,t){return r=>r<n?0:r>e?1:t(Vo(n,e,r))}function hb(n,e){n.min=e.min,n.max=e.max}function sr(n,e){hb(n.x,e.x),hb(n.y,e.y)}function db(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function fb(n,e,t,r,i){return n=jh(n-=e,1/t,r),i!==void 0&&(n=jh(n,1/i,r)),n}function pb(n,e,[t,r,i],o,l){(function(u,h=0,m=1,g=.5,v,b=u,S=u){if(rs.test(h)&&(h=parseFloat(h),h=jt(S.min,S.max,h/100)-S.min),typeof h!="number")return;let T=jt(b.min,b.max,g);u===b&&(T-=h),u.min=fb(u.min,h,m,T,v),u.max=fb(u.max,h,m,T,v)})(n,e[t],e[r],e[i],e.scale,o,l)}const m4=["x","scaleX","originX"],g4=["y","scaleY","originY"];function mb(n,e,t,r){pb(n.x,e,m4,t?t.x:void 0,r?r.x:void 0),pb(n.y,e,g4,t?t.y:void 0,r?r.y:void 0)}function gb(n){return n.translate===0&&n.scale===1}function rT(n){return gb(n.x)&&gb(n.y)}function yb(n,e){return n.min===e.min&&n.max===e.max}function vb(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function sT(n,e){return vb(n.x,e.x)&&vb(n.y,e.y)}function xb(n){return Qn(n.x)/Qn(n.y)}function bb(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class y4{constructor(){this.members=[]}add(e){Rg(this.members,e),e.scheduleRender()}remove(e){if(Dg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return!!r&&(this.promote(r),!0)}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const oa={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ql=typeof window<"u"&&window.MotionDebug!==void 0,np=["","X","Y","Z"],v4={visibility:"hidden"};let x4=0;function rp(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function iT(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=m2(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Tt,!(i||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&iT(r)}function aT({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=e?.()){this.id=x4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ql&&(oa.totalNodes=oa.resolvedTargetDeltas=oa.recalculatedProjection=0),this.nodes.forEach(S4),this.nodes.forEach(N4),this.nodes.forEach(I4),this.nodes.forEach(E4),ql&&window.MotionDebug.record(oa)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new h4)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Mg),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;var u;this.isSVG=(u=o)instanceof SVGElement&&u.tagName!=="svg",this.instance=o;const{layoutId:h,layout:m,visualElement:g}=this.options;if(g&&!g.current&&g.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(m||h)&&(this.isLayoutDirty=!0),n){let v;const b=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=(function(S,T){const _=ss.now(),D=({timestamp:O})=>{const z=O-_;z>=T&&(yi(D),S(z-T))};return Tt.read(D,!0),()=>yi(D)})(b,250),nh.hasAnimatedSinceResize&&(nh.hasAnimatedSinceResize=!1,this.nodes.forEach(Sb))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&g&&(h||m)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:b,hasRelativeTargetChanged:S,layout:T})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const _=this.options.transition||g.getDefaultTransition()||j4,{onLayoutAnimationStart:D,onLayoutAnimationComplete:O}=g.getProps(),z=!this.targetLayout||!sT(this.targetLayout,T)||S,P=!b&&S;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||P||b&&(z||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,P);const N={..._g(_,"layout"),onPlay:D,onComplete:O};(g.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else b||Sb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,yi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_4),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&iT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(wb);this.isUpdating||this.nodes.forEach(k4),this.isUpdating=!1,this.nodes.forEach(C4),this.nodes.forEach(b4),this.nodes.forEach(w4),this.clearAllSnapshots();const o=ss.now();on.delta=Ds(0,1e3/60,o-on.timestamp),on.timestamp=o,on.isProcessing=!0,Wf.update.process(on),Wf.preRender.process(on),Wf.render.process(on),on.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,wg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(T4),this.sharedNodes.forEach(A4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Tt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Tt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!rT(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;o&&(l||ia(this.latestValues)||m)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);var h;return o&&(u=this.removeTransform(u)),Nb((h=u).x),Nb(h.y),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return{x:{min:0,max:0},y:{min:0,max:0}};const u=l.measureViewportBox();if(!(!((o=this.scroll)===null||o===void 0)&&o.wasRoot||this.path.some(R4))){const{scroll:h}=this.root;h&&(So(u.x,h.offset.x),So(u.y,h.offset.y))}return u}removeElementScroll(o){var l;const u={x:{min:0,max:0},y:{min:0,max:0}};if(sr(u,o),(l=this.scroll)===null||l===void 0?void 0:l.wasRoot)return u;for(let h=0;h<this.path.length;h++){const m=this.path[h],{scroll:g,options:v}=m;m!==this.root&&g&&v.layoutScroll&&(g.wasRoot&&sr(u,o),So(u.x,g.offset.x),So(u.y,g.offset.y))}return u}applyTransform(o,l=!1){const u={x:{min:0,max:0},y:{min:0,max:0}};sr(u,o);for(let h=0;h<this.path.length;h++){const m=this.path[h];!l&&m.options.layoutScroll&&m.scroll&&m!==m.root&&fo(u,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),ia(m.latestValues)&&fo(u,m.latestValues)}return ia(this.latestValues)&&fo(u,this.latestValues),u}removeTransform(o){const l={x:{min:0,max:0},y:{min:0,max:0}};sr(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!ia(h.latestValues))continue;Jp(h.latestValues)&&h.updateSnapshot();const m=Q2();sr(m,h.measurePageBox()),mb(l,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return ia(this.latestValues)&&mb(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade===void 0||o.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==on.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(o||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:g}=this.options;if(this.layout&&(m||g)){if(this.resolvedRelativeTargetAt=on.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},ec(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),sr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var v,b,S;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),v=this.target,b=this.relativeTarget,S=this.relativeParent.target,K1(v.x,b.x,S.x),K1(v.y,b.y,S.y)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sr(this.target,this.layout.layoutBox),nb(this.target,this.targetDelta)):sr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},ec(this.relativeTargetOrigin,this.target,T.target),sr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ql&&oa.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Jp(this.parent.latestValues)&&!X2(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===on.timestamp&&(h=!1),h)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!m&&!g)return;sr(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,b=this.treeScale.y;(function(T,_,D,O=!1){const z=D.length;if(!z)return;let P,N;_.x=_.y=1;for(let I=0;I<z;I++){P=D[I],N=P.projectionDelta;const{visualElement:A}=P.options;A&&A.props.style&&A.props.style.display==="contents"||(O&&P.options.layoutScroll&&P.scroll&&P!==P.root&&fo(T,{x:-P.scroll.offset.x,y:-P.scroll.offset.y}),N&&(_.x*=N.x.scale,_.y*=N.y.scale,nb(T,N)),O&&ia(P.latestValues)&&fo(T,P.latestValues))}_.x<sb&&_.x>rb&&(_.x=1),_.y<sb&&_.y>rb&&(_.y=1)})(this.layoutCorrected,this.treeScale,this.path,u),!l.layout||l.target||this.treeScale.x===1&&this.treeScale.y===1||(l.target=l.layout.layoutBox,l.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:S}=l;S?(this.projectionDelta&&this.prevProjectionDelta?(db(this.prevProjectionDelta.x,this.projectionDelta.x),db(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Zl(this.projectionDelta,this.layoutCorrected,S,this.latestValues),this.treeScale.x===v&&this.treeScale.y===b&&bb(this.projectionDelta.x,this.prevProjectionDelta.x)&&bb(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S)),ql&&oa.recalculatedProjection++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(o,l=!1){const u=this.snapshot,h=u?u.latestValues:{},m={...this.latestValues},g={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const v={x:{min:0,max:0},y:{min:0,max:0}},b=(u?u.source:void 0)!==(this.layout?this.layout.source:void 0),S=this.getStack(),T=!S||S.members.length<=1,_=!!(b&&!T&&this.options.crossfade===!0&&!this.path.some(P4));let D;this.animationProgress=0,this.mixTargetDelta=O=>{const z=O/1e3;var P,N;Eb(g.x,o.x,z),Eb(g.y,o.y,z),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ec(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),(function(I,A,R,C){Tb(I.x,A.x,R.x,C),Tb(I.y,A.y,R.y,C)})(this.relativeTarget,this.relativeTargetOrigin,v,z),D&&(P=this.relativeTarget,N=D,yb(P.x,N.x)&&yb(P.y,N.y))&&(this.isProjectionDirty=!1),D||(D={x:{min:0,max:0},y:{min:0,max:0}}),sr(D,this.relativeTarget)),b&&(this.animationValues=m,(function(I,A,R,C,V,fe){V?(I.opacity=jt(0,R.opacity!==void 0?R.opacity:1,f4(C)),I.opacityExit=jt(A.opacity!==void 0?A.opacity:1,0,p4(C))):fe&&(I.opacity=jt(A.opacity!==void 0?A.opacity:1,R.opacity!==void 0?R.opacity:1,C));for(let Te=0;Te<d4;Te++){const Re=`border${tT[Te]}Radius`;let ke=ub(A,Re),Ie=ub(R,Re);ke===void 0&&Ie===void 0||(ke||(ke=0),Ie||(Ie=0),ke===0||Ie===0||cb(ke)===cb(Ie)?(I[Re]=Math.max(jt(lb(ke),lb(Ie),C),0),(rs.test(Ie)||rs.test(ke))&&(I[Re]+="%")):I[Re]=Ie)}(A.rotate||R.rotate)&&(I.rotate=jt(A.rotate||0,R.rotate||0,C))})(m,h,this.latestValues,z,_,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(yi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Tt.update(()=>{nh.hasAnimatedSinceResize=!0,this.currentAnimation=(function(l,u,h){const m=wn(l)?l:Yl(l);return m.start($g("",m,u,h)),m.animation})(0,1e3,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:h,latestValues:m}=o;if(l&&u&&h){if(this!==o&&this.layout&&h&&oT(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const g=Qn(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+g;const v=Qn(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+v}sr(l,u),fo(l,m),Zl(this.projectionDeltaWithTransform,this.layoutCorrected,l,m)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new y4),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return!o||o.lead===this}getLead(){var o;const{layoutId:l}=this.options;return l&&((o=this.getStack())===null||o===void 0?void 0:o.lead)||this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return!!o&&o.relegate(this)}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const h={};u.z&&rp("z",o,h,this.animationValues);for(let m=0;m<np.length;m++)rp(`rotate${np[m]}`,o,h,this.animationValues),rp(`skew${np[m]}`,o,h,this.animationValues);o.render();for(const m in h)o.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);o.scheduleRender()}getProjectionStyles(o){var l,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return v4;const h={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Zu(o?.pointerEvents)||"",h.transform=m?m(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const T={};return this.options.layoutId&&(T.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,T.pointerEvents=Zu(o?.pointerEvents)||""),this.hasProjected&&!ia(this.latestValues)&&(T.transform=m?m({},""):"none",this.hasProjected=!1),T}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=(function(T,_,D){let O="";const z=T.x.translate/_.x,P=T.y.translate/_.y,N=D?.z||0;if((z||P||N)&&(O=`translate3d(${z}px, ${P}px, ${N}px) `),_.x===1&&_.y===1||(O+=`scale(${1/_.x}, ${1/_.y}) `),D){const{transformPerspective:R,rotate:C,rotateX:V,rotateY:fe,skewX:Te,skewY:Re}=D;R&&(O=`perspective(${R}px) ${O}`),C&&(O+=`rotate(${C}deg) `),V&&(O+=`rotateX(${V}deg) `),fe&&(O+=`rotateY(${fe}deg) `),Te&&(O+=`skewX(${Te}deg) `),Re&&(O+=`skewY(${Re}deg) `)}const I=T.x.scale*_.x,A=T.y.scale*_.y;return I===1&&A===1||(O+=`scale(${I}, ${A})`),O||"none"})(this.projectionDeltaWithTransform,this.treeScale,v),m&&(h.transform=m(v,h.transform));const{x:b,y:S}=this.projectionDelta;h.transformOrigin=`${100*b.origin}% ${100*S.origin}% 0`,g.animationValues?h.opacity=g===this?(u=(l=v.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:h.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const T in Ih){if(v[T]===void 0)continue;const{correct:_,applyTo:D}=Ih[T],O=h.transform==="none"?v[T]:_(v[T],g);if(D){const z=D.length;for(let P=0;P<z;P++)h[D[P]]=O}else h[T]=O}return this.options.layoutId&&(h.pointerEvents=g===this?Zu(o?.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(wb),this.root.sharedNodes.clear()}}}function b4(n){n.updateLayout()}function w4(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:o}=n.options,l=t.source!==n.layout.source;o==="size"?ir(v=>{const b=l?t.measuredBox[v]:t.layoutBox[v],S=Qn(b);b.min=r[v].min,b.max=b.min+S}):oT(o,t.layoutBox,r)&&ir(v=>{const b=l?t.measuredBox[v]:t.layoutBox[v],S=Qn(r[v]);b.max=b.min+S,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[v].max=n.relativeTarget[v].min+S)});const u={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Zl(u,r,t.layoutBox);const h={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};l?Zl(h,n.applyTransform(i,!0),t.measuredBox):Zl(h,r,t.layoutBox);const m=!rT(u);let g=!1;if(!n.resumeFrom){const v=n.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:b,layout:S}=v;if(b&&S){const T={x:{min:0,max:0},y:{min:0,max:0}};ec(T,t.layoutBox,b.layoutBox);const _={x:{min:0,max:0},y:{min:0,max:0}};ec(_,r,S.layoutBox),sT(T,_)||(g=!0),v.options.layoutRoot&&(n.relativeTarget=_,n.relativeTargetOrigin=T,n.relativeParent=v)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:h,layoutDelta:u,hasLayoutChanged:m,hasRelativeTargetChanged:g})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function S4(n){ql&&oa.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function E4(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function T4(n){n.clearSnapshot()}function wb(n){n.clearMeasurements()}function k4(n){n.isLayoutDirty=!1}function C4(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Sb(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function N4(n){n.resolveTargetDelta()}function I4(n){n.calcProjection()}function _4(n){n.resetSkewAndRotation()}function A4(n){n.removeLeadSnapshot()}function Eb(n,e,t){n.translate=jt(e.translate,0,t),n.scale=jt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Tb(n,e,t,r){n.min=jt(e.min,t.min,r),n.max=jt(e.max,t.max,r)}function P4(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const j4={duration:.45,ease:[.4,0,.1,1]},kb=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Cb=kb("applewebkit/")&&!kb("chrome/")?Math.round:Kn;function Nb(n){n.min=Cb(n.min),n.max=Cb(n.max)}function oT(n,e,t){return n==="position"||n==="preserve-aspect"&&(r=xb(e),i=xb(t),o=.2,!(Math.abs(r-i)<=o));var r,i,o}function R4(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const D4=aT({attachResizeListener:(n,e)=>gc(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sp={current:void 0},lT=aT({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!sp.current){const n=new D4({});n.mount(window),n.setOptions({layoutScroll:!0}),sp.current=n}return sp.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),M4={pan:{Feature:class extends vi{constructor(){super(...arguments),this.removePointerDownListener=Kn}onPointerDown(n){this.session=new G2(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Z2(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:e,onPan:t,onPanEnd:r}=this.node.getProps();return{onSessionStart:ab(n),onStart:ab(e),onMove:t,onEnd:(i,o)=>{delete this.session,r&&Tt.postRender(()=>r(i,o))}}}mount(){this.removePointerDownListener=Jl(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends vi{constructor(n){super(n),this.removeGroupControls=Kn,this.removeListeners=Kn,this.controls=new a4(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Kn}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:lT,MeasureLayout:eT}};function Ib(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i=r["onHover"+t];i&&Tt.postRender(()=>i(e,Nc(e)))}function _b(n,e,t){const{props:r}=n;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i=r["onTap"+(t==="End"?"":t)];i&&Tt.postRender(()=>i(e,Nc(e)))}const em=new WeakMap,ip=new WeakMap,L4=n=>{const e=em.get(n.target);e&&e(n)},O4=n=>{n.forEach(L4)};function V4(n,e,t){const r=(function({root:i,...o}){const l=i||document;ip.has(l)||ip.set(l,{});const u=ip.get(l),h=JSON.stringify(o);return u[h]||(u[h]=new IntersectionObserver(O4,{root:i,...o})),u[h]})(e);return em.set(n,t),r.observe(n),()=>{em.delete(n),r.unobserve(n)}}const F4={some:0,all:1},U4={inView:{Feature:class extends vi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:e,margin:t,amount:r="some",once:i}=n,o={root:e?e.current:void 0,rootMargin:t,threshold:typeof r=="number"?r:F4[r]};return V4(this.node.current,o,l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:m}=this.node.getProps(),g=u?h:m;g&&g(l)})}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:e}=this.node;["amount","margin","root"].some((function({viewport:r={}},{viewport:i={}}={}){return o=>r[o]!==i[o]})(n,e))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends vi{mount(){const{current:n}=this.node;n&&(this.unmount=JA(n,e=>(_b(this.node,e,"Start"),(t,{success:r})=>_b(this.node,t,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends vi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}n&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Cc(gc(this.node.current,"focus",()=>this.onFocus()),gc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends vi{mount(){const{current:n}=this.node;n&&(this.unmount=(function(e,t,r={}){const[i,o,l]=h2(e,r),u=E1(h=>{const{target:m}=h,g=t(h);if(typeof g!="function"||!m)return;const v=E1(b=>{g(b),m.removeEventListener("pointerleave",v)});m.addEventListener("pointerleave",v,o)});return i.forEach(h=>{h.addEventListener("pointerenter",u,o)}),l})(n,e=>(Ib(this.node,e,"Start"),t=>Ib(this.node,t,"End"))))}unmount(){}}}},z4={layout:{ProjectionNode:lT,MeasureLayout:eT}},ap={current:null},Ab={current:!1},B4=[...R2,vn,ji],Pb=new WeakMap,jb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class $4{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=zg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const S=ss.now();this.renderScheduledAt<S&&(this.renderScheduledAt=S,Tt.render(this.render,!1,!0))};const{latestValues:h,renderState:m,onUpdate:g}=l;this.onUpdate=g,this.latestValues=h,this.baseTarget={...h},this.initialValues=t.initial?{...h}:{},this.renderState=m,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=id(t),this.isVariantNode=WE(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...b}=this.scrapeMotionValuesFromProps(t,{},this);for(const S in b){const T=b[S];h[S]!==void 0&&wn(T)&&T.set(h[S],!1)}}mount(e){this.current=e,Pb.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),Ab.current||(function(){if(Ab.current=!0,gg)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),r=()=>ap.current=t.matches;t.addListener(r),r()}else ap.current=!1})(),this.shouldReduceMotion=this.reducedMotionConfig!=="never"&&(this.reducedMotionConfig==="always"||ap.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Pb.delete(this.current),this.projection&&this.projection.unmount(),yi(this.notifyUpdate),yi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ia.has(e),i=t.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Tt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=t.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),o(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in _o){const t=_o[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<jb.length;r++){const i=jb[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o=e["on"+i];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=(function(r,i,o){for(const l in i){const u=i[l],h=o[l];if(wn(u))r.addValue(l,u);else if(wn(h))r.addValue(l,Yl(u,{owner:r}));else if(h!==u)if(r.hasValue(l)){const m=r.getValue(l);m.liveStyle===!0?m.jump(u):m.hasAnimated||m.set(u)}else{const m=r.getStaticValue(l);r.addValue(l,Yl(m!==void 0?m:u,{owner:r}))}}for(const l in o)i[l]===void 0&&r.removeValue(l);return i})(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Yl(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let i=this.latestValues[e]===void 0&&this.current?(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var o;return i!=null&&(typeof i=="string"&&(A2(i)||E2(i))?i=parseFloat(i):(o=i,!B4.find(j2(o))&&ji.test(t)&&(i=N2(e,t))),this.setBaseTarget(e,wn(i)?i.get():i)),wn(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const l=Eg(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);l&&(i=l[e])}if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o===void 0||wn(o)?this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]:o}on(e,t){return this.events[e]||(this.events[e]=new Mg),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class cT extends $4{constructor(){super(...arguments),this.KeyframeResolver=D2}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class q4 extends cT{constructor(){super(...arguments),this.type="html",this.renderInstance=ZE}readValueFromInstance(e,t){if(Ia.has(t)){const i=Ug(t);return i&&i.default||0}{const i=(r=e,window.getComputedStyle(r)),o=(JE(t)?i.getPropertyValue(t):i[t])||0;return typeof o=="string"?o.trim():o}var r}measureInstanceViewportBox(e,{transformPagePoint:t}){return J2(e,t)}build(e,t,r){kg(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return Ig(e,t,r)}}class H4 extends cT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Q2}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ia.has(t)){const r=Ug(t);return r&&r.default||0}return t=e2.has(t)?t:bg(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return r2(e,t,r)}build(e,t,r){Cg(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,i){t2(e,t,0,i)}mount(e){this.isSVGTag=Ng(e.tagName),super.mount(e)}}const W4=(n,e)=>Sg(n)?new H4(e):new q4(e,{allowProjection:n!==U.Fragment}),Qe=yA(HA({...n4,...U4,...M4,...z4},W4)),uT=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();var G4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const K4=U.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:l,...u},h)=>U.createElement("svg",{ref:h,...G4,width:e,height:e,stroke:n,strokeWidth:r?24*Number(t)/Number(e):t,className:uT("lucide",i),...u},[...l.map(([m,g])=>U.createElement(m,g)),...Array.isArray(o)?o:[o]])),Ye=(n,e)=>{const t=U.forwardRef(({className:r,...i},o)=>{return U.createElement(K4,{ref:o,iconNode:e,className:uT(`lucide-${l=n,l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,r),...i});var l});return t.displayName=`${n}`,t},Sa=Ye("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),qg=Ye("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]),tm=Ye("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),Q4=Ye("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),Rh=Ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Y4=Ye("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),nm=Ye("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),X4=Ye("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),hT=Ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),J4=Ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Z4=Ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),dT=Ye("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),ej=Ye("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),fT=Ye("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),pT=Ye("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),tj=Ye("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),mT=Ye("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]),ls=Ye("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),nj=Ye("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),gT=Ye("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),rj=Ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),sj=Ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),ij=Ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),yT=Ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),aj=Ye("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]),oj=Ye("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Fo=Ye("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),lj=Ye("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),rm=Ye("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),cj=Ye("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),ld=Ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),uj=Ye("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Rb=Ye("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),hj=Ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),dj=Ye("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]),fj=Ye("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Hg=Ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Yn({children:n,className:e=""}){return p.jsx("div",{className:`max-w-[95%] mx-auto px-4 sm:px-6 lg:px-8 ${e}`,children:n})}const vT=U.createContext({nivel:"free",isFree:!0,isPro:!1,isUltra:!1});function pj({children:n}){const[e,t]=U.useState("free");U.useEffect(()=>{const i=Et.onAuthStateChanged(async o=>{if(!o)return void t("free");try{const u=await dr(Rt(rt,"users",o.uid));(u.exists()?u.data().plan:"free")==="ultra"&&t("ultra")}catch{}const l=ki(Rt(rt,"assinaturas",o.uid),u=>{const h=u.data();if(!h||!h.ativo)return void t(v=>v==="ultra"?"ultra":"free");const m=Date.now();if(!(typeof h.renovaEm!="number"||h.renovaEm>m))return void t(v=>v==="ultra"?"ultra":"free");const g=String(h.plano||"free").toLowerCase();t(v=>v==="ultra"?"ultra":g)});return()=>l()});return()=>i()},[]);const r={nivel:e,isFree:e==="free",isPro:e==="pro"||e==="ultra",isUltra:e==="ultra"};return p.jsx(vT.Provider,{value:r,children:n})}function Wg(){return U.useContext(vT)}function mj({title:n,description:e,onUpgrade:t}){return p.jsx("div",{className:"flex flex-col items-center justify-center text-center py-20 px-6",children:p.jsxs("div",{className:"max-w-md glass-card rounded-3xl p-8 bg-slate-900/40 border border-white/10 backdrop-blur-xl shadow-2xl space-y-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-slate-50",children:n}),p.jsx("p",{className:"text-slate-300",children:e}),p.jsx("button",{onClick:t,className:"w-full py-2 rounded-xl bg-teal-500/20 border border-teal-300/30 text-teal-300 hover:bg-teal-500/30 transition",children:"Ver planos premium"})]})})}function gj({children:n,onUpgrade:e}){const{nivel:t,loading:r}=Wg();return r?null:t!=="ultra"?p.jsx(mj,{title:"Acesso ULTRA",description:"Este recurso  exclusivo para usurios ULTRA.",onUpgrade:e}):n}const po={initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.35,ease:"easeOut"}},yj=["domingo","segunda","tera","quarta","quinta","sexta","sbado"];function vj(n){return p.jsx(gj,{onUpgrade:()=>n.onSelectScreen("premium"),children:p.jsx(xj,{...n})})}function xj(){const[n,e]=U.useState(null),[t,r]=U.useState(!0),[i,o]=U.useState(null),[l,u]=U.useState(null),[h,m]=U.useState(null),[g,v]=U.useState(null),[b,S]=U.useState(0),[T,_]=U.useState(0),[D,O]=U.useState({}),[z,P]=U.useState(null),[N,I]=U.useState(0),[A,R]=U.useState({}),[C,V]=U.useState(null),[fe,Te]=U.useState(null);U.useEffect(()=>{const ee=Et.onAuthStateChanged(async le=>{if(!le)return e(null),void r(!1);e(le),r(!0),await Promise.all([Re(le.uid),ke(le.uid),Ie(le.uid)]),r(!1)});return()=>ee()},[]);const Re=async ee=>{try{const le=await dr(Rt(rt,"planos",ee));if(le.exists()){const Ae=le.data();o(Ae.analysis||null),u(Ae.form||null),m(Ae.plan||null)}}catch{}},ke=async ee=>{try{const le=await dr(Rt(rt,"metas",ee));v(le.exists()?le.data():null)}catch{v(null)}},Ie=async ee=>{try{const le=Ti(or(rt,"historicoTreino",ee,"registros"),Oo("timestamp","asc")),Ae=(await Ch(le)).docs.map(Pe=>Pe.data());if(!Ae.length)return void st();Y(Ae)}catch{st()}},st=()=>{S(0),_(0),O({}),P(null),I(0),R({}),Te(null),V(null)},Y=ee=>{const le=new Date,{start:Ae,end:Pe}=ue(le),Oe=new Date(le.getTime()-6048e5),{start:We,end:dt}=ue(Oe),Xt=new Date(le.getFullYear(),le.getMonth(),1),ot={domingo:0,segunda:0,tera:0,quarta:0,quinta:0,sexta:0,sbado:0};let At=0,Vt=0,kt=0,bt=0,Jt=0;const hn={};ee.forEach(Gt=>{const yt=q(Gt);if(!yt)return;yt>=Xt&&Vt++;const Kt=Gt.totalExercicios||(Gt.volumeGrupo?j(Gt.volumeGrupo):Gt.exercicios?.length||1);if(yt>=Ae&&yt<Pe){At++,kt+=Kt,ot[yj[yt.getDay()]]++,Jt+=Gt.tempoEstimado||Math.max(20,4*Kt);const Vn=Gt.grupo||"Treino",Ft=B(Vn);hn[Ft]=hn[Ft]?{nome:Vn,volume:hn[Ft].volume+Kt}:{nome:Vn,volume:Kt}}yt>=We&&yt<dt&&(bt+=Kt)}),S(At),_(Vt),O(ot),P(Z(ot)),I(kt),R(hn),Te({atual:kt,anterior:bt,diffAbs:kt-bt,diffPerc:bt>0?(kt-bt)/bt*100:null}),V(At?Math.min(10,Jt/At/6):null)},q=ee=>ee.timestamp?.toDate?ee.timestamp.toDate():typeof ee.timestamp=="number"?new Date(ee.timestamp):ee.criadoEm?new Date(ee.criadoEm):ee.data?new Date(ee.data):null,j=ee=>Object.values(ee).reduce((le,Ae)=>le+(typeof Ae=="number"?Ae:0),0),B=ee=>ee.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]+/g,"-"),Z=ee=>{let le=null;return Object.entries(ee).forEach(([Ae,Pe])=>{(!le||Pe>le.qtd)&&(le={dia:Ae,qtd:Pe})}),le?.qtd>0?le:null};function ue(ee=new Date){const le=new Date(ee),Ae=le.getDay(),Pe=new Date(le);Pe.setDate(le.getDate()-Ae),Pe.setHours(0,0,0,0);const Oe=new Date(Pe);return Oe.setDate(Pe.getDate()+7),{start:Pe,end:Oe}}const ce=g?.treinosSemanaisAtual??b,pe=g?.personalGoals?.treinosSemanaisAlvo??g?.treinosSemanaisAlvo??h?.treinos?.reduce((ee,le)=>ee+(le.exercicios?.length||0),0)??10,be=27*ce,we=178*ce,Ce=g?.minutosDiariosAlvo??30,_e=g?.minutosDiariosAtual??0,ht=pe>0?Math.min(N/pe*100,130):0,ze=Ce>0?Math.min(_e/Ce*100,130):0,Ge=Object.values(A).sort((ee,le)=>le.volume-ee.volume).slice(0,3),re=(function(ee,le){const Ae=Object.values(ee);if(!Ae.length)return{linha1:"Assim que voc concluir um treino esta semana, seu resumo inteligente aparecer aqui.",linha2:""};const Pe=[...Ae].sort((ot,At)=>At.volume-ot.volume),Oe=Pe[0],We=Pe[Pe.length-1];let dt=`Seu grupo mais treinado foi ${Oe.nome} (${Oe.volume} exerccios).`,Xt=`O grupo menos treinado foi ${We.nome} (${We.volume}).`;if(Number.isFinite(le?.diffPerc)){const ot=Math.round(le.diffPerc);Xt=ot>0?`Voc fez cerca de ${ot}% mais exerccios que a semana passada.`:ot<0?`Voc fez ${Math.abs(ot)}% menos exerccios que a semana passada.`:"Seu volume foi igual ao da semana passada."}return{linha1:dt,linha2:Xt}})(A,fe);return t?p.jsx("p",{className:"text-slate-400 text-sm",children:"Carregando painel Ultra"}):n?p.jsx(Yn,{className:"py-8",children:p.jsxs("div",{className:"space-y-8",children:[p.jsxs(Qe.div,{...po,className:"space-y-1",children:[p.jsx("h2",{className:"text-2xl font-bold text-slate-50",children:"Painel Ultra"}),p.jsx("p",{className:"text-sm text-slate-400",children:"Sua viso completa com dados reais."}),p.jsxs("p",{className:"text-xs text-amber-300 flex items-center gap-1",children:[p.jsx(Fo,{className:"w-3 h-3"})," Exclusivo para ULTRA."]})]}),p.jsxs(Qe.div,{...po,className:"grid md:grid-cols-3 gap-4",children:[p.jsx(op,{label:"Treinos",value:ce,helper:"semanais"}),p.jsx(op,{label:"Minutos",value:be,helper:"na semana"}),p.jsx(op,{label:"Calorias",value:we,helper:"na semana"})]}),p.jsxs(Qe.div,{...po,className:"grid md:grid-cols-3 gap-4",children:[p.jsx(lp,{icon:Sa,label:"IMC",value:i?.imc??"--",helper:i?.classificacao??"Gere um plano"}),p.jsx(lp,{icon:ls,label:"Peso atual",value:l?.peso?`${l.peso} kg`:"--",helper:"Do formulrio"}),p.jsx(lp,{icon:ld,label:"Melhor dia",value:z?.dia?(me=z.dia,me?me.charAt(0).toUpperCase()+me.slice(1):""):"--",helper:z?`${z.qtd} treinos`:"Nenhum registro ainda"})]}),p.jsxs(Qe.div,{...po,className:"grid md:grid-cols-2 gap-4",children:[p.jsx(Db,{label:"Meta semanal",valorAtual:N,meta:pe,perc:ht,helper:"Exerccios concludos",unidade:"exerccios"}),p.jsx(Db,{label:"Meta diria",valorAtual:_e,meta:Ce,perc:ze,helper:"Minutos acumulados hoje",unidade:"min"})]}),p.jsxs(Qe.div,{...po,className:"grid md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"glass-card rounded-3xl p-5 border border-white/5 space-y-3",children:[p.jsxs("p",{className:"text-sm text-slate-300 flex items-center gap-2",children:[p.jsx(nm,{className:"w-4 h-4 text-teal-300"}),"Top grupos da semana"]}),Ge&&Ge.length!==0?p.jsx("ul",{className:"space-y-2 text-sm text-slate-200",children:Ge.map((ee,le)=>p.jsxs("li",{className:"flex items-center justify-between",children:[p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-5 h-5 rounded-full bg-slate-800 flex items-center justify-center text-[11px]",children:le+1}),ee.nome]}),p.jsxs("span",{className:"text-xs text-slate-400",children:[ee.volume," exer."]})]},ee.nome))}):p.jsx("p",{className:"text-xs text-slate-500",children:"Voc ainda no treinou nesta semana."})]}),p.jsxs("div",{className:"glass-card rounded-3xl p-5 border border-white/5 space-y-3",children:[p.jsxs("p",{className:"text-sm text-slate-300 flex items-center gap-2",children:[p.jsx(Sa,{className:"w-4 h-4 text-emerald-300"}),"Intensidade da semana"]}),p.jsxs("p",{className:"text-2xl font-semibold text-slate-50",children:[Number.isFinite(C)?C.toFixed(1):"--"," ",p.jsx("span",{className:"text-sm text-slate-500",children:"/ 10"})]}),Number.isFinite(fe?.diffPerc)&&p.jsx("p",{className:"text-xs text-slate-400",children:fe.diffPerc>0?`+${Math.round(fe.diffPerc)}% vs semana passada`:`${Math.round(fe.diffPerc)}% vs semana passada`})]})]}),p.jsxs(Qe.div,{...po,className:"glass-card rounded-3xl p-5 border border-white/5",children:[p.jsxs("p",{className:"text-sm text-slate-300 flex items-center gap-2",children:[p.jsx(Fo,{className:"w-4 h-4 text-amber-300"}),"Resumo inteligente da semana"]}),p.jsx("p",{className:"text-sm text-slate-200",children:re.linha1}),re.linha2&&p.jsx("p",{className:"text-xs text-slate-400",children:re.linha2})]})]})}):p.jsx("p",{className:"text-slate-400 text-sm",children:"Faa login para ver o painel Ultra."});var me}function op({label:n,value:e,helper:t}){return p.jsxs("div",{className:"glass-card rounded-3xl p-5 flex flex-col items-center border border-white/5",children:[p.jsxs("div",{className:"relative w-28 h-28 mb-3",children:[p.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-slate-700"}),p.jsx("div",{className:"absolute inset-1 rounded-full border-4 border-teal-400/80 border-t-transparent rotate-45"}),p.jsx("div",{className:"absolute inset-4 rounded-full bg-slate-950/80 flex items-center justify-center",children:p.jsx("span",{className:"text-2xl font-semibold text-slate-50",children:e})})]}),p.jsx("p",{className:"text-xs text-slate-400 uppercase",children:n}),p.jsx("p",{className:"text-[11px] text-slate-500",children:t})]})}function lp({icon:n,label:e,value:t,helper:r}){return p.jsxs("div",{className:"glass-card rounded-3xl p-4 border border-white/5 flex flex-col gap-1",children:[p.jsxs("span",{className:"text-xs text-slate-400 uppercase flex items-center gap-2",children:[p.jsx(n,{className:"w-4 h-4 text-teal-300"}),e]}),p.jsx("span",{className:"text-xl font-semibold text-slate-50",children:t}),p.jsx("span",{className:"text-[11px] text-slate-500",children:r})]})}function Db({label:n,valorAtual:e,meta:t,perc:r,helper:i,unidade:o}){return p.jsxs("div",{className:"glass-card rounded-3xl p-5 border border-white/5 space-y-2",children:[p.jsxs("p",{className:"text-xs text-slate-400 uppercase flex items-center gap-2",children:[p.jsx(dT,{className:"w-4 h-4 text-emerald-300"})," ",n]}),p.jsxs("p",{className:"text-sm text-slate-300",children:[e," / ",t," ",p.jsx("span",{className:"text-slate-500 text-xs",children:o})]}),p.jsx("div",{className:"w-full h-3 rounded-full bg-slate-800 overflow-hidden",children:p.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-400 to-teal-400",style:{width:`${r}%`}})}),p.jsx("p",{className:"text-[11px] text-slate-500",children:i})]})}function qt({children:n,className:e="",hover:t=!1,elevated:r=!1,gradient:i=!1,onClick:o,...l}){const u=r?"glass-card-elevated":"glass-card",h=t?"hover:shadow-card-hover hover:border-white/20 cursor-pointer":"",m=i&&p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-500/10 via-transparent to-primary-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-2xl"});return p.jsxs(Qe.div,{whileHover:t?{y:-4,scale:1.01}:{},whileTap:o?{scale:.98}:{},className:`${u} ${h} ${e} relative overflow-hidden group transition-all duration-300`,onClick:o,...l,children:[m,p.jsx("div",{className:"relative z-10",children:n})]})}function bj({children:n,variant:e="primary",loading:t=!1,disabled:r=!1,icon:i,className:o="",...l}){const u={primary:"btn-primary",secondary:"btn-secondary",ultra:"btn-ultra",ghost:"bg-transparent text-slate-300 hover:bg-white/5 px-4 py-2 rounded-xl transition-all"},h=u[e]||u.primary,m=r||t?"opacity-50 cursor-not-allowed":"";return p.jsx(Qe.button,{whileHover:r||t?{}:{scale:1.02},whileTap:r||t?{}:{scale:.98},className:`${h} ${m} ${o} flex items-center justify-center gap-2 disabled:cursor-not-allowed`,disabled:r||t,...l,children:t?p.jsxs(p.Fragment,{children:[p.jsx(gT,{className:"w-4 h-4 animate-spin"}),"Processando..."]}):p.jsxs(p.Fragment,{children:[i&&p.jsx(i,{className:"w-5 h-5"}),n]})})}function wj({onLoginSuccess:n}){const[e,t]=U.useState(""),[r,i]=U.useState(""),[o,l]=U.useState(""),[u,h]=U.useState(!1),[m,g]=U.useState(""),[v,b]=U.useState(!1);async function S(_){const D=Rt(rt,"users",_.uid);(await dr(D)).exists()||await ur(D,{uid:_.uid,email:_.email,plan:"free",createdAt:Date.now()})}const T=new ws;return p.jsx("div",{className:"min-h-screen bg-gradient-dark flex items-center justify-center p-4",children:p.jsxs(Qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx(Qe.div,{initial:{scale:.8},animate:{scale:1},transition:{duration:.5,delay:.2},className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-primary-400 to-primary-600 rounded-2xl shadow-glow-teal mb-4",children:p.jsx(ls,{className:"w-10 h-10 text-white"})}),p.jsx("h1",{className:"text-4xl font-bold text-gradient mb-2",children:"Fyzen"}),p.jsx("p",{className:"text-slate-400 text-sm",children:u?"Crie sua conta para comear sua transformao":"Entre para continuar sua jornada fitness"})]}),p.jsxs(qt,{elevated:!0,className:"p-8",children:[m&&p.jsx(Qe.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"mb-4 p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-red-300 text-sm",children:m}),p.jsxs("form",{onSubmit:async _=>{_.preventDefault(),b(!0),g("");try{if(u){const O=await(async function(z,P,N){if(Wn(z.app))return Promise.reject(Ts(z));const I=As(z),A=oh(I,{returnSecureToken:!0,email:P,password:N,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FC),R=await A.catch(V=>{throw V.code==="auth/password-does-not-meet-requirements"&&Dw(z),V}),C=await ga._fromIdTokenResponse(I,"signIn",R);return await I._updateCurrentUser(C.user),C})(Et,r,o);return e.trim()&&await BC(O.user,{displayName:e.trim()}),await S(O.user),await Mw(O.user),void setTimeout(()=>{n(O.user)},300)}const D=await zC(Et,r,o);await S(D.user),n(D.user)}catch(D){g(" "+(D.message||"Erro ao autenticar"))}finally{b(!1)}},className:"space-y-4",children:[u&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Nome completo"}),p.jsx("input",{type:"text",value:e,onChange:_=>t(_.target.value),placeholder:"Seu nome",className:"input-style"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"}),p.jsx("input",{type:"email",value:r,onChange:_=>i(_.target.value),placeholder:"seu@email.com",className:"input-style",required:!0})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2 flex items-center justify-between",children:[p.jsx("span",{children:"Senha"}),!u&&p.jsx("button",{type:"button",onClick:async function(){if(r)try{await(async function(_,D){const O=As(_);await oh(O,{requestType:"PASSWORD_RESET",email:D,clientType:"CLIENT_TYPE_WEB"},"getOobCode",VC)})(Et,r),g("Enviamos um link de recuperao para seu email!")}catch{g("No foi possvel enviar o email.")}else g("Digite seu email primeiro.")},className:"text-xs text-primary-400 hover:text-primary-300 transition-colors",children:"Esqueci minha senha"})]}),p.jsx("input",{type:"password",value:o,onChange:_=>l(_.target.value),placeholder:"",className:"input-style",required:!0})]}),p.jsx(bj,{type:"submit",variant:"primary",loading:v,className:"w-full",children:u?"Criar conta":"Entrar"})]}),p.jsxs("div",{className:"relative my-6",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-white/10"})}),p.jsx("div",{className:"relative flex justify-center text-xs",children:p.jsx("span",{className:"px-4 bg-slate-900/80 text-slate-400",children:"ou continue com"})})]}),p.jsxs("button",{onClick:async function(){try{const _=(await YC(Et,T)).user;n(_)}catch{g("Erro ao tentar logar com o Google")}},className:"w-full bg-white hover:bg-slate-100 text-slate-900 font-semibold py-3 px-4 rounded-xl transition-all flex items-center justify-center gap-3 group",children:[p.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[p.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar com Google"]}),p.jsxs("div",{className:"mt-6 text-center text-sm text-slate-400",children:[u?"J tem uma conta?":"No tem uma conta?",p.jsx("button",{type:"button",onClick:()=>{h(!u),g("")},className:"ml-2 text-primary-400 hover:text-primary-300 font-semibold transition-colors",children:u?"Entrar":"Criar conta"})]})]}),p.jsx("p",{className:"mt-6 text-center text-xs text-slate-500",children:" Suas informaes so protegidas por criptografia de ponta a ponta"})]})})}async function sm(n){try{const e=Rt(rt,"assinaturas",n),t=await dr(e);if(!t.exists())return{plano:"free"};const r=t.data(),i=Date.now(),o=r.ativo!==!1,l=typeof r.renovaEm!="number"||r.renovaEm>i;return!o||!l?{plano:"free"}:{plano:(typeof r.plano=="string"?r.plano:"free").toLowerCase()}}catch{return{plano:"free"}}}function Mb({friendlyName:n="Atleta"}){const e=n,[t,r]=U.useState(null);U.useEffect(()=>{const l=ki(Ti(or(rt,"notifications"),Oo("createdAt","desc"),ME(1)),u=>{u.empty?r(null):r({id:u.docs[0].id,...u.docs[0].data()})});return()=>l()},[]);const[i,o]=U.useState(Number(localStorage.getItem("fitmind-streak")||0));return U.useEffect(()=>{const l=()=>{o(Number(localStorage.getItem("fitmind-streak")||0))};return window.addEventListener("streakUpdate",l),window.addEventListener("storage",l),()=>{window.removeEventListener("streakUpdate",l),window.removeEventListener("storage",l)}},[]),p.jsx(Yn,{className:"py-8",children:p.jsxs("div",{className:"space-y-6",children:[p.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-slate-50",children:["Bem-vindo, ",e,"! "]}),p.jsx("p",{className:"text-sm text-slate-300 max-w-xl",children:"Aqui comea sua jornada Fyzen  treinos inteligentes, nutrio equilibrada e progresso real."}),t&&p.jsxs("div",{className:"mb-4 rounded-2xl border border-amber-400/30 bg-amber-400/10 px-4 py-3 flex items-start gap-3",children:[p.jsx(tm,{className:"w-4 h-4 text-amber-300 mt-0.5"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase tracking-wide text-amber-300",children:"Aviso importante"}),p.jsx("p",{className:"text-sm text-slate-100",children:t.message})]})]}),p.jsx("div",{className:"grid sm:grid-cols-3 gap-4 text-sm",children:[{eyebrow:"Etapa 1",title:"Definir metas",description:"Registre peso atual, objetivo e prazo realista."},{eyebrow:"Etapa 2",title:"Gerar plano de treino",description:"Treinos para casa ou academia alinhados ao seu nvel."},{eyebrow:"Etapa 3",title:"Planejar alimentao",description:"Refeies prticas e equilibradas para sustentar o progresso."}].map(l=>p.jsx(qt,{...l},l.title))}),p.jsxs("div",{className:"glass-card p-4 rounded-2xl border border-white/10 flex items-center gap-3",children:[p.jsx("div",{className:"p-3 rounded-xl bg-teal-400/10",children:p.jsx("span",{className:"text-teal-300 text-xl",children:""})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-slate-400",children:"Streak de treinos"}),p.jsxs("p",{className:"text-lg font-semibold text-slate-50",children:[i," dias seguidos"]})]})]})]})})}var Gg={};(function n(e,t,r,i){var o=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),l=typeof Path2D=="function"&&typeof DOMMatrix=="function",u=(function(){if(!e.OffscreenCanvas)return!1;try{var Y=new OffscreenCanvas(1,1),q=Y.getContext("2d");q.fillRect(0,0,1,1);var j=Y.transferToImageBitmap();q.createPattern(j,"no-repeat")}catch{return!1}return!0})();function h(){}function m(Y){var q=t.exports.Promise,j=q!==void 0?q:e.Promise;return typeof j=="function"?new j(Y):(Y(h,h),null)}var g,v,b,S,T,_,D=(g=u,v=new Map,{transform:function(Y){if(g)return Y;if(v.has(Y))return v.get(Y);var q=new OffscreenCanvas(Y.width,Y.height);return q.getContext("2d").drawImage(Y,0,0),v.set(Y,q),q},clear:function(){v.clear()}}),O=(function(){var Y,q,j=Math.floor(16.666666666666668),B={},Z=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(Y=function(ue){var ce=Math.random();return B[ce]=requestAnimationFrame(function pe(be){Z===be||Z+j-1<be?(Z=be,delete B[ce],ue()):B[ce]=requestAnimationFrame(pe)}),ce},q=function(ue){B[ue]&&cancelAnimationFrame(B[ue])}):(Y=function(ue){return setTimeout(ue,j)},q=function(ue){return clearTimeout(ue)}),{frame:Y,cancel:q}})(),z=(T={},function(){if(b)return b;if(!r&&o){var Y=["var CONFETTI, SIZE = {}, module = {};","("+n.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{b=new Worker(URL.createObjectURL(new Blob([Y])))}catch{return typeof console<"u",null}(function(q){function j(B,Z){q.postMessage({options:B||{},callback:Z})}q.init=function(B){var Z=B.transferControlToOffscreen();q.postMessage({canvas:Z},[Z])},q.fire=function(B,Z,ue){if(S)return j(B,null),S;var ce=Math.random().toString(36).slice(2);return S=m(function(pe){function be(we){we.data.callback===ce&&(delete T[ce],q.removeEventListener("message",be),S=null,D.clear(),ue(),pe())}q.addEventListener("message",be),j(B,ce),T[ce]=be.bind(null,{data:{callback:ce}})})},q.reset=function(){for(var B in q.postMessage({reset:!0}),T)T[B](),delete T[B]}})(b)}return b}),P={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function N(Y,q,j){return(function(B,Z){return Z?Z(B):B})(Y&&Y[q]!=null?Y[q]:P[q],j)}function I(Y){return Y<0?0:Math.floor(Y)}function A(Y,q){return Math.floor(Math.random()*(q-Y))+Y}function R(Y){return parseInt(Y,16)}function C(Y){return Y.map(V)}function V(Y){var q=String(Y).replace(/[^0-9a-f]/gi,"");return q.length<6&&(q=q[0]+q[0]+q[1]+q[1]+q[2]+q[2]),{r:R(q.substring(0,2)),g:R(q.substring(2,4)),b:R(q.substring(4,6))}}function fe(Y){Y.width=document.documentElement.clientWidth,Y.height=document.documentElement.clientHeight}function Te(Y){var q=Y.getBoundingClientRect();Y.width=q.width,Y.height=q.height}function Re(Y){var q=Y.angle*(Math.PI/180),j=Y.spread*(Math.PI/180);return{x:Y.x,y:Y.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*Y.startVelocity+Math.random()*Y.startVelocity,angle2D:-q+(.5*j-Math.random()*j),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:Y.color,shape:Y.shape,tick:0,totalTicks:Y.ticks,decay:Y.decay,drift:Y.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*Y.gravity,ovalScalar:.6,scalar:Y.scalar,flat:Y.flat}}function ke(Y,q){q.x+=Math.cos(q.angle2D)*q.velocity+q.drift,q.y+=Math.sin(q.angle2D)*q.velocity+q.gravity,q.velocity*=q.decay,q.flat?(q.wobble=0,q.wobbleX=q.x+10*q.scalar,q.wobbleY=q.y+10*q.scalar,q.tiltSin=0,q.tiltCos=0,q.random=1):(q.wobble+=q.wobbleSpeed,q.wobbleX=q.x+10*q.scalar*Math.cos(q.wobble),q.wobbleY=q.y+10*q.scalar*Math.sin(q.wobble),q.tiltAngle+=.1,q.tiltSin=Math.sin(q.tiltAngle),q.tiltCos=Math.cos(q.tiltAngle),q.random=Math.random()+2);var j=q.tick++/q.totalTicks,B=q.x+q.random*q.tiltCos,Z=q.y+q.random*q.tiltSin,ue=q.wobbleX+q.random*q.tiltCos,ce=q.wobbleY+q.random*q.tiltSin;if(Y.fillStyle="rgba("+q.color.r+", "+q.color.g+", "+q.color.b+", "+(1-j)+")",Y.beginPath(),l&&q.shape.type==="path"&&typeof q.shape.path=="string"&&Array.isArray(q.shape.matrix))Y.fill((function(Oe,We,dt,Xt,ot,At,Vt){var kt=new Path2D(Oe),bt=new Path2D;bt.addPath(kt,new DOMMatrix(We));var Jt=new Path2D;return Jt.addPath(bt,new DOMMatrix([Math.cos(Vt)*ot,Math.sin(Vt)*ot,-Math.sin(Vt)*At,Math.cos(Vt)*At,dt,Xt])),Jt})(q.shape.path,q.shape.matrix,q.x,q.y,.1*Math.abs(ue-B),.1*Math.abs(ce-Z),Math.PI/10*q.wobble));else if(q.shape.type==="bitmap"){var pe=Math.PI/10*q.wobble,be=.1*Math.abs(ue-B),we=.1*Math.abs(ce-Z),Ce=q.shape.bitmap.width*q.scalar,_e=q.shape.bitmap.height*q.scalar,ht=new DOMMatrix([Math.cos(pe)*be,Math.sin(pe)*be,-Math.sin(pe)*we,Math.cos(pe)*we,q.x,q.y]);ht.multiplySelf(new DOMMatrix(q.shape.matrix));var ze=Y.createPattern(D.transform(q.shape.bitmap),"no-repeat");ze.setTransform(ht),Y.globalAlpha=1-j,Y.fillStyle=ze,Y.fillRect(q.x-Ce/2,q.y-_e/2,Ce,_e),Y.globalAlpha=1}else if(q.shape==="circle")Y.ellipse?Y.ellipse(q.x,q.y,Math.abs(ue-B)*q.ovalScalar,Math.abs(ce-Z)*q.ovalScalar,Math.PI/10*q.wobble,0,2*Math.PI):(function(Oe,We,dt,Xt,ot,At,Vt,kt,bt){Oe.save(),Oe.translate(We,dt),Oe.rotate(At),Oe.scale(Xt,ot),Oe.arc(0,0,1,Vt,kt,bt),Oe.restore()})(Y,q.x,q.y,Math.abs(ue-B)*q.ovalScalar,Math.abs(ce-Z)*q.ovalScalar,Math.PI/10*q.wobble,0,2*Math.PI);else if(q.shape==="star")for(var Ge=Math.PI/2*3,re=4*q.scalar,me=8*q.scalar,ee=q.x,le=q.y,Ae=5,Pe=Math.PI/Ae;Ae--;)ee=q.x+Math.cos(Ge)*me,le=q.y+Math.sin(Ge)*me,Y.lineTo(ee,le),Ge+=Pe,ee=q.x+Math.cos(Ge)*re,le=q.y+Math.sin(Ge)*re,Y.lineTo(ee,le),Ge+=Pe;else Y.moveTo(Math.floor(q.x),Math.floor(q.y)),Y.lineTo(Math.floor(q.wobbleX),Math.floor(Z)),Y.lineTo(Math.floor(ue),Math.floor(ce)),Y.lineTo(Math.floor(B),Math.floor(q.wobbleY));return Y.closePath(),Y.fill(),q.tick<q.totalTicks}function Ie(Y,q){var j,B=!Y,Z=!!N(q||{},"resize"),ue=!1,ce=N(q,"disableForReducedMotion",Boolean),pe=o&&N(q||{},"useWorker")?z():null,be=B?fe:Te,we=!(!Y||!pe)&&!!Y.__confetti_initialized,Ce=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches;function _e(ze,Ge,re){for(var me=N(ze,"particleCount",I),ee=N(ze,"angle",Number),le=N(ze,"spread",Number),Ae=N(ze,"startVelocity",Number),Pe=N(ze,"decay",Number),Oe=N(ze,"gravity",Number),We=N(ze,"drift",Number),dt=N(ze,"colors",C),Xt=N(ze,"ticks",Number),ot=N(ze,"shapes"),At=N(ze,"scalar"),Vt=!!N(ze,"flat"),kt=(function(yt){var Kt=N(yt,"origin",Object);return Kt.x=N(Kt,"x",Number),Kt.y=N(Kt,"y",Number),Kt})(ze),bt=me,Jt=[],hn=Y.width*kt.x,Gt=Y.height*kt.y;bt--;)Jt.push(Re({x:hn,y:Gt,angle:ee,spread:le,startVelocity:Ae,color:dt[bt%dt.length],shape:ot[A(0,ot.length)],ticks:Xt,decay:Pe,gravity:Oe,drift:We,scalar:At,flat:Vt}));return j?j.addFettis(Jt):(j=(function(yt,Kt,Vn,Ft,Or){var Xn,Ct,fr=Kt.slice(),Fn=yt.getContext("2d"),En=m(function(rn){function Ls(){Xn=Ct=null,Fn.clearRect(0,0,Ft.width,Ft.height),D.clear(),Or(),rn()}Xn=O.frame(function cs(){!r||Ft.width===i.width&&Ft.height===i.height||(Ft.width=yt.width=i.width,Ft.height=yt.height=i.height),Ft.width||Ft.height||(Vn(yt),Ft.width=yt.width,Ft.height=yt.height),Fn.clearRect(0,0,Ft.width,Ft.height),(fr=fr.filter(function(Ri){return ke(Fn,Ri)})).length?Xn=O.frame(cs):Ls()}),Ct=Ls});return{addFettis:function(rn){return fr=fr.concat(rn),En},canvas:yt,promise:En,reset:function(){Xn&&O.cancel(Xn),Ct&&Ct()}}})(Y,Jt,be,Ge,re),j.promise)}function ht(ze){var Ge=ce||N(ze,"disableForReducedMotion",Boolean),re=N(ze,"zIndex",Number);if(Ge&&Ce)return m(function(Ae){Ae()});B&&j?Y=j.canvas:B&&!Y&&(Y=(function(Ae){var Pe=document.createElement("canvas");return Pe.style.position="fixed",Pe.style.top="0px",Pe.style.left="0px",Pe.style.pointerEvents="none",Pe.style.zIndex=Ae,Pe})(re),document.body.appendChild(Y)),Z&&!we&&be(Y);var me={width:Y.width,height:Y.height};function ee(){if(pe){var Ae={getBoundingClientRect:function(){if(!B)return Y.getBoundingClientRect()}};return be(Ae),void pe.postMessage({resize:{width:Ae.width,height:Ae.height}})}me.width=me.height=null}function le(){j=null,Z&&(ue=!1,e.removeEventListener("resize",ee)),B&&Y&&(document.body.contains(Y)&&document.body.removeChild(Y),Y=null,we=!1)}return pe&&!we&&pe.init(Y),we=!0,pe&&(Y.__confetti_initialized=!0),Z&&!ue&&(ue=!0,e.addEventListener("resize",ee,!1)),pe?pe.fire(ze,me,le):_e(ze,me,le)}return ht.reset=function(){pe&&pe.reset(),j&&j.reset()},ht}function st(){return _||(_=Ie(null,{useWorker:!0,resize:!0})),_}t.exports=function(){return st().apply(this,arguments)},t.exports.reset=function(){st().reset()},t.exports.create=Ie,t.exports.shapeFromPath=function(Y){if(!l)throw new Error("path confetti are not supported in this browser");var q,j;typeof Y=="string"?q=Y:(q=Y.path,j=Y.matrix);var B=new Path2D(q),Z=document.createElement("canvas").getContext("2d");if(!j){for(var ue,ce,pe=1e3,be=pe,we=pe,Ce=0,_e=0,ht=0;ht<pe;ht+=2)for(var ze=0;ze<pe;ze+=2)Z.isPointInPath(B,ht,ze,"nonzero")&&(be=Math.min(be,ht),we=Math.min(we,ze),Ce=Math.max(Ce,ht),_e=Math.max(_e,ze));ue=Ce-be,ce=_e-we;var Ge=Math.min(10/ue,10/ce);j=[Ge,0,0,Ge,-Math.round(ue/2+be)*Ge,-Math.round(ce/2+we)*Ge]}return{type:"path",path:q,matrix:j}},t.exports.shapeFromText=function(Y){var q,j=1,B="#000000",Z='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof Y=="string"?q=Y:(q=Y.text,j="scalar"in Y?Y.scalar:j,Z="fontFamily"in Y?Y.fontFamily:Z,B="color"in Y?Y.color:B);var ue=10*j,ce=ue+"px "+Z,pe=new OffscreenCanvas(ue,ue),be=pe.getContext("2d");be.font=ce;var we=be.measureText(q),Ce=Math.ceil(we.actualBoundingBoxRight+we.actualBoundingBoxLeft),_e=Math.ceil(we.actualBoundingBoxAscent+we.actualBoundingBoxDescent),ht=we.actualBoundingBoxLeft+2,ze=we.actualBoundingBoxAscent+2;Ce+=4,_e+=4,(be=(pe=new OffscreenCanvas(Ce,_e)).getContext("2d")).font=ce,be.fillStyle=B,be.fillText(q,ht,ze);var Ge=1/j;return{type:"bitmap",bitmap:pe.transferToImageBitmap(),matrix:[Ge,0,0,Ge,-Ce*Ge/2,-_e*Ge/2]}}})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),Gg,!1);const Sj=Gg.exports;function xT(n=new Date){const e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate())),t=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-t);const r=new Date(Date.UTC(e.getUTCFullYear(),0,1)),i=Math.ceil(((e-r)/864e5+1)/7),o=String(i).padStart(2,"0");return`${e.getUTCFullYear()}-W${o}`}async function Ej(n,e,t){try{const r=Rt(rt,"metas",n.uid),i=await dr(r),o=i.exists()?i.data():{},l=(function(g=new Date){return g.toISOString().split("T")[0]})(),u=xT(),h=(o.lastResetDiario===l&&o.minutosDiariosAtual||0)+t,m=(o.lastResetSemanal===u&&o.exerciciosSemanaisAtual||0)+e;await ur(r,{minutosDiariosAlvo:o.minutosDiariosAlvo||30,exerciciosSemanaisAlvo:o.exerciciosSemanaisAlvo||20,minutosDiariosAtual:h,exerciciosSemanaisAtual:m,lastResetDiario:l,lastResetSemanal:u,updatedAt:Rs()},{merge:!0})}catch{}}Gg.exports.create;const cp="fyzen-checklist-v1";function Tj({treino:n=[],dia:e,grupo:t,bloqueado:r}){const[i,o]=U.useState([]),[l,u]=U.useState(""),h=U.useRef(!1),m=U.useRef(!0),g=U.useRef(!1);return U.useEffect(()=>{if(!Array.isArray(n)||n.length===0)return i.length!==0&&o([]),void(h.current=!1);const v=localStorage.getItem(cp),b=(v?JSON.parse(v):{})[`${e}::${t}`],S=b&&JSON.stringify(b.treino)===JSON.stringify(n);if(b&&S&&Array.isArray(b.checked)&&JSON.stringify(b.checked)===JSON.stringify(i))return;if(b&&S)return void(JSON.stringify(b.checked)!==JSON.stringify(i)&&(o(b.checked),h.current=b.checked.every(Boolean)));const T=Array(n.length).fill(!1);JSON.stringify(T)!==JSON.stringify(i)&&o(T),h.current=!1},[n,e,t]),U.useEffect(()=>{if(Array.isArray(i)&&i.length!==0)try{const v=localStorage.getItem(cp),b=v?JSON.parse(v):{};b[`${e}::${t}`]={treino:n,checked:i},localStorage.setItem(cp,JSON.stringify(b))}catch{}},[i,e,t,n]),U.useEffect(()=>{if(m.current)return void(m.current=!1);if(!g.current){const b=i.every(Boolean);return void(h.current=b)}if(!Array.isArray(i)||!Array.isArray(n)||i.length===0||n.length===0||i.length!==n.length)return;const v=i.every(Boolean);if(!h.current&&v){const b=(function(){if(typeof window>"u")return 0;const S=new Date().toISOString().slice(0,10),T=localStorage.getItem("fitmind-streak-lastDay");let _=Number(localStorage.getItem("fitmind-streak")||0);return T?T===S?_||1:(_=T===new Date(Date.now()-864e5).toISOString().slice(0,10)?(_||0)+1:1,localStorage.setItem("fitmind-streak-lastDay",S),localStorage.setItem("fitmind-streak",String(_)),_):(localStorage.setItem("fitmind-streak-lastDay",S),localStorage.setItem("fitmind-streak","1"),1)})();window.dispatchEvent(new Event("streakUpdate")),(async function(S,T,_,D=[],O=null){const z=Et.currentUser;if(z)try{const P=Rt(rt,"progresso",z.uid),N=await dr(P),I=N.exists()?N.data():{},A=xT(),R=Math.max(20,4*_),C=Math.round(6.5*R),V=I.volumeGrupo||{},fe=V[T]||0,Te={...V,[T]:fe+_},Re=I.dias||{},ke=Re[S]||{gruposConcluidos:0,totalExercicios:0},Ie={gruposConcluidos:ke.gruposConcluidos+1,totalExercicios:ke.totalExercicios+_},st={...Re,[S]:Ie};let Y=I.bestDay||S,q=0;Object.entries(st).forEach(([Z,ue])=>{(ue.gruposConcluidos||0)>q&&(q=ue.gruposConcluidos,Y=Z)});const j={...I,workouts:(I.workouts||0)+1,minutes:(I.minutes||0)+R,calories:(I.calories||0)+C,bestDay:Y,dias:st,volumeGrupo:Te,weekKey:A,lastCompletedGroup:T??I.lastCompletedGroup??null,streakAtual:O??I.streakAtual??0,updatedAt:Rs()};Object.keys(j).forEach(Z=>{j[Z]===void 0&&delete j[Z]}),await ur(P,j,{merge:!0});const B=Rt(or(rt,"historicoTreino",z.uid,"registros"));await ur(B,{timestamp:Rs(),dia:S,grupo:T,exercicios:D,totalExercicios:_,tempoEstimado:R,caloriasEstimadas:C,volumeGrupo:{[T]:_},consistencia:{streakAtual:O??null,weekKey:A}},{merge:!0}),await Ej(z,_,R)}catch{}})(e,t,n.length,n,b),Sj({particleCount:60,spread:60,origin:{y:.7},disableForReducedMotion:!0}),u(b===1?" Parabns! Voc comeou sua streak hoje!":` Voc est no dia ${b} da sua streak!`)}h.current=v,g.current=!1},[i]),Array.isArray(n)&&n.length!==0?p.jsxs("div",{className:"mt-3 space-y-2",children:[l&&p.jsx("p",{className:"text-xs text-emerald-300 mb-1",children:l}),p.jsx("ul",{className:"space-y-2",children:n.map((v,b)=>{const S=i[b];return p.jsxs("li",{className:"flex items-start gap-2 "+(r?"opacity-40 pointer-events-none":""),children:[p.jsx("button",{type:"button",disabled:r,onClick:()=>{return T=b,void(r||(g.current=!0,o(_=>{const D=[..._];return D[T]=!D[T],D})));var T},className:`w-5 h-5 rounded-md flex items-center justify-center border text-xs mt-[2px]
                  `+(S?"bg-emerald-400 border-emerald-300 text-black":"bg-slate-900/60 border-slate-600 text-slate-400"),children:S&&""}),p.jsx("span",{className:"leading-snug "+(S?"line-through text-slate-500":"text-slate-200"),children:v})]},b)})})]}):p.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Nenhum exerccio cadastrado para este grupo."})}function kj({open:n,onClose:e,insights:t}){if(!n||!t)return null;const{totalTreinosPlaneados:r,totalExerciciosPlaneados:i,totalExerciciosCompletados:o,diasAtivos:l,diasComTreinoCompleto:u,diaMaisForte:h,porDia:m=[],volume:g={},nivel:v}=t,b=Object.entries(g||{}),S=b.length>0,T=i>0?Math.round(o/i*100):0,_=v==="ULTRA"?"bg-gradient-to-r from-amber-400 to-yellow-300 text-slate-900":v==="PRO"?"bg-gradient-to-r from-teal-400 to-emerald-400 text-slate-900":"bg-slate-700 text-slate-200";return p.jsx(nd,{children:p.jsx(Qe.div,{className:"fixed inset-0 z-[999] bg-black/70 backdrop-blur-md flex items-center justify-center px-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:p.jsxs(Qe.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto rounded-3xl bg-slate-950/90 border border-white/10 shadow-xl shadow-black/50 p-5 sm:p-6 space-y-5",children:[p.jsxs("div",{className:"flex items-start justify-between gap-3",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Q4,{className:"w-5 h-5 text-teal-300"}),p.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-slate-50",children:"Relatrio da semana"})]}),p.jsx("p",{className:"text-xs sm:text-sm text-slate-400",children:"Viso geral dos seus treinos distribudos ao longo da semana."}),v&&p.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-[11px] font-semibold mt-1 ${_}`,children:[v==="ULTRA"&&"Painel ULTRA ativo",v==="PRO"&&"Plano PRO ativo",v==="FREE"&&"Plano gratuito"]})]}),p.jsx("button",{onClick:e,className:"p-1.5 rounded-full hover:bg-slate-800 text-slate-400 hover:text-slate-100 transition",children:p.jsx(Hg,{className:"w-4 h-4"})})]}),p.jsxs("div",{className:"grid sm:grid-cols-3 gap-3",children:[p.jsx(up,{icon:Sa,label:"Grupos de treino",value:r||0,helper:"Blocos de treino planejados"}),p.jsx(up,{icon:ls,label:"Exerccios totais",value:`${o}/${i}`,helper:`${T}% concludo`,highlight:T>=80}),p.jsx(up,{icon:Rh,label:"Dias ativos",value:l||0,helper:h?.dia?`Dia mais forte: ${Lb(h.dia)}`:"Nenhum treino concludo"})]}),T>0&&p.jsxs("div",{className:"rounded-2xl bg-gradient-to-br from-teal-500/10 to-emerald-500/10 border border-teal-500/20 p-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsxs("span",{className:"text-sm font-semibold text-teal-300 flex items-center gap-2",children:[p.jsx(ld,{className:"w-4 h-4"}),"Progresso da Semana"]}),p.jsxs("span",{className:"text-2xl font-bold text-white",children:[T,"%"]})]}),p.jsx("div",{className:"h-3 rounded-full bg-slate-800 overflow-hidden",children:p.jsx(Qe.div,{initial:{width:0},animate:{width:`${T}%`},transition:{duration:1,ease:"easeOut"},className:"h-full bg-gradient-to-r from-teal-400 to-emerald-400"})}),p.jsx("p",{className:"text-xs text-slate-400 mt-2",children:u>0?` Voc completou ${u} dia${u>1?"s":""} inteiro${u>1?"s":""}!`:"Continue assim! Cada exerccio conta."})]}),m.length>0&&p.jsxs("div",{className:"rounded-2xl bg-slate-900/70 border border-white/5 p-4 space-y-3",children:[p.jsxs("p",{className:"text-xs font-semibold text-slate-300 flex items-center gap-2",children:[p.jsx(Rh,{className:"w-4 h-4 text-teal-300"}),"Distribuio de exerccios por dia"]}),p.jsx("div",{className:"space-y-2",children:m.map(D=>{const O=D.percentualConclusao||0,z=O===100;return p.jsxs("div",{className:"space-y-1",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-16 text-[11px] text-slate-400 uppercase tracking-wide",children:Lb(D.dia)}),z&&p.jsx(ej,{className:"w-3.5 h-3.5 text-green-400"})]}),p.jsxs("span",{className:"text-xs text-slate-300",children:[D.exerciciosCompletados,"/",D.exerciciosTotais,p.jsxs("span",{className:"text-slate-500 ml-1",children:["(",O,"%)"]})]})]}),p.jsx("div",{className:"flex items-center gap-3",children:p.jsx("div",{className:"flex-1 h-2 rounded-full bg-slate-800 overflow-hidden",children:p.jsx("div",{className:"h-full transition-all "+(z?"bg-gradient-to-r from-green-400 to-emerald-400":O>0?"bg-gradient-to-r from-teal-400 to-emerald-400":"bg-slate-700"),style:{width:`${O||3}%`}})})})]},D.dia)})})]}),p.jsxs("div",{className:"rounded-2xl bg-slate-900/70 border border-white/5 p-4",children:[p.jsxs("p",{className:"text-xs font-semibold text-slate-300 flex items-center gap-2 mb-2",children:[p.jsx(ls,{className:"w-4 h-4 text-amber-300"}),"Volume por grupo muscular"]}),S?p.jsx("div",{className:"grid sm:grid-cols-2 gap-2 text-xs",children:b.map(([D,O])=>p.jsxs("div",{className:"flex items-center justify-between bg-slate-900/80 rounded-xl px-3 py-2",children:[p.jsx("span",{className:"text-slate-200 truncate",children:D}),p.jsxs("span",{className:"text-slate-400",children:[O," exerccio",O!==1?"s":""]})]},D))}):p.jsx("p",{className:"text-xs text-slate-400",children:"Ainda no h volume registrado por grupo. Conclua treinos para destravar esse resumo."})]}),p.jsx("button",{onClick:e,className:"w-full mt-1 py-2 bg-slate-800/70 hover:bg-slate-700 text-slate-100 rounded-2xl text-sm transition",children:"Fechar relatrio"})]})})})}function up({icon:n,label:e,value:t,helper:r,highlight:i}){return p.jsxs("div",{className:"rounded-2xl border p-4 flex flex-col gap-1 "+(i?"bg-gradient-to-br from-teal-500/10 to-emerald-500/10 border-teal-500/20":"bg-slate-900/70 border-white/5"),children:[p.jsxs("span",{className:"text-[11px] uppercase tracking-wide text-slate-400 flex items-center gap-1.5",children:[p.jsx(n,{className:"w-3.5 h-3.5 "+(i?"text-teal-400":"text-teal-300")}),e]}),p.jsx("span",{className:"text-xl font-semibold "+(i?"text-teal-300":"text-slate-50"),children:t}),p.jsx("span",{className:"text-[11px] text-slate-500",children:r})]})}function Lb(n){return n?{segunda:"Seg",tera:"Ter",terca:"Ter",quarta:"Qua",quinta:"Qui",sexta:"Sex",sabado:"Sb",sbado:"Sb",domingo:"Dom"}[n.toLowerCase()]||n:""}async function Cj(n=[],e=[],t){if(!Array.isArray(n)||n.length===0)return null;const r=e&&e.length?e:["segunda","tera","quarta","quinta","sexta"],i={};r.forEach(T=>{i[T]={dia:T,grupos:0,exercicios:0}});let o=0,l=0;const u={};n.forEach((T,_)=>{const D=r[_%r.length];i[D]||(i[D]={dia:D,grupos:0,exercicios:0});const O=Array.isArray(T.exercicios)?T.exercicios.length:0;i[D].grupos+=1,i[D].exercicios+=O,o+=1,l+=O;const z=T.grupo||"Outro";u[z]=(u[z]||0)+O});const h=(function(){try{const T=localStorage.getItem("fyzen-checklist-v1");if(!T)return{};const _=JSON.parse(T),D={};return Object.entries(_).forEach(([O,z])=>{const[P,N]=O.split("::");if(!P||!N||!z.checked)return;const I=z.checked.filter(Boolean).length,A=z.checked.length;D[P]||(D[P]={gruposCompletados:0,exerciciosCompletados:0,exerciciosTotais:0,grupos:[]}),D[P].gruposCompletados+=I===A?1:0,D[P].exerciciosCompletados+=I,D[P].exerciciosTotais+=A,D[P].grupos.push({nome:N,completados:I,total:A})}),D}catch{return{}}})(),m=r.map(T=>{const _=i[T]||{grupos:0,exercicios:0},D=h[T]||{exerciciosCompletados:0,exerciciosTotais:0,gruposCompletados:0};return{dia:T,gruposPlaneados:_.grupos,exerciciosPlaneados:_.exercicios,exerciciosCompletados:D.exerciciosCompletados,exerciciosTotais:D.exerciciosTotais||_.exercicios,gruposCompletados:D.gruposCompletados,percentualConclusao:D.exerciciosTotais>0?Math.round(D.exerciciosCompletados/D.exerciciosTotais*100):0}}),g=m.reduce((T,_)=>T+_.exerciciosCompletados,0),v=m.filter(T=>T.exerciciosCompletados>0).length,b=m.filter(T=>T.percentualConclusao===100).length,S=m.reduce((T,_)=>_.exerciciosCompletados>(T?.exerciciosCompletados||0)?_:T,m[0]);return{totalTreinosPlaneados:o,totalExerciciosPlaneados:l,totalExerciciosCompletados:g,diasAtivos:v,diasComTreinoCompleto:b,diaMaisForte:S,porDia:m,volume:u,dadosReais:h,nivel:t==="ultra"?"ULTRA":t==="pro"?"PRO":"FREE"}}const bT="https://fyzenbackend.onrender.com/api";async function Nj(n){return await(async function(e){try{const t=await fetch(`${bT}/workout/week`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({form:e})}),r=await t.json().catch(()=>({}));if(!t.ok)throw new Error(r.error||"Erro ao gerar plano semanal via IA");return r.treinosSemana||null}catch{return null}})(n)}function Ij({form:n,diaSelecionado:e,dayData:t,onRegenerated:r}){const{nivel:i,isUltra:o}=Wg(),[l,u]=U.useState(!1);return!o||i!=="ultra"?null:p.jsxs("button",{onClick:async function(){u(!0);const h=await(async function(m,g,v){try{const b=await fetch(`${bT}/workout/day`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({form:m,dia:g,gruposAtuais:v})}),S=await b.json().catch(()=>({}));if(!b.ok)throw new Error(S.error||"Erro ao regenerar dia via IA");return S.grupos||null}catch{return null}})(n,e,t);r(h),u(!1)},disabled:l,className:"h-11 flex-1 rounded-xl bg-violet-600 hover:bg-violet-500 text-white text-sm font-medium flex items-center justify-center gap-2 transition disabled:opacity-60 disabled:cursor-not-allowed",children:[p.jsx(Fo,{className:"w-4 h-4"}),l?"Gerando treino do dia...":"Regenerar Dia com IA"]})}function _j({nivel:n,isUltra:e,form:t,onRegenerated:r}){const[i,o]=U.useState(!1);return!e||n!=="ultra"?null:p.jsxs("button",{onClick:async()=>{try{if(!t)return;o(!0);const l=await Nj(t),u=Array.isArray(l)?l.flatMap(h=>Array.isArray(h?.grupos)?h.grupos:[]).map(h=>({grupo:h?.grupo||"Grupo",exercicios:Array.isArray(h?.exercicios)?h.exercicios:[]})).filter(h=>h.exercicios.length>0):[];if(!u.length)return void alert("No foi possvel gerar uma nova semana de treinos.");r?.(u)}catch(l){alert(l?.message||"Erro ao regenerar a semana. Tente novamente.")}finally{o(!1)}},disabled:i,className:"h-11 flex-1 rounded-xl bg-slate-800/70 border border-white/10 text-slate-100 text-sm font-medium flex items-center justify-center gap-2 hover:bg-slate-700/80 transition disabled:opacity-60 disabled:cursor-not-allowed",children:[p.jsx(yT,{className:"w-4 h-4"}),i?"Gerando nova semana...":"Gerar nova semana inteira"]})}function Aj({label:n="Recurso Premium",plan:e="pro",className:t=""}){const r=e.toUpperCase();return p.jsxs("div",{className:`absolute inset-0 backdrop-blur-md bg-black/40 rounded-2xl flex flex-col items-center justify-center border border-white/10 z-20 ${t}`,children:[p.jsx(rj,{className:"w-10 h-10 text-yellow-300 mb-3"}),p.jsx("p",{className:"text-slate-200 text-sm font-medium text-center",children:n}),p.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Disponvel no plano ",p.jsx("span",{className:"font-semibold text-yellow-300",children:r})]}),p.jsx("a",{href:"#premium",className:"mt-3 px-4 py-2 text-xs rounded-xl bg-gradient-to-r from-yellow-300 to-amber-300 text-black font-semibold shadow-md hover:brightness-110 transition",children:"Desbloquear agora"})]})}const Ob=["free","pro","ultra"];function Vb(n,e){return!!n&&Ob.indexOf(n)>=Ob.indexOf(e)}const Pj={"flexo de brao":["flexo inclinada","flexo declinada","flexo diamante","flexo militar","flexo com joelho apoiado","supino reto com halteres","supino reto na mquina"],"supino reto":["supino inclinado","supino declinado","crucifixo com halteres","flexo de brao","crossover","peck-deck"],"supino inclinado":["supino reto","supino declinado","crucifixo inclinado","flexo inclinada","crossover alto"],crucifixo:["crucifixo inclinado","supino reto","supino inclinado","crossover","flexo aberta"],"remada baixa":["remada curvada","remada unilateral","puxada frontal","puxada neutra","barra fixa (assistida)","serrote com halter"],"remada curvada":["remada baixa","remada unilateral","serrote com halter","puxada alta"],"puxada frontal":["puxada neutra","barra fixa assistida","remada baixa","pull-over na mquina"],"barra fixa":["barra fixa assistida","puxada frontal","remada baixa","serrote com halter"],agachamento:["agachamento sum","agachamento blgaro","leg press","cadeira extensora","avano","afundo"],"agachamento sum":["agachamento tradicional","agachamento blgaro","levantamento terra romeno","afundo com halter"],"agachamento blgaro":["agachamento sum","avano","passada","afundo","stiff"],"leg press":["agachamento livre","agachamento no smith","cadeira extensora","cadeira flexora"],"cadeira extensora":["agachamento","leg press","avano","passada","agachamento sum"],"cadeira flexora":["stiff","levantamento terra romeno","mesa flexora","agachamento sum"],"desenvolvimento com halteres":["elevao lateral","elevao frontal","desenvolvimento militar","remada alta"],"elevao lateral":["elevao frontal","desenvolvimento com halteres","remada alta"],"elevao frontal":["elevao lateral","desenvolvimento","remada alta"],"remada alta":["desenvolvimento","elevao lateral","elevao frontal"],"rosca direta":["rosca alternada","rosca concentrada","rosca martelo","barra fixa supinada"],"rosca alternada":["rosca direta","rosca martelo","rosca scott"],"rosca martelo":["rosca alternada","rosca direta","barra fixa supinada"],"trceps corda":["trceps testa","trceps mergulho","trceps banco","trceps pulley"],"trceps testa":["trceps corda","trceps mergulho","trceps banco"],prancha:["prancha lateral","prancha com elevao de perna","prancha alta","abdominal infra"],"abdominal infra":["elevao de pernas","abdominal bicicleta","abdominal reto","prancha"],"abdominal bicicleta":["abdominal oblquo","abdominal infra","abdominal canivete"],"abdominal lombar (superman)":["hiperextenso","prancha lateral","prancha"],"corrida estacionria":["corrida leve","polichinelos","salto no step","bike ergomtrica"],polichinelos:["corrida estacionria","salto no step","corda"],"pular corda":["corrida rpida","salto no step","polichinelos"],burpee:["burpee com salto","polichinelos","corrida estacionria intensa"]};function Fb(n){const e=n.toLowerCase().trim();return Pj[e]||[]}function Ub(n,e){const{nomeBase:t,resto:r}=(function(l){if(!l||typeof l!="string")return{nomeBase:"",resto:""};const u=l.split("");return u.length===1?{nomeBase:l.trim(),resto:""}:{nomeBase:u[0].trim(),resto:u.slice(1).join("").trim()}})(n);if(!t)return n;let i=Fb(t)||[];i=[...i].sort(()=>Math.random()-.5),i=i.filter(l=>!e.has(l.toLowerCase().trim()));let o=null;if(i.length>0)o=i[0];else{const l=Fb(t)||[];o=l[Math.floor(Math.random()*l.length)]||t}return e.add(o.toLowerCase().trim()),r?`${o}  ${r}`:o}function jj({open:n,onClose:e,grupoOriginal:t,onReplaceGroup:r,objetivo:i,local:o,form:l,userPlan:u="free"}){const[h,m]=U.useState(!1),[g,v]=U.useState([]);if(!n)return null;const b=Vb(u,"pro"),S=Vb(u,"ultra");return p.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center px-4",children:p.jsxs("div",{className:"relative bg-slate-900/90 border border-white/10 rounded-2xl shadow-xl p-6 w-full max-w-lg space-y-6",children:[p.jsx("button",{onClick:e,className:"absolute top-3 right-3 text-slate-400 hover:text-slate-200",children:p.jsx(Hg,{className:"w-5 h-5"})}),p.jsxs("div",{className:"text-center space-y-1",children:[p.jsxs("h2",{className:"text-xl font-semibold text-slate-100 flex justify-center items-center gap-2",children:[p.jsx(fj,{className:"w-5 h-5 text-purple-300"}),"Editar grupo de treino"]}),p.jsx("p",{className:"text-slate-400 text-sm",children:"Grupo selecionado:"}),p.jsx("p",{className:"font-semibold text-purple-300",children:t.grupo})]}),!b&&p.jsx(Aj,{label:"Troca de grupos  exclusiva do plano PRO",plan:"pro"}),p.jsxs("div",{className:`${!b&&"opacity-40 pointer-events-none"}`,children:[p.jsxs("div",{className:"bg-slate-800/50 border border-white/10 rounded-xl p-4",children:[p.jsx("p",{className:"text-slate-300 font-medium mb-2 text-sm",children:"Treino atual:"}),p.jsx("ul",{className:"text-slate-400 text-sm list-disc ml-5 space-y-1",children:t.exercicios.map((T,_)=>p.jsx("li",{children:T},_))})]}),p.jsxs("button",{onClick:async()=>{try{m(!0);const T=(function(_,D,O,z){if(!_||!Array.isArray(_.exercicios))return _;const P=new Set,N=Number(z?.exerciciosPorGrupo)||_.exercicios.length,I=[];_.exercicios.forEach(R=>{I.length<N&&I.push(Ub(R,P))});let A=0;for(;I.length<N;){const R=_.exercicios[A%_.exercicios.length];I.push(Ub(R,P)),A++}return{..._,exercicios:I}})(t,0,0,l);v(_=>[..._,T])}finally{m(!1)}},disabled:h,className:"mt-4 px-4 py-2 w-full rounded-xl bg-gradient-to-r from-purple-400 to-pink-400 text-black font-semibold shadow hover:brightness-110 flex items-center justify-center gap-2",children:[p.jsx(yT,{className:`w-4 h-4 ${h&&"animate-spin"}`}),h?"Gerando...":"Gerar nova variao"]}),b&&g.length>0&&p.jsx("div",{className:"mt-4 space-y-3 max-h-64 overflow-y-auto pr-2 custom-scroll",children:g.map((T,_)=>p.jsxs("div",{className:"bg-slate-800/60 border border-white/10 rounded-xl p-4",children:[p.jsxs("p",{className:"text-teal-300 text-sm font-semibold mb-2",children:["Variao #",_+1]}),p.jsx("ul",{className:"text-slate-300 text-sm list-disc ml-5 space-y-1 mb-3",children:T.exercicios.map((D,O)=>p.jsx("li",{children:D},O))}),p.jsx("button",{onClick:()=>r(T),className:"px-4 py-2 w-full bg-teal-400 text-black rounded-xl font-semibold hover:brightness-110 transition",children:"Usar esta variao"})]},_))}),!S&&b&&p.jsxs("p",{className:"text-center text-xs text-slate-500 mt-3",children:["No plano ",p.jsx("span",{className:"text-amber-300 font-semibold",children:"ULTRA"}),", voc pode gerar variaes ilimitadas."]})]}),p.jsx("div",{className:"pt-2 text-center",children:p.jsx("button",{onClick:e,className:"text-sm text-slate-400 hover:text-slate-200",children:"Fechar"})})]})})}function Rj(){return p.jsxs("div",{className:"glass-card p-6 space-y-4",children:[p.jsx("div",{className:"skeleton h-6 w-3/4"}),p.jsx("div",{className:"skeleton h-4 w-full"}),p.jsx("div",{className:"skeleton h-4 w-5/6"}),p.jsx("div",{className:"skeleton h-20 w-full mt-4"})]})}function Dj(){return p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(n=>p.jsxs("div",{className:"glass-card p-4 space-y-2",children:[p.jsx("div",{className:"skeleton h-4 w-1/2"}),p.jsx("div",{className:"skeleton h-8 w-3/4"})]},n))})}function Mj({steps:n,onComplete:e,initialData:t={},loading:r=!1}){const[i,o]=U.useState(0),[l,u]=U.useState(t),h=!n[i].validate||n[i].validate(l),m=n[i].component;return p.jsxs(qt,{className:"p-6 md:p-8",children:[p.jsxs("div",{className:"mb-8",children:[p.jsx("div",{className:"flex items-center justify-between mb-4",children:n.map((g,v)=>p.jsxs(xk.Fragment,{children:[p.jsxs("div",{className:"flex flex-col items-center gap-2",children:[p.jsx("div",{className:`
                  w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm transition-all
                  ${v<i?"bg-primary-500 text-white":v===i?"bg-primary-500 text-white ring-4 ring-primary-500/20":"bg-slate-800 text-slate-400"}
                `,children:v<i?p.jsx(hT,{className:"w-5 h-5"}):v+1}),p.jsx("span",{className:"text-xs hidden md:block "+(v===i?"text-white font-medium":"text-slate-500"),children:g.label})]}),v<n.length-1&&p.jsx("div",{className:"flex-1 h-1 mx-2 rounded-full transition-all "+(v<i?"bg-primary-500":"bg-slate-800")})]},v))}),p.jsx("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden",children:p.jsx(Qe.div,{className:"h-full bg-gradient-to-r from-primary-500 to-primary-400",initial:{width:0},animate:{width:(i+1)/n.length*100+"%"},transition:{duration:.3}})}),p.jsxs("div",{className:"mt-4",children:[p.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white",children:n[i].title}),n[i].description&&p.jsx("p",{className:"text-sm text-slate-400 mt-1",children:n[i].description})]})]}),p.jsx(nd,{mode:"wait",children:p.jsx(Qe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:p.jsx(m,{data:l,updateField:(g,v)=>{u(b=>({...b,[g]:v}))}})},i)}),p.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-white/10",children:[p.jsxs("button",{onClick:()=>{i>0&&o(i-1)},disabled:i===0,className:"flex items-center gap-2 px-4 py-2 rounded-xl text-slate-300 hover:text-white hover:bg-white/5 transition-all disabled:opacity-40 disabled:cursor-not-allowed",children:[p.jsx(J4,{className:"w-5 h-5"}),p.jsx("span",{className:"hidden sm:inline",children:"Voltar"})]}),p.jsxs("span",{className:"text-sm text-slate-500",children:["Etapa ",i+1," de ",n.length]}),p.jsx("button",{onClick:()=>{i<n.length-1?o(i+1):e(l)},disabled:!h||r,className:"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:r?p.jsxs(p.Fragment,{children:[p.jsx(Qe.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),"Gerando..."]}):p.jsxs(p.Fragment,{children:[p.jsx("span",{children:i===n.length-1?"Gerar Plano":"Prximo"}),i<n.length-1&&p.jsx(Z4,{className:"w-5 h-5"})]})})]})]})}const hp=["domingo","segunda","tera","quarta","quinta","sexta","sbado"],aa=["segunda","tera","quarta","quinta","sexta"],zb={sexo:"",idade:"",peso:"",altura:"",nivel:"",objetivo:"",local:"",exerciciosPorGrupo:"3"},dp={initial:{opacity:0,y:12},whileInView:{opacity:1,y:0},transition:{duration:.35,ease:"easeOut"},viewport:{once:!0,amount:.3}};function Lj(){const[n,e]=U.useState(zb),[t,r]=U.useState(!1),[i,o]=U.useState(null),[l,u]=U.useState(null),[h,m]=U.useState(null),[g,v]=U.useState(null),[b,S]=U.useState(!0),[T,_]=U.useState(!1),[D,O]=U.useState(""),[z,P]=U.useState(null),[N,I]=U.useState(!1),[A,R]=U.useState("segunda"),[C,V]=U.useState(null),[fe,Te]=U.useState(!1),[Re,ke]=U.useState(!1),[Ie,st]=U.useState(""),[Y,q]=U.useState(!1),[j,B]=U.useState("Gerando com IA (Ultra), aguarde..."),{nivel:Z,isPro:ue,isUltra:ce}=Wg(),pe=hp[new Date().getDay()],be=U.useMemo(()=>{if(!i?.treinos)return{};const re=aa.reduce((me,ee)=>(me[ee]=[],me),{});return(i.treinos||[]).forEach((me,ee)=>{const le=aa[ee%aa.length];re[le].push({...me,_globalIndex:ee})}),re},[i]),we=U.useMemo(()=>be[A]||[],[be,A]),Ce=U.useMemo(()=>({emagrecimento:{casa:[{grupo:"Cardio leve",exercicios:["Polichinelos  3x40s","Corrida estacionria  3x1min","Pular corda  3x30s","Escalador (mountain climber)  3x20 reps","Agachamento com salto  3x15 reps","Corrida lateral  3x30s"]},{grupo:"Corpo completo",exercicios:["Agachamento livre  4x15","Flexo de brao  3x10","Prancha  3x30s","Afundo alternado  3x12 cada perna","Abdominal infra  3x20","Polichinelo com toque no cho  3x20"]},{grupo:"Pernas e glteos",exercicios:["Agachamento sum  4x15","Avano (lunge)  3x12 cada perna","Elevao plvica  4x12","Afundo blgaro  3x10 cada perna","Passada lateral  3x12","Ponte com uma perna  3x10 cada perna"]},{grupo:"Core e estabilidade",exercicios:["Prancha  3x30s","Prancha lateral  3x20s cada lado","Abdominal bicicleta  3x20","Abdominal canivete  3x12","Prancha com elevao de perna  3x10 cada perna","Prancha com ombro  3x20"]},{grupo:"HIIT em casa",exercicios:["Corrida estacionria  30s","Burpees  10 reps","Polichinelos  30s","Escalador  20 reps","Agachamento com salto  15 reps","Descanso ativo (marchar parado)  30s"]}],academia:[{grupo:"Cardio e resistncia",exercicios:["Esteira  20 min","Escada  10 min","Elptico  15 min","Bicicleta ergomtrica  10 min","Corrida leve na pista  15 min","Remo ergomtrico  8 min"]},{grupo:"Pernas focadas",exercicios:["Leg press  4x15","Cadeira extensora  3x12","Cadeira flexora  3x12","Agachamento livre  4x12","Elevao de panturrilha em p  4x15","Avano com halteres  3x10 cada perna"]},{grupo:"Treino circuito",exercicios:["Remada baixa  3x12","Supino reto  3x12","Puxada na frente  3x12","Desenvolvimento com halteres  3x10","Abdominal na mquina  3x15","Prancha  3x30s"]},{grupo:"Cardio intervalado",exercicios:["Esteira (sprints)  10x30s rpido / 30s leve","Bike em intensidade moderada  15 min","Escada rpida  5 min","Remo moderado  8 min","Caminhada leve  10 min (resfriamento)"]},{grupo:"Full body emagrecimento",exercicios:["Agachamento no Smith  4x12","Supino inclinado  3x10","Puxada aberta  3x10","Elevao lateral  3x12","Trceps testa  3x12","Rosca direta  3x12"]}]},hipertrofia:{casa:[{grupo:"Peito e trceps",exercicios:["Flexo de brao  4x12","Flexo diamante  3x10","Flexo declinada  3x10","Mergulho entre cadeiras  4x10","Flexo isomtrica  3x30s","Flexo com apoio elevado  3x12"]},{grupo:"Costas e bceps",exercicios:["Remada curvada com mochila  4x12","Rosca direta com mochila  3x12","Rosca alternada  3x10","Remada unilateral  3x12 cada lado","Bceps martelo  3x12","Remada invertida na mesa  3x10"]},{grupo:"Pernas e glteos",exercicios:["Agachamento blgaro  4x10 cada perna","Afundo  3x12 cada perna","Elevao plvica  4x12","Agachamento sum  3x12","Ponte com uma perna  3x10 cada perna","Elevao de panturrilha  4x15"]},{grupo:"Ombros e core",exercicios:["Elevao lateral com garrafa  3x15","Desenvolvimento com mochila  3x12","Elevao frontal  3x12","Prancha  3x30s","Abdominal canivete  3x12","Prancha lateral  3x20s cada lado"]},{grupo:"Peito e costas",exercicios:["Flexo de brao  4x12","Remada curvada  4x12","Flexo com pegada aberta  3x10","Remada unilateral  3x12 cada lado","Flexo isomtrica  3x30s","Prancha  3x30s"]}],academia:[{grupo:"Peito e trceps",exercicios:["Supino reto  4x10","Supino inclinado  3x10","Crossover  3x12","Trceps corda  3x12","Trceps testa  3x10","Crucifixo inclinado  3x12"]},{grupo:"Costas e bceps",exercicios:["Puxada na frente  4x10","Remada curvada  3x10","Remada baixa  3x12","Rosca direta  3x12","Rosca alternada  3x10","Pulldown  3x12"]},{grupo:"Pernas",exercicios:["Agachamento livre  4x8","Leg press  4x10","Cadeira extensora  3x12","Cadeira flexora  3x12","Stiff  3x10","Elevao de panturrilha sentado  4x15"]},{grupo:"Ombros e trapzio",exercicios:["Desenvolvimento com halteres  4x10","Elevao lateral  3x12","Elevao frontal  3x12","Encolhimento com barra  4x12","Remada alta  3x10","Crucifixo inverso  3x12"]},{grupo:"Full body",exercicios:["Supino reto  4x8","Puxada aberta  4x8","Crucifixo  3x10","Remada baixa  3x10","Rosca direta  3x10","Trceps corda  3x10"]}]},resistencia:{casa:[{grupo:"Circuito funcional",exercicios:["Corrida no lugar  1min","Polichinelos  40s","Agachamento + salto  3x15","Flexo de brao  3x10","Prancha  3x30s","Polichinelos cruzados  3x40s","Escalador cruzado  3x20"]},{grupo:"Resistncia de pernas",exercicios:["Agachamento livre  4x20","Afundo  3x15 cada perna","Ponte de glteo  4x15","Agachamento sum  3x15","Passada andando  3x20 passos","Elevao de panturrilha  4x20"]},{grupo:"Resistncia de superiores",exercicios:["Flexo de brao  4x15","Flexo inclinada na parede  3x20","Mergulho em cadeira  3x15","Remada invertida na mesa  3x12","Prancha alta  3x40s","Prancha com ombro  3x20"]},{grupo:"Core avanado",exercicios:["Prancha  4x40s","Abdominal bicicleta  3x20","Abdominal canivete  3x15","Prancha lateral  3x25s cada lado","Prancha com elevao de perna  3x10 cada perna","Escalador  3x25"]},{grupo:"HIIT resistncia",exercicios:["Burpees  10 reps","Corrida estacionria  40s","Polichinelos  40s","Agachamento com salto  15 reps","Escalador  20 reps","Prancha  30s"]}],academia:[{grupo:"Cardio + fora",exercicios:["Esteira  15min ritmo moderado","Corda naval  3x30s","Agachamento com barra  4x12","Flexo de brao  3x10","Remada baixa  3x12","Prancha  3x40s"]},{grupo:"Resistncia de pernas",exercicios:["Leg press  4x15","Agachamento guiado  4x12","Cadeira extensora  3x15","Cadeira flexora  3x15","Panturrilha em p  4x20","Afundo com halteres  3x12 cada perna"]},{grupo:"Resistncia de superiores",exercicios:["Supino reto  3x15","Puxada na frente  3x15","Desenvolvimento  3x15","Remada baixa  3x15","Trceps polia  3x15","Rosca direta  3x15"]},{grupo:"Circuito metablico",exercicios:["Corda naval  3x30s","Kettlebell swing  3x15","Burpee  3x12","Agachamento frontal  3x12","Remada curvada  3x12","Abdominal na bola  3x20"]},{grupo:"Cardio prolongado",exercicios:["Esteira  25min","Bike  20min","Elptico  15min","Remo  10min","Caminhada leve  10min (resfriamento)","Abdominal prancha  3x40s"]}]}}),[]);U.useEffect(()=>{const re=Et.onAuthStateChanged(async me=>{me?(v(me),await _e(me.uid)):(v(null),o(null),u(null),m(null)),S(!1)});return()=>re()},[]),U.useEffect(()=>{if(!A)return;const re=hp.indexOf(pe),me=hp.indexOf(A);return me>re?(ke(!0),void st(`Hoje  ${pe}. Volte na ${A} para completar este treino.`)):me<re?(ke(!0),void st(`Voc j passou o dia de ${A}.`)):(ke(!1),void st(""))},[A,pe]),U.useEffect(()=>{t||!i?.treinos||fe||(async()=>{try{const re=await Cj(i.treinos,aa,Z);P(re)}catch{}})()},[i,Z,t,fe]),U.useEffect(()=>{if(!Y)return;const re=document.body.style.overflow;document.body.style.overflow="hidden";const me=le=>{le.key==="Escape"&&le.preventDefault()},ee=le=>{le.preventDefault(),le.returnValue=""};return window.addEventListener("keydown",me,{passive:!1}),window.addEventListener("beforeunload",ee),()=>{document.body.style.overflow=re,window.removeEventListener("keydown",me),window.removeEventListener("beforeunload",ee)}},[Y]);const _e=async re=>{try{const me=Rt(rt,"planos",re),ee=await dr(me);if(ee.exists()){const le=ee.data();e({...zb,...le.form??{}}),u(le.analysis??null),o(le.plan??null),m(le.nutrition??null),O("Plano carregado da nuvem ")}}catch{O("No foi possvel carregar seu plano anterior.")}},ht=async(re,me)=>{try{await ur(Rt(rt,"planos",re),me,{merge:!0}),O("Plano salvo automaticamente na sua conta.")}catch{O("Erro ao salvar plano.")}},ze=(re,me,ee)=>{const le=Ce[re];return le?(me==="academia"?le.academia:le.casa).map(Pe=>{const Oe=parseInt(ee.exerciciosPorGrupo)||3,We=(dt=Pe.exercicios,[...dt].sort(()=>Math.random()-.5));var dt;return{grupo:Pe.grupo,exercicios:We.slice(0,Math.min(Oe,Pe.exercicios.length))}}):[]},Ge=[{label:"Perfil",title:"Dados Pessoais",description:"Conte-nos um pouco sobre voc",component:({data:re,updateField:me})=>p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Sexo *"}),p.jsx("div",{className:"grid grid-cols-2 gap-3",children:["masculino","feminino"].map(ee=>p.jsx("button",{type:"button",onClick:()=>me("sexo",ee),className:"p-3 rounded-xl border transition-all "+(re.sexo===ee?"border-primary-500 bg-primary-500/10 text-white":"border-white/10 bg-slate-800/50 text-slate-400 hover:border-white/20"),children:ee==="masculino"?" Masculino":" Feminino"},ee))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Idade *"}),p.jsx("input",{type:"number",value:re.idade,onChange:ee=>me("idade",ee.target.value),placeholder:"Ex: 25",min:"10",max:"100",className:"input-style"})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Peso (kg) *"}),p.jsx("input",{type:"number",value:re.peso,onChange:ee=>me("peso",ee.target.value),placeholder:"Ex: 75",min:"20",max:"300",step:"0.1",className:"input-style"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Altura (cm) *"}),p.jsx("input",{type:"number",value:re.altura,onChange:ee=>me("altura",ee.target.value),placeholder:"Ex: 175",min:"100",max:"230",className:"input-style"})]})]}),p.jsx("div",{className:"mt-4 p-4 bg-blue-500/10 border border-blue-500/20 rounded-xl",children:p.jsx("p",{className:"text-sm text-blue-300",children:" Esses dados so usados para calcular seu IMC e gasto calrico dirio"})})]}),validate:re=>re.sexo&&re.idade&&re.peso&&re.altura},{label:"Meta",title:"Objetivos e Nvel",description:"Qual  o seu objetivo principal?",component:({data:re,updateField:me})=>p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-3",children:"Nvel de experincia *"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[{value:"iniciante",label:"Iniciante",desc:"Comeando agora"},{value:"intermediario",label:"Intermedirio",desc:"Treino regular"},{value:"avancado",label:"Avanado",desc:"Treino intenso"}].map(ee=>p.jsxs("button",{type:"button",onClick:()=>me("nivel",ee.value),className:"p-4 rounded-xl border transition-all text-left "+(re.nivel===ee.value?"border-primary-500 bg-primary-500/10":"border-white/10 bg-slate-800/50 hover:border-white/20"),children:[p.jsx("div",{className:"font-semibold "+(re.nivel===ee.value?"text-primary-300":"text-slate-300"),children:ee.label}),p.jsx("div",{className:"text-xs text-slate-500 mt-1",children:ee.desc})]},ee.value))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-3",children:"Objetivo principal *"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[{value:"emagrecimento",label:"Emagrecer",emoji:""},{value:"hipertrofia",label:"Ganhar Massa",emoji:""},{value:"resistencia",label:"Resistncia",emoji:""}].map(ee=>p.jsxs("button",{type:"button",onClick:()=>me("objetivo",ee.value),className:"p-4 rounded-xl border transition-all "+(re.objetivo===ee.value?"border-primary-500 bg-primary-500/10":"border-white/10 bg-slate-800/50 hover:border-white/20"),children:[p.jsx("div",{className:"text-2xl mb-2",children:ee.emoji}),p.jsx("div",{className:"font-semibold "+(re.objetivo===ee.value?"text-primary-300":"text-slate-300"),children:ee.label})]},ee.value))})]})]}),validate:re=>re.nivel&&re.objetivo},{label:"Local",title:"Preferncias de Treino",description:"Onde voc vai treinar?",component:({data:re,updateField:me})=>p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-3",children:"Local de treino *"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{value:"casa",label:" Em Casa",desc:"Treinos com peso corporal"},{value:"academia",label:" Academia",desc:"Equipamentos completos"}].map(ee=>p.jsxs("button",{type:"button",onClick:()=>me("local",ee.value),className:"p-6 rounded-xl border transition-all text-left "+(re.local===ee.value?"border-primary-500 bg-primary-500/10":"border-white/10 bg-slate-800/50 hover:border-white/20"),children:[p.jsx("div",{className:"text-lg font-semibold mb-1 "+(re.local===ee.value?"text-primary-300":"text-slate-300"),children:ee.label}),p.jsx("div",{className:"text-sm text-slate-500",children:ee.desc})]},ee.value))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Exerccios por grupo muscular"}),p.jsxs("select",{value:re.exerciciosPorGrupo,onChange:ee=>me("exerciciosPorGrupo",ee.target.value),className:"input-style",children:[p.jsx("option",{value:"2",children:"2 exerccios (rpido)"}),p.jsx("option",{value:"3",children:"3 exerccios (balanceado)"}),p.jsx("option",{value:"4",children:"4 exerccios (intenso)"}),p.jsx("option",{value:"5",children:"5 exerccios (mximo)"})]}),p.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Define quantos exerccios diferentes por grupo muscular"})]})]}),validate:re=>re.local},{label:"Confirmar",title:"Revisar Informaes",description:"Confira seus dados antes de gerar o plano",component:({data:re})=>{const me=parseFloat(re.peso),ee=parseFloat(re.altura),le=parseFloat(re.idade);let Ae=null,Pe="";if(me&&ee&&le){const Oe=ee/100;Ae=(me/(Oe*Oe)).toFixed(1),Pe=Ae<18.5?"Abaixo do peso":Ae<25?"Peso normal":Ae<30?"Sobrepeso":"Obesidade"}return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-xl border border-white/10",children:[p.jsx("h4",{className:"font-semibold text-white mb-3",children:" Resumo do seu perfil"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-slate-400",children:"Sexo:"}),p.jsx("span",{className:"text-white ml-2 capitalize",children:re.sexo||"--"})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-slate-400",children:"Idade:"}),p.jsxs("span",{className:"text-white ml-2",children:[re.idade||"--"," anos"]})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-slate-400",children:"Peso:"}),p.jsxs("span",{className:"text-white ml-2",children:[re.peso||"--"," kg"]})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-slate-400",children:"Altura:"}),p.jsxs("span",{className:"text-white ml-2",children:[re.altura||"--"," cm"]})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-slate-400",children:"Nvel:"}),p.jsx("span",{className:"text-white ml-2 capitalize",children:re.nivel||"--"})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-slate-400",children:"Objetivo:"}),p.jsx("span",{className:"text-white ml-2 capitalize",children:re.objetivo||"--"})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-slate-400",children:"Local:"}),p.jsx("span",{className:"text-white ml-2 capitalize",children:re.local||"--"})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-slate-400",children:"Exerccios/grupo:"}),p.jsx("span",{className:"text-white ml-2",children:re.exerciciosPorGrupo||"3"})]})]})]}),Ae&&p.jsx("div",{className:"p-4 rounded-xl border "+(Ae<18.5||Ae>=30?"bg-orange-500/10 border-orange-500/20":"bg-green-500/10 border-green-500/20"),children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-sm text-slate-400",children:"Seu IMC"}),p.jsx("div",{className:"text-2xl font-bold text-white",children:Ae})]}),p.jsx("div",{className:"text-right",children:p.jsx("div",{className:"text-sm font-semibold "+(Ae<18.5||Ae>=30?"text-orange-300":"text-green-300"),children:Pe})})]})}),p.jsx("div",{className:"p-4 bg-primary-500/10 border border-primary-500/20 rounded-xl",children:p.jsxs("p",{className:"text-sm text-primary-300",children:[" Tudo pronto! Clique em ",p.jsx("strong",{children:'"Gerar Plano"'})," para criar seu treino personalizado"]})})]})},validate:()=>!0}];return b?p.jsxs(Yn,{className:"py-8",children:[p.jsx(Rj,{}),p.jsx(Dj,{})]}):p.jsxs(p.Fragment,{children:[Y&&p.jsx("div",{className:"fixed inset-0 z-[9999] bg-slate-950/95 backdrop-blur-md flex items-center justify-center",children:p.jsxs("div",{className:"text-center p-8",children:[p.jsx(Qe.div,{animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4 border-4 border-primary-500 border-t-transparent rounded-full"}),p.jsx("p",{className:"text-xl font-bold text-white mb-2",children:j}),p.jsx("p",{className:"text-sm text-slate-400",children:"No feche a pgina. Isso pode levar alguns segundos."})]})}),p.jsx(kj,{open:N,onClose:()=>I(!1),insights:z,nivel:Z}),p.jsx(jj,{open:!!C,onClose:()=>V(null),grupoOriginal:C||{grupo:"",exercicios:[]},objetivo:n.objetivo,local:n.local,form:n,userPlan:Z,onReplaceGroup:async re=>{if(!g||!i||!C)return;const me=C._globalIndex,ee=[...i.treinos];ee[me]={grupo:re.grupo,exercicios:re.exercicios};const le={...i,treinos:ee};o(le),await ht(g.uid,{plan:le,updatedAt:Rs()}),V(null),Te(!0),O(" Grupo atualizado com sucesso!")}}),!i||t?p.jsxs(Yn,{className:"py-8",children:[p.jsxs("div",{className:"mb-8 text-center",children:[p.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-3",children:"Crie seu Plano de Treino Personalizado"}),p.jsx("p",{className:"text-slate-400 max-w-2xl mx-auto",children:"Responda algumas perguntas e gere um treino adaptado aos seus objetivos"})]}),p.jsx(Mj,{steps:Ge,initialData:n,onComplete:async function(re){if(!g)return alert("Faa login para gerar seu plano.");e(re);const me=parseFloat(re.peso),ee=parseFloat(re.altura),le=parseFloat(re.idade);if(!me||!ee||!le)return alert("Altura, peso e idade invlidos.");const Ae=ee/100,Pe=me/(Ae*Ae);let Oe;Oe=Pe<18.5?"Abaixo do peso":Pe<25?"Peso normal":Pe<30?"Sobrepeso":"Obesidade";const We=re.sexo==="feminino"?655+9.6*me+1.8*ee-4.7*le:66+13.7*me+5*ee-6.8*le;let dt=1.2;re.nivel==="intermediario"&&(dt=1.5),re.nivel==="avancado"&&(dt=1.8);const Xt=Math.round(We*dt),ot={imc:Pe.toFixed(1),classificacao:Oe,gasto:Xt};let At=[];if(ce){B("Gerando com IA Ultra, aguarde..."),q(!0);try{const kt=await fetch("https://fyzenbackend.onrender.com/api/workout/week",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({form:re})}),bt=await kt.json().catch(()=>({}));At=kt.ok&&bt.treinos&&Array.isArray(bt.treinos)?bt.treinos:ze(re.objetivo,re.local,re)}catch{At=ze(re.objetivo,re.local,re)}finally{q(!1)}}else At=ze(re.objetivo,re.local,re);const Vt={form:re,analysis:ot,plan:{info:re,treinos:At},nutrition:{total:re.objetivo==="emagrecimento"?ot.gasto-400:re.objetivo==="hipertrofia"?ot.gasto+400:ot.gasto,plano:""},ownerUid:g.uid,updatedAt:Rs()};_(!0);try{u(ot),o(Vt.plan),m(Vt.nutrition),await ht(g.uid,Vt),O("Plano gerado e salvo!"),R("segunda"),r(!1),q(!1)}catch{O("Erro ao gerar seu plano.")}finally{_(!1)}},loading:T,onCancel:()=>r(!1)})]}):p.jsxs(Yn,{className:"py-8 space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:"Seu Plano de Treino"}),D&&p.jsx("p",{className:"text-sm text-primary-300",children:D})]}),p.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4",children:[p.jsx("button",{onClick:()=>r(!0),className:"h-11 px-4 rounded-xl bg-slate-800/70 hover:bg-slate-700 text-slate-100 text-sm font-medium flex items-center justify-center gap-2 transition",children:" Editar Dados"}),p.jsxs("div",{className:"flex-1 flex flex-col gap-3 sm:flex-row sm:gap-3",children:[ce&&i?.treinos&&we.length>0&&p.jsx(Ij,{form:n,diaSelecionado:A,dayData:we,onRegenerated:async function(re){if(!re||!Array.isArray(re)||!i?.treinos)return;const me=new Set((i.treinos||[]).filter((Oe,We)=>aa[We%aa.length]!==A).map(Oe=>(Oe?.grupo||"").toLowerCase())),ee=re.filter(Oe=>!me.has((Oe?.grupo||"").toLowerCase())),le=ee.length?ee:re,Ae=[...i.treinos];we.forEach((Oe,We)=>{const dt=Oe._globalIndex;dt!=null&&le[We]&&(Ae[dt]=le[We])});const Pe={...i,treinos:Ae};o(Pe),g&&await ur(Rt(rt,"planos",g.uid),{plan:Pe},{merge:!0})}}),ce&&i?.treinos&&p.jsx(_j,{nivel:Z,isUltra:ce,form:n,onRegenerated:async function(re){if(!re||!Array.isArray(re))return;const me={...i,treinos:re};o(me),g&&await ur(Rt(rt,"planos",g.uid),{plan:me},{merge:!0})}}),z&&p.jsx("button",{onClick:()=>I(!0),className:"h-11 px-4 rounded-xl bg-emerald-600 hover:bg-emerald-500 text-white text-sm font-medium flex items-center justify-center gap-2 transition",children:" Ver Insights"})]})]})]}),l&&p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs(Qe.div,{...dp,className:"glass-card p-4",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[p.jsx(Sa,{className:"w-5 h-5 text-primary-400"}),p.jsx("span",{className:"text-sm text-slate-400",children:"IMC"})]}),p.jsx("div",{className:"text-2xl font-bold text-white",children:l.imc}),p.jsx("div",{className:"text-xs text-slate-500 mt-1",children:l.classificacao})]}),p.jsxs(Qe.div,{...dp,transition:{delay:.1},className:"glass-card p-4",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[p.jsx(ls,{className:"w-5 h-5 text-orange-400"}),p.jsx("span",{className:"text-sm text-slate-400",children:"Gasto Calrico"})]}),p.jsx("div",{className:"text-2xl font-bold text-white",children:l.gasto}),p.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"kcal/dia"})]}),p.jsxs(Qe.div,{...dp,transition:{delay:.2},className:"glass-card p-4",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[p.jsx(qg,{className:"w-5 h-5 text-green-400"}),p.jsx("span",{className:"text-sm text-slate-400",children:"Meta Calrica"})]}),p.jsx("div",{className:"text-2xl font-bold text-white",children:h?.total||"--"}),p.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"kcal/dia"})]})]}),p.jsx("div",{className:"glass-card p-4",children:p.jsx("div",{className:"flex items-center gap-2 overflow-x-auto no-scrollbar",children:aa.map(re=>p.jsx("button",{onClick:()=>R(re),className:"px-4 py-2 rounded-xl font-medium text-sm whitespace-nowrap transition-all "+(A===re?"bg-primary-500 text-white":"bg-slate-800/50 text-slate-400 hover:bg-slate-700/50"),children:re.charAt(0).toUpperCase()+re.slice(1)},re))})}),p.jsx("div",{"data-treino-section":!0,className:"space-y-4",children:Re?p.jsx("div",{className:"p-4 bg-orange-500/10 border border-orange-500/20 rounded-xl",children:p.jsx("p",{className:"text-orange-300 text-sm",children:Ie})}):p.jsx(p.Fragment,{children:we.length===0?p.jsx("div",{className:"glass-card p-8 text-center",children:p.jsx("p",{className:"text-slate-400",children:"Nenhum treino para este dia"})}):we.map((re,me)=>p.jsxs(Qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*me},className:"glass-card p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[p.jsx(mT,{className:"w-5 h-5 text-primary-400"}),re.grupo||"Grupo sem nome"]}),ue&&p.jsx("button",{onClick:()=>V(re),className:"text-sm px-3 py-1 rounded-lg bg-primary-500/10 text-primary-300 hover:bg-primary-500/20 transition-all",children:"Editar"})]}),p.jsx(Tj,{treino:re.exercicios,dia:pe,grupo:re.grupo,bloqueado:Re}),!ue&&p.jsx("p",{className:"text-xs text-slate-500 mt-4",children:"Personalizao de grupo disponvel no plano Pro."})]},me))})})]})]})}const wT=U.createContext();function Oj({children:n}){const[e,t]=U.useState(null),r=U.useCallback((i,o="success")=>{t({message:i,type:o}),setTimeout(()=>t(null),2800)},[]);return p.jsxs(wT.Provider,{value:{showToast:r},children:[n,p.jsx(nd,{children:e&&p.jsx(Qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:`fixed bottom-6 left-1/2 -translate-x-1/2 px-5 py-3 rounded-2xl shadow-xl border
          ${e.type==="success"?"bg-emerald-500/20 border-emerald-300/40":""}
          ${e.type==="error"?"bg-red-500/20 border-red-300/40":""}
          backdrop-blur-xl text-slate-100`,children:p.jsx("p",{className:"text-sm",children:e.message})})})]})}function ST(){return U.useContext(wT)}const Fu={initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.25}};function Vj(){const[n,e]=U.useState(null),[t,r]=U.useState(0),[i,o]=U.useState(new Date().toISOString().slice(0,10)),[l,u]=U.useState([]),[h,m]=U.useState(0),[g,v]=U.useState({nome:"",calorias:"",tipo:"almoo"}),[b,S]=U.useState(!1);U.useEffect(()=>{const A=Et.onAuthStateChanged(async R=>{R&&(e(R),await T(R.uid),await D(R.uid,i))});return()=>A()},[]),U.useEffect(()=>{n&&D(n.uid,i)},[i,n]);const T=async A=>{try{const R=Rt(rt,"planos",A),C=await dr(R);C.exists()&&C.data().nutrition?r(C.data().nutrition.total||0):r(0)}catch{r(0)}},_=(A,R)=>Rt(rt,"nutrition",A,"days",R),D=async(A,R)=>{S(!0);try{const C=_(A,R),V=await dr(C);if(V.exists()){const fe=V.data();u(fe.refeicoes||[]),m(fe.totalConsumido||0)}else u([]),m(0)}catch{u([]),m(0)}finally{S(!1)}},O=async(A,R)=>{if(n)try{const C=_(n.uid,i);await ur(C,{refeicoes:A,totalConsumido:R,metaCalorica:t,dia:i,updatedAt:Rs()},{merge:!0})}catch{}},{showToast:z}=ST(),P=t>0?Math.min(h/t*100,160):0;let N="bg-gradient-to-r from-emerald-400 to-teal-400";P>=90&&P<100?N="bg-gradient-to-r from-amber-300 to-yellow-400":P>=100&&(N="bg-gradient-to-r from-red-400 to-rose-500");const I=t>0&&h>t;return n?p.jsx(Yn,{className:"py-8",children:p.jsxs("div",{className:"space-y-6",children:[p.jsxs(Qe.div,{...Fu,className:"space-y-2",children:[p.jsxs("h2",{className:"text-2xl font-bold text-slate-50 flex items-center gap-2",children:[p.jsx(qg,{className:"w-6 h-6 text-emerald-300"}),"Nutrio diria"]}),p.jsx("p",{className:"text-sm text-slate-400",children:"Registre suas refeies e acompanhe suas calorias dirias baseadas no seu plano Fyzen."})]}),p.jsxs(Qe.div,{...Fu,className:"glass-card rounded-3xl p-5 border border-white/5 space-y-4",children:[p.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Rh,{className:"w-4 h-4 text-slate-300"}),p.jsx("input",{type:"date",value:i,onChange:A=>{o(A.target.value)},className:"bg-slate-900/60 border border-slate-700 rounded-xl px-3 py-1.5 text-sm text-slate-100 focus:outline-none focus:ring-2 focus:ring-emerald-400/60"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(ls,{className:"w-4 h-4 text-amber-300"}),p.jsxs("p",{className:"text-sm text-slate-300",children:["Meta diria:"," ",p.jsx("span",{className:"font-semibold text-amber-200",children:t>0?`${t} kcal`:"no definida"})]})]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsxs("div",{className:"flex justify-between text-xs text-slate-400",children:[p.jsxs("span",{children:["Consumido:"," ",p.jsxs("span",{className:"text-slate-100 font-semibold",children:[h," kcal"]})]}),t>0&&p.jsxs("span",{children:[Math.round(P),"% da meta"]})]}),p.jsx("div",{className:"w-full h-3 rounded-full bg-slate-800 overflow-hidden",children:p.jsx("div",{className:`h-full ${N}`,style:{width:`${t>0?P:0}%`}})}),I&&p.jsx("p",{className:"text-xs text-red-300 mt-1",children:" Voc ultrapassou sua meta diria de calorias. Tente compensar nas prximas refeies ou amanh."})]})]}),p.jsxs(Qe.div,{...Fu,className:"glass-card p-5 rounded-3xl border border-white/5 space-y-4",children:[p.jsxs("h3",{className:"text-lg font-semibold text-slate-50 flex items-center gap-2",children:[p.jsx(dj,{className:"w-5 h-5 text-emerald-300"}),"Registrar refeio"]}),p.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("p",{className:"text-xs text-slate-400",children:"Nome da refeio"}),p.jsx("input",{type:"text",value:g.nome,onChange:A=>v(R=>({...R,nome:A.target.value})),placeholder:"Ex: Arroz, frango e salada",className:"w-full bg-slate-900/60 border border-slate-700 rounded-xl px-3 py-2 text-sm text-slate-100 focus:outline-none focus:ring-2 focus:ring-emerald-400/60"})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("p",{className:"text-xs text-slate-400",children:"Calorias (kcal)"}),p.jsx("input",{type:"number",min:"0",value:g.calorias,onChange:A=>v(R=>({...R,calorias:A.target.value})),placeholder:"Ex: 450",className:"w-full bg-slate-900/60 border border-slate-700 rounded-xl px-3 py-2 text-sm text-slate-100 focus:outline-none focus:ring-2 focus:ring-emerald-400/60"})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("p",{className:"text-xs text-slate-400",children:"Tipo"}),p.jsxs("select",{value:g.tipo,onChange:A=>v(R=>({...R,tipo:A.target.value})),className:"w-full bg-slate-900/60 border border-slate-700 rounded-xl px-3 py-2 text-sm text-slate-100 focus:outline-none focus:ring-2 focus:ring-emerald-400/60",children:[p.jsx("option",{value:"caf da manh",children:"Caf da manh"}),p.jsx("option",{value:"almoo",children:"Almoo"}),p.jsx("option",{value:"lanche",children:"Lanche"}),p.jsx("option",{value:"jantar",children:"Jantar"})]})]})]}),p.jsxs("button",{type:"button",onClick:async()=>{if(!g.nome||!g.calorias)return void z("Preencha o nome e as calorias.");const A=parseInt(g.calorias,10);if(isNaN(A)||A<=0)return void z("Calorias invlidas.");const R=[...l,{nome:g.nome,calorias:A,tipo:g.tipo}],C=h+A;u(R),m(C),v({...g,nome:"",calorias:""}),await O(R,C)},className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-gradient-to-r from-emerald-400 to-teal-400 text-slate-900 text-sm font-semibold shadow-lg hover:brightness-110 transition",children:[p.jsx(ij,{className:"w-4 h-4"}),"Adicionar refeio"]})]}),p.jsxs(Qe.div,{...Fu,className:"glass-card p-5 rounded-3xl border border-white/5 space-y-3",children:[p.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Refeies do dia"}),b&&p.jsx("p",{className:"text-xs text-slate-500",children:"Carregando refeies"}),l.length===0&&!b&&p.jsx("p",{className:"text-slate-400 text-sm",children:"Nenhuma refeio registrada para este dia."}),p.jsx("div",{className:"space-y-3",children:l.map((A,R)=>p.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-slate-50 font-medium text-sm",children:A.nome}),p.jsxs("p",{className:"text-slate-400 text-xs",children:[A.tipo," "," ",p.jsxs("span",{className:"text-emerald-300",children:[A.calorias," kcal"]})]})]}),p.jsx("button",{onClick:()=>(async C=>{const V=l[C];if(!V)return;const fe=l.filter((Re,ke)=>ke!==C),Te=h-(V.calorias||0);u(fe),m(Te<0?0:Te),await O(fe,Te<0?0:Te)})(R),className:"text-red-400 hover:text-red-300",children:p.jsx(cj,{className:"w-5 h-5"})})]},R))})]})]})}):p.jsx("div",{className:"p-4",children:p.jsx("p",{className:"text-slate-400 text-sm",children:"Faa login para acessar sua nutrio."})})}const Uu={initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.35,ease:"easeOut"}},Bb=["domingo","segunda","tera","quarta","quinta","sexta","sbado"];function Fj(){const[n,e]=U.useState(null),[t,r]=U.useState(!0),[i,o]=U.useState([]),[l,u]=U.useState({}),[h,m]=U.useState([]),[g,v]=U.useState(0),[b,S]=U.useState(0);U.useEffect(()=>{const O=Et.onAuthStateChanged(async z=>{if(!z)return e(null),o([]),void r(!1);e(z),r(!0),await T(z.uid),r(!1)});return()=>O()},[]);const T=async O=>{try{const z=Ti(or(rt,"historicoTreino",O,"registros"),Oo("timestamp","asc")),P=(await Ch(z)).docs.map(N=>N.data());o(P),_(P)}catch{}},_=O=>{if(!O||O.length===0)return u({}),m([]),v(0),void S(0);const z=new Date,P=new Date(z.getFullYear(),z.getMonth(),1);P.setHours(0,0,0,0);const N={domingo:0,segunda:0,tera:0,quarta:0,quinta:0,sexta:0,sbado:0},I=new Set;let A=0;O.forEach(C=>{const V=C.timestamp;if(!V)return;const fe=V?.toDate?.()?V.toDate():new Date(V),Te=Bb[fe.getDay()];N[Te]=(N[Te]||0)+1,I.add(fe.toDateString()),fe>=P&&fe<=z&&A++}),u(N),v(I.size),S(A);const R=Bb.map(C=>({dia:C,total:N[C]||0}));m(R)},D=h.length?(h.reduce((O,z)=>O+z.total,0)/h.length).toFixed(1):0;return t?p.jsx(Yn,{className:"py-8 flex items-center justify-center min-h-[60vh]",children:p.jsx("p",{className:"text-slate-400 text-sm",children:"Carregando progresso..."})}):n?p.jsx(Yn,{className:"py-8",children:p.jsxs("div",{className:"space-y-8",children:[p.jsxs(Qe.div,{...Uu,children:[p.jsxs("h2",{className:"text-2xl font-bold text-slate-50 flex items-center gap-2",children:[p.jsx(nm,{className:"w-6 h-6 text-teal-300"}),"Seu progresso"]}),p.jsx("p",{className:"text-sm text-slate-400",children:"Acompanhe sua evoluo ao longo dos dias e semanas."})]}),p.jsxs(Qe.div,{...Uu,className:"grid md:grid-cols-3 gap-4",children:[p.jsx(fp,{icon:dT,label:"Dias ativos",value:g,helper:"Dias com pelo menos um treino",color:"text-emerald-300"}),p.jsx(fp,{icon:ls,label:"Treinos este ms",value:b,helper:"Total confirmado no ms atual",color:"text-amber-300"}),p.jsx(fp,{icon:ld,label:"Mdia semanal",value:D,helper:"Treinos por semana",color:"text-purple-300"})]}),p.jsxs(Qe.div,{...Uu,className:"glass-card rounded-3xl p-6 border border-white/5",children:[p.jsxs("h3",{className:"text-lg font-semibold text-white mb-6 flex items-center gap-2",children:[p.jsx(nm,{className:"w-5 h-5 text-primary-400"}),"Treinos por dia da semana"]}),p.jsx("div",{className:"space-y-4",children:h.map((O,z)=>{const P=Math.max(...h.map(I=>I.total),1),N=O.total/P*100;return p.jsx(Qe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*z},children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("span",{className:"text-sm text-slate-400 w-20 capitalize",children:O.dia}),p.jsxs("div",{className:"flex-1 h-10 bg-slate-800/50 rounded-lg overflow-hidden relative",children:[p.jsx(Qe.div,{initial:{width:0},animate:{width:`${N}%`},transition:{duration:.5,delay:.05*z},className:"h-full bg-gradient-to-r from-primary-500 to-primary-400 rounded-lg relative",children:p.jsx("div",{className:"absolute inset-0 bg-white/10 animate-pulse-slow"})}),p.jsx("span",{className:"absolute inset-0 flex items-center justify-end pr-3 text-sm font-semibold text-white",children:O.total})]})]})},O.dia)})})]}),p.jsxs(Qe.div,{...Uu,className:"glass-card rounded-3xl p-5 border border-white/5 space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("p",{className:"text-sm text-slate-300 flex items-center gap-2",children:[p.jsx(Rh,{className:"w-4 h-4 text-teal-300"}),"Mapa de consistncia"]}),p.jsx("span",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:"ltimos 4 meses"})]}),p.jsx(Uj,{treinos:i})]})]})}):p.jsx(Yn,{className:"py-8 flex items-center justify-center min-h-[60vh]",children:p.jsx("p",{className:"text-slate-400 text-sm",children:"Faa login para acompanhar seu progresso."})})}function fp({icon:n,label:e,value:t,helper:r,color:i}){return p.jsxs("div",{className:"glass-card rounded-3xl p-4 border border-white/5",children:[p.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400 uppercase tracking-wide",children:[p.jsx(n,{className:`w-4 h-4 ${i}`}),e]}),p.jsx("p",{className:"text-2xl font-semibold text-slate-50 mt-1",children:t}),p.jsx("p",{className:"text-[11px] text-slate-500 mt-1",children:r})]})}function Uj({treinos:n}){const e=U.useMemo(()=>{const u=new Set;return n&&n.forEach(h=>{const m=h.timestamp;if(!m)return;const g=(m?.toDate?.()?m.toDate():new Date(m)).toISOString().split("T")[0];u.add(g)}),u},[n]),t=[],r=new Date,i=r.getDay(),o=new Date(r);o.setDate(r.getDate()+(6-i));for(let u=0;u<18;u++){const h=[];for(let m=0;m<7;m++){const g=new Date(o);g.setDate(o.getDate()-7*u-(6-m)),h.push(g)}t.unshift(h)}const l=u=>u?"bg-teal-400 border border-teal-300 shadow-[0_0_6px_rgba(45,212,191,0.4)]":"bg-slate-800/50 border border-white/5";return p.jsxs("div",{className:"w-full overflow-hidden",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("div",{className:"flex flex-col justify-between py-[2px] text-[9px] text-slate-500 font-medium h-[98px]",children:[p.jsx("span",{children:"Dom"}),p.jsx("span",{children:"Ter"}),p.jsx("span",{children:"Qui"}),p.jsx("span",{children:"Sb"})]}),p.jsx("div",{className:"flex-1 flex gap-[3px] overflow-x-auto pb-2 no-scrollbar mask-gradient-right",children:t.map((u,h)=>p.jsx("div",{className:"flex flex-col gap-[3px]",children:u.map((m,g)=>{const v=m.toISOString().split("T")[0],b=e.has(v),S=b?`${m.toLocaleDateString("pt-BR")}: Treino concludo `:`${m.toLocaleDateString("pt-BR")}: Sem registro`;return p.jsx("div",{title:S,className:`w-3 h-3 sm:w-3.5 sm:h-3.5 rounded-[3px] transition-all hover:opacity-80 ${l(b)}`},v)})},h))})]}),p.jsxs("div",{className:"mt-2 flex items-center justify-end gap-3 text-[10px] text-slate-500",children:[p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx("div",{className:"w-2.5 h-2.5 rounded-[2px] bg-slate-800/50 border border-white/5"}),p.jsx("span",{children:"Sem treino"})]}),p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx("div",{className:"w-2.5 h-2.5 rounded-[2px] bg-teal-400 border border-teal-300 shadow-[0_0_4px_rgba(45,212,191,0.4)]"}),p.jsx("span",{className:"text-teal-300",children:"Concludo"})]})]})]})}function zj(){const[n,e]=U.useState(null),[t,r]=U.useState(30),[i,o]=U.useState(20),[l,u]=U.useState([]),[h,m]=U.useState(""),{showToast:g}=ST();U.useEffect(()=>{const S=Et.onAuthStateChanged(async T=>{if(!T)return e(null);e(T),await v(T.uid)});return()=>S()},[]);const v=async S=>{try{const T=Rt(rt,"metas",S),_=await dr(T);if(_.exists()){const D=_.data();r(D.minutosDiariosAlvo??30),o(D.treinosSemanaisAlvo??20),u(D.personalGoals??[])}}catch{}},b=async S=>{if(n)try{const T=Rt(rt,"metas",n.uid);await ur(T,{personalGoals:S,updatedAt:Rs()},{merge:!0})}catch{}};return p.jsx(Yn,{className:"py-8",children:p.jsxs("div",{className:"space-y-8 p-4 md:p-8",children:[p.jsxs("section",{className:"glass-card p-6 rounded-3xl border border-white/5 space-y-5",children:[p.jsx("h2",{className:"text-xl font-semibold text-slate-50 flex items-center gap-2",children:" Metas automticas"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm text-slate-300",children:"Meta diria de minutos"}),p.jsx("input",{type:"number",className:"w-full bg-slate-900/40 mt-1 p-3 rounded-xl border border-slate-700 text-slate-200",value:t,onChange:S=>r(S.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm text-slate-300",children:"Meta semanal de exerccios"}),p.jsx("input",{type:"number",className:"w-full bg-slate-900/40 mt-1 p-3 rounded-xl border border-slate-700 text-slate-200",value:i,onChange:S=>o(S.target.value)})]})]}),p.jsx("button",{onClick:async()=>{if(n)try{const S=Rt(rt,"metas",n.uid);await ur(S,{minutosDiariosAlvo:Number(t),treinosSemanaisAlvo:Number(i),updatedAt:Rs()},{merge:!0}),g("Metas automticas salvas!","success")}catch{}},className:"px-5 py-3 bg-emerald-400 text-slate-900 rounded-xl font-semibold hover:bg-emerald-300 transition",children:"Salvar metas"})]}),p.jsxs("section",{className:"glass-card p-6 rounded-3xl border border-white/5 space-y-5",children:[p.jsx("h2",{className:"text-xl font-semibold text-slate-50 flex items-center gap-2",children:"+ Metas personalizadas"}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("input",{type:"text",className:"flex-1 bg-slate-900/40 p-3 rounded-xl border border-slate-700 text-slate-200",placeholder:"Ex: Beber 2L de gua",value:h,onChange:S=>m(S.target.value)}),p.jsx("button",{onClick:()=>{h.trim()&&(u(S=>{const T=[...S,{id:Date.now(),texto:h.trim()}];return b(T),T}),m(""))},className:"px-5 py-3 bg-emerald-400 rounded-xl text-slate-900 font-semibold hover:bg-emerald-300",children:"Adicionar"})]}),l.length===0&&p.jsx("p",{className:"text-sm text-slate-500",children:"Nenhuma meta adicionada."}),p.jsx("ul",{className:"space-y-3",children:l.map(S=>p.jsxs("li",{className:"flex justify-between items-center bg-slate-900/30 p-3 rounded-xl border border-slate-700",children:[p.jsx("span",{className:"text-slate-200",children:S.texto}),p.jsx("button",{onClick:()=>(T=>{u(_=>{const D=_.filter(O=>O.id!==T);return b(D),D})})(S.id),className:"text-red-400 hover:text-red-300",children:"Remover"})]},S.id))})]})]})})}function Bj(n){const[e,t]=U.useState(null),[r,i]=U.useState(!0),[o,l]=U.useState("");return U.useEffect(()=>{if(!n)return t(null),void i(!1);i(!0),l("");const u=(function(){const b=new Date;return b.setHours(0,0,0,0),b})(),{monday:h,sunday:m}=(function(){const b=new Date,S=(b.getDay()+6)%7,T=new Date(b);T.setDate(b.getDate()-S),T.setHours(0,0,0,0);const _=new Date(T);return _.setDate(T.getDate()+6),_.setHours(23,59,59,999),{monday:T,sunday:_}})(),g=ki(Ti(or(rt,"planos"),Oo("updatedAt","desc")),b=>{const S=b.docs.map(V=>({id:V.id,...V.data()})),T=new Set;let _=0,D=0,O=0;const z={},P={};S.forEach(V=>{V.ownerUid&&T.add(V.ownerUid),V.updatedAt?.toDate&&V.updatedAt.toDate()>=u&&_++,V.nutrition?.total&&(D+=Number(V.nutrition.total),O++);const fe=V.plan?.info?.objetivo;fe&&(P[fe]=(P[fe]||0)+1);const Te=V.plan?.treinos;Array.isArray(Te)&&Te.forEach(Re=>{if(!Re?.grupo)return;const ke=Re.grupo.toLowerCase();z[ke]=(z[ke]||0)+1})});const N=O>0?Math.round(D/O):null;let I=null,A=0;Object.entries(P).forEach(([V,fe])=>{fe>A&&(A=fe,I=V)});const R=Object.entries(z).map(([V,fe])=>({grupo:V,count:fe})).sort((V,fe)=>fe.count-V.count).slice(0,6),C=S.slice(0,12);t(V=>({...V||{},usuariosAtivos:T.size,totalPlanos:S.length,planosHoje:_,mediaCalorias:N,objetivoPopular:I,gruposPopulares:R,planosRecentes:C})),i(!1)},b=>{l("Erro ao carregar mtricas de planos."),i(!1)}),v=ki(Ti(or(rt,"historicoTreino")),async b=>{let S=0;const T=[],_=b.docs.map(async D=>{const O=D.id,z=Ti(or(rt,"historicoTreino",O,"registros"),Oo("data","desc"),ME(200)),P=await(function(I){return new Promise((A,R)=>{const C=ki(I,V=>{C(),A(V.docs)},V=>{C(),R(V)})})})(z);let N=0;P.forEach(I=>{const A=I.data().data?.toDate?.()||null;A&&(A>=u&&S++,A>=h&&A<=m&&N++)}),N>0&&T.push({uid:O,totalSemana:N,ownerEmail:D.data().ownerEmail||null})});await Promise.all(_),T.sort((D,O)=>O.totalSemana-D.totalSemana),t(D=>({...D||{},treinosHoje:S,ranking:T.slice(0,10)}))},b=>{l("Erro ao carregar histrico de treinos.")});return()=>{g(),v()}},[n]),{stats:e,loading:r,error:o}}function $j({user:n,isAdmin:e}){const t=n?.uid??null,{data:r}=e?(function(j){const[B,Z]=U.useState(null),[ue,ce]=U.useState(!!j),[pe,be]=U.useState(null);return U.useEffect(()=>{if(!j)return Z(null),void ce(!1);const we=ki(Rt(rt,"planos",j),Ce=>{Ce.exists()?Z({id:Ce.id,...Ce.data()}):Z(null),ce(!1)},Ce=>{be("No foi possvel carregar seu plano."),ce(!1)});return()=>we()},[j]),{data:B,loading:ue,error:pe}})(t):{data:null},{stats:i,loading:o,error:l}=Bj(e),{semanaStats:u,loadingSemana:h,errorSemana:m}=(function(j){const[B,Z]=U.useState(null),[ue,ce]=U.useState(!0),[pe,be]=U.useState(null);return U.useEffect(()=>{if(!j)return Z(null),void ce(!1);ce(!0),be(null);const we=ki(Ti(or(rt,"historicoTreino")),async Ce=>{try{const _e=new Date,ht=new Date(_e),ze=(_e.getDay()+6)%7;ht.setDate(_e.getDate()-ze),ht.setHours(0,0,0,0);const Ge={segunda:0,terca:0,quarta:0,quinta:0,sexta:0,sabado:0,domingo:0},re=Ce.docs.map(async ee=>{const le=ee.id,Ae=Ti(or(rt,"historicoTreino",le,"registros"),Oo("data","desc"));(await new Promise((Pe,Oe)=>{const We=ki(Ae,dt=>{We(),Pe(dt)},dt=>{We(),Oe(dt)})})).forEach(Pe=>{const Oe=Pe.data().data?.toDate?.();if(!Oe||Oe<ht)return;const We=Oe.getDay();Ge[We===0?"domingo":We===1?"segunda":We===2?"terca":We===3?"quarta":We===4?"quinta":We===5?"sexta":"sabado"]+=1})});await Promise.all(re);const me=Object.values(Ge).reduce((ee,le)=>ee+le,0);Z({dias:Ge,totalSemana:me}),ce(!1)}catch(_e){be(_e),ce(!1)}},Ce=>{be(Ce),ce(!1)});return()=>we()},[j]),{semanaStats:B,loadingSemana:ue,errorSemana:pe}})(e),[g,v]=U.useState(""),[b,S]=U.useState(!1),[T,_]=U.useState(""),[D,O]=U.useState([]),[z,P]=U.useState("alterar"),[N,I]=U.useState(""),[A,R]=U.useState("free"),[C,V]=U.useState(""),[fe,Te]=U.useState(!1);if(!e)return p.jsx(qt,{title:"Acesso restrito",className:"bg-slate-900/70",children:p.jsx("p",{className:"text-sm text-slate-300",children:"Somente o administrador autorizado pode visualizar este painel."})});const Re=i?.gruposPopulares||[],ke=i?.planosRecentes||[],Ie=i?.ranking||[],[st,Y]=U.useState([]),q={segunda:"Seg",terca:"Ter",quarta:"Qua",quinta:"Qui",sexta:"Sex",sabado:"Sb",domingo:"Dom"};return p.jsxs(Yn,{className:"py-8",children:[p.jsxs("div",{className:"space-y-6",children:[p.jsxs("header",{className:"space-y-1",children:[p.jsxs("h2",{className:"text-2xl font-semibold text-slate-50 flex items-center gap-2",children:[p.jsx(oj,{className:"w-6 h-6 text-amber-300"}),"Painel administrativo"]}),p.jsxs("p",{className:"text-sm text-slate-400",children:["Todas as mtricas abaixo so calculadas em tempo real a partir das colees ",p.jsx("code",{children:"planos"}),", ",p.jsx("code",{children:"historicoTreino"})," e"," ",p.jsx("code",{children:"notifications"})," no Firestore."]})]}),o&&p.jsxs(qt,{className:"bg-slate-900/70 flex items-center gap-3 text-slate-200 text-sm",children:[p.jsx(gT,{className:"w-4 h-4 animate-spin text-teal-300"}),"Carregando dados administrativos em tempo real..."]}),l&&!o&&!i&&p.jsx(qt,{className:"bg-red-900/30 border border-red-500/10 text-red-200 text-sm",children:l}),i&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[p.jsx(qt,{eyebrow:"Usurios com plano salvo",title:i.usuariosAtivos||0,description:"Contagem nica via Firestore",icon:hj}),p.jsx(qt,{eyebrow:"Planos totais",title:i.totalPlanos||0,description:"Documentos na coleo planos",icon:Sa}),p.jsx(qt,{eyebrow:"Planos atualizados hoje",title:i.planosHoje||0,description:"Timestamp >= 00h",icon:ls}),p.jsx(qt,{eyebrow:"Calorias mdias sugeridas",title:i.mediaCalorias?`${i.mediaCalorias} kcal`:"--",description:"Mdia dos planos ativos",icon:Y4})]}),p.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[p.jsx(qt,{eyebrow:"Treinos concludos hoje",title:i.treinosHoje||0,description:"Baseado no histrico de treinos",icon:Sa}),p.jsx(qt,{eyebrow:"Objetivo mais buscado",title:i.objetivoPopular||"--",description:"ltimos planos gerados",icon:rm}),p.jsx(qt,{eyebrow:"Top atleta da semana",title:Ie.length?Ie[0].ownerEmail||Ie[0].uid:"--",description:Ie.length?`${Ie[0].totalSemana} treinos na semana`:"Ainda sem ranking",icon:Rb})]}),p.jsxs("div",{className:"grid lg:grid-cols-3 gap-4",children:[p.jsxs(qt,{title:"Treinos por dia da semana",className:"bg-slate-900/70",icon:X4,children:[h&&p.jsx("p",{className:"text-sm text-slate-400",children:"Calculando resumo semanal..."}),m&&p.jsx("p",{className:"text-red-400 text-sm",children:m?.message||"Erro ao carregar resumo da semana."}),u&&p.jsxs("div",{className:"mt-3 space-y-3",children:[p.jsx("div",{className:"flex items-end gap-2 h-32",children:["segunda","terca","quarta","quinta","sexta","sabado","domingo"].map(j=>{const B=u.dias[j]||0,Z=B/(Math.max(...Object.values(u.dias||{0:1}))||1)*100;return p.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[p.jsx("div",{className:"w-full rounded-full bg-slate-800 overflow-hidden",style:{height:"100%"},children:p.jsx("div",{className:"w-full bg-gradient-to-t from-teal-400 to-emerald-300 rounded-full transition-all",style:{height:`${Z||4}%`}})}),p.jsx("span",{className:"text-[11px] text-slate-400",children:q[j]}),p.jsx("span",{className:"text-[11px] text-slate-300",children:B})]},j)})}),p.jsxs("p",{className:"text-xs text-slate-400",children:["Total na semana:"," ",p.jsx("span",{className:"text-teal-300 font-semibold",children:u.totalSemana})," ","treinos."]})]})]}),p.jsxs(qt,{title:"Objetivos & grupos mais gerados",className:"bg-slate-900/70",children:[i.objetivoPopular?p.jsxs("p",{className:"text-sm text-slate-300 flex items-center gap-2",children:[p.jsx(rm,{className:"w-4 h-4 text-teal-300"}),"Objetivo mais buscado:"," ",p.jsx("span",{className:"text-teal-300 font-semibold capitalize",children:i.objetivoPopular})]}):p.jsx("p",{className:"text-sm text-slate-400",children:"Nenhum objetivo registrado ainda."}),p.jsxs("ul",{className:"mt-3 space-y-2 text-sm text-slate-300",children:[Re.map(j=>p.jsxs("li",{className:"flex justify-between",children:[p.jsx("span",{className:"capitalize",children:j.grupo}),p.jsxs("span",{className:"text-slate-400",children:[j.count," treinos"]})]},j.grupo)),!Re.length&&p.jsx("li",{className:"text-slate-500",children:"Sem dados de grupos musculares ainda."})]})]}),p.jsx(qt,{title:"ltimos planos sincronizados",className:"lg:col-span-1 bg-slate-900/70",children:p.jsx("div",{className:"max-h-56 overflow-y-auto custom-scroll",children:p.jsxs("table",{className:"w-full text-xs sm:text-sm text-slate-300",children:[p.jsx("thead",{className:"sticky top-0 bg-slate-900/80 backdrop-blur supports-[backdrop-filter]:bg-slate-900/70",children:p.jsxs("tr",{className:"text-slate-500 uppercase tracking-wide text-[11px]",children:[p.jsx("th",{className:"text-left py-2 px-1",children:"Usurio"}),p.jsx("th",{className:"text-left py-2 px-1",children:"Objetivo"}),p.jsx("th",{className:"text-left py-2 px-1",children:"Local"}),p.jsx("th",{className:"text-left py-2 px-1",children:"Atualizado"})]})}),p.jsxs("tbody",{children:[ke.map(j=>p.jsxs("tr",{className:"border-t border-white/5 hover:bg-white/5 transition-colors",children:[p.jsx("td",{className:"py-2 px-1 truncate max-w-[150px]",title:j.ownerEmail,children:j.ownerEmail||j.ownerName||j.ownerUid||"--"}),p.jsx("td",{className:"py-2 px-1 capitalize",children:j.plan?.info?.objetivo||"--"}),p.jsx("td",{className:"py-2 px-1 capitalize",children:j.plan?.info?.local||"--"}),p.jsx("td",{className:"py-2 px-1 text-slate-400 whitespace-nowrap",children:j.updatedAt&&j.updatedAt.toDate?.().toLocaleString?.()||"--"})]},j.id)),!ke.length&&p.jsx("tr",{children:p.jsx("td",{colSpan:4,className:"py-4 text-center text-slate-500",children:"Nenhum plano foi salvo ainda."})})]})]})})})]}),p.jsxs(qt,{title:"Ranking dos usurios (treinos na semana)",className:"bg-slate-900/80",icon:Rb,children:[Ie.length===0&&p.jsx("p",{className:"text-sm text-slate-400",children:"Ainda no h treinos registrados nesta semana."}),Ie.length>0&&p.jsx("div",{className:"max-h-64 overflow-y-auto custom-scroll",children:p.jsxs("table",{className:"w-full text-xs sm:text-sm text-slate-300",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"text-slate-500 uppercase tracking-wide text-[11px]",children:[p.jsx("th",{className:"text-left py-2 px-1",children:"#"}),p.jsx("th",{className:"text-left py-2 px-1",children:"Usurio"}),p.jsx("th",{className:"text-left py-2 px-1",children:"Treinos"})]})}),p.jsx("tbody",{children:Ie.map((j,B)=>p.jsxs("tr",{className:"border-t border-white/5 hover:bg-white/5 transition-colors",children:[p.jsx("td",{className:"py-2 px-1 text-slate-400",children:B+1}),p.jsx("td",{className:"py-2 px-1 truncate max-w-[200px]",children:j.ownerEmail||j.uid}),p.jsxs("td",{className:"py-2 px-1",children:[j.totalSemana," treinos"]})]},j.uid))})]})})]})]}),r&&p.jsxs(qt,{title:"Plano do administrador",className:"bg-slate-900/80",children:[p.jsxs("div",{className:"grid sm:grid-cols-2 gap-3 text-sm text-slate-200",children:[p.jsxs("p",{children:["Objetivo:"," ",p.jsx("span",{className:"text-teal-300 font-medium",children:r.plan?.info?.objetivo||"--"})]}),p.jsxs("p",{children:["Local:"," ",p.jsx("span",{className:"text-slate-50 font-medium",children:r.plan?.info?.local||"--"})]}),p.jsxs("p",{children:["Atualizado em:"," ",p.jsx("span",{className:"text-slate-50 font-medium",children:r.updatedAt?.seconds?new Date(1e3*r.updatedAt.seconds).toLocaleString():"Ainda no sincronizado"})]}),p.jsxs("p",{children:["Calorias sugeridas:"," ",p.jsxs("span",{className:"text-purple-300 font-medium",children:[r.nutrition?.total||"--"," kcal"]})]})]}),p.jsxs("p",{className:"text-xs text-slate-500 mt-3 flex items-center gap-1",children:[p.jsx(tj,{className:"w-3.5 h-3.5"})," Informaes reais do documento do admin."]})]}),p.jsx(qt,{title:"Enviar notificao para os usurios",className:"bg-slate-900/80",icon:tm,children:p.jsxs("form",{onSubmit:async j=>{if(j.preventDefault(),g.trim())try{S(!0),_(""),await(function(B,Z){const ue=jr(B.firestore,wa),ce=Rt(B),pe=OE(B.converter,Z);return VE(ue,[IE(tg(B.firestore),"addDoc",ce._key,pe,B.converter!==null,{}).toMutation(ce._key,es.exists(!1))]).then(()=>ce)})(or(rt,"notifications"),{message:g.trim(),createdAt:Rs(),createdBy:n?.email||n?.uid||"admin",type:"broadcast"}),v(""),_("Notificao enviada para todos os usurios ")}catch{_("Erro ao enviar notificao. Tente novamente.")}finally{S(!1)}},className:"space-y-3",children:[p.jsx("textarea",{value:g,onChange:j=>v(j.target.value),rows:3,className:"w-full rounded-2xl bg-slate-950/70 border border-white/10 text-sm text-slate-100 px-3 py-2 outline-none focus:ring-1 focus:ring-teal-400",placeholder:"Escreva uma mensagem rpida para todos os usurios (ex: nova atualizao, manuteno, etc.)"}),p.jsxs("div",{className:"flex items-center justify-between gap-3",children:[p.jsxs("button",{type:"submit",disabled:b||!g.trim(),className:"px-4 py-2 rounded-2xl text-sm font-medium flex items-center gap-2 transition "+(b||!g.trim()?"bg-slate-700 text-slate-400 cursor-not-allowed":"bg-gradient-to-r from-teal-300 to-emerald-300 text-slate-900 hover:brightness-105"),children:[p.jsx(tm,{className:"w-4 h-4"}),b?"Enviando...":"Enviar notificao"]}),T&&p.jsx("p",{className:"text-xs text-slate-400",children:T})]})]})}),D.length>0&&p.jsxs("div",{className:"mt-6 p-4 glass-card border border-white/10 rounded-xl max-h-80 overflow-y-auto text-sm space-y-1",children:[p.jsx("p",{className:"text-teal-300 font-semibold mb-2",children:"Logs da manuteno:"}),D.map((j,B)=>p.jsx("p",{className:"text-slate-300",children:j},B))]})]}),p.jsx(qt,{titleGerenciar:!0,planos:!0,de:!0,usurios:!0,"classNamebg-slate-90080":!0,iconSparkles:!0,children:p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex gap-2 mb-4",children:[p.jsx("button",{typebutton:!0,onClick:()=>P("alterar"),className:"px-4 py-2 rounded-lg text-sm font-medium transition "+(z==="alterar"?"bg-teal-500 text-white":"bg-slate-800 text-slate-400 hover:text-slate-200"),children:"Alterar Plano"}),p.jsx("button",{typebutton:!0,onClick:()=>P("remover"),className:"px-4 py-2 rounded-lg text-sm font-medium transition "+(z==="remover"?"bg-red-500 text-white":"bg-slate-800 text-slate-400 hover:text-slate-200"),children:"Remover Plano"})]}),z==="alterar"&&p.jsxs("form",{onSubmit:async j=>{if(j.preventDefault(),V(""),N.trim()&&A.trim())try{Te(!0);const B=await Ch(query(or(rt,"users"),where("email","==",N.trim())));if(B.empty)return V(" Usurio no encontrado."),void Te(!1);const Z=B.docs[0].id;await ur(Rt(rt,"assinaturas",Z),{plano:A.toLowerCase(),ativo:!0,metodo:"admin-override",criadoEm:new Date,renovaEm:new Date(Date.now()+2592e6),ultimaVerificacao:new Date},{merge:!0}),V(` ${N}  ${A.toUpperCase()}`),I(""),R("free"),Te(!1)}catch(B){V(` Erro: ${B.message}`),Te(!1)}else V(" Preencha email e plano.")},className:"space-y-3",children:[p.jsx("input",{type:"email",value:N,onChange:j=>I(j.target.value),placeholder:"Email do usurio",className:"w-full px-3 py-2 rounded-2xl bg-slate-95070 border border-white10 text-sm text-slate-100 outline-none focus:ring-1 focus:ring-teal-400"}),p.jsxs("select",{value:A,onChange:j=>R(j.target.value),className:"w-full px-3 py-2 rounded-2xl bg-slate-95070 border border-white10 text-sm text-slate-100 outline-none focus:ring-1 focus:ring-teal-400",children:[p.jsx("option",{value:"free",children:"Free"}),p.jsx("option",{value:"pro",children:"Pro"}),p.jsx("option",{value:"ultra",children:"Ultra"})]}),p.jsx("button",{type:"submit",disabled:fe,className:"w-full px-4 py-2 rounded-2xl text-sm font-medium flex items-center justify-center gap-2 transition bg-gradient-to-r from-teal-300 to-emerald-300 text-slate-900 hover:brightness-105 disabled:opacity-50",children:fe?"Alterando...":"Alterar Plano"}),C&&p.jsx("p",{className:"text-xs text-slate-300",children:C})]}),z==="remover"&&p.jsxs("form",{onSubmit:async j=>{if(j.preventDefault(),V(""),N.trim()){if(window.confirm(`Remover plano de ${N}?`))try{Te(!0);const B=await Ch(query(or(rt,"users"),where("email","==",N.trim())));if(B.empty)return V(" Usurio no encontrado."),void Te(!1);const Z=B.docs[0].id;await ur(Rt(rt,"assinaturas",Z),{plano:"free",ativo:!1,metodo:"admin-removal",canceladoEm:new Date,ultimaVerificacao:new Date},{merge:!0}),V(` Plano de ${N} removido (FREE)`),I(""),Te(!1)}catch(B){V(` Erro: ${B.message}`),Te(!1)}}else V(" Preencha o email.")},className:"space-y-3",children:[p.jsx("input",{type:"email",value:N,onChange:j=>I(j.target.value),placeholder:"Email do usurio",className:"w-full px-3 py-2 rounded-2xl bg-slate-95070 border border-white10 text-sm text-slate-100 outline-none focus:ring-1 focus:ring-teal-400"}),p.jsx("button",{type:"submit",disabled:fe,className:"w-full px-4 py-2 rounded-2xl text-sm font-medium flex items-center justify-center gap-2 transition bg-gradient-to-r from-red-500 to-pink-500 text-white hover:brightness-105 disabled:opacity-50",children:fe?"Removendo...":"Remover Plano"}),C&&p.jsx("p",{className:"text-xs text-slate-300",children:C})]})]})})]})}function qj({user:n,userPlan:e="free",onPlanChange:t,onSelectScreen:r}){const i=(e||"free").toUpperCase(),o=[{nome:"Free",preco:"0",descricao:"Perfeito para comear!",cor:"from-slate-700 to-slate-800",icone:lj,beneficios:["Gerar treinos bsicos","Gerar plano alimentar reduzido","Salvar plano na nuvem","Acessar histrico","Acesso limitado aos treinos"],bloqueados:["Relatrio semanal","Anlise muscular","Trocar exerccios","Gerar treinos com IA","Plano alimentar completo","Treinos ilimitados"],destaque:!1},{nome:"PRO",preco:"14.90",descricao:"Para quem quer resultados de verdade.",cor:"from-teal-500 to-emerald-500",icone:aj,beneficios:["Tudo do Free","Trocar exerccios da semana","Relatrio semanal (bsico)","Plano alimentar completo (5 refeies)","Treinos melhores e variados"],bloqueados:["Anlise avanada ULTRA","Treinos com IA","Insights de musculatura"],destaque:!0,moeda:"BRL",simbolo:"R$"},{nome:"ULTRA",preco:"24.90",descricao:"A experincia mais completa.",cor:"from-purple-500 to-pink-500",icone:pT,beneficios:["Tudo do PRO","Painel Ultra completo","Treinos com IA ilimitados","Volume por grupo muscular","Insights semanais completos"],bloqueados:[],destaque:!1,moeda:"BRL",simbolo:"R$"}];function l(h){const m=h.toUpperCase();return m==="PRO"&&i==="PRO"?p.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-teal-500/20 text-teal-300 border border-teal-500/30",children:"Plano Atual"}):m==="ULTRA"&&i==="ULTRA"?p.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-purple-500/20 text-purple-300 border border-purple-500/30",children:"Plano Atual"}):m==="FREE"&&i==="FREE"?p.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-slate-500/20 text-slate-300 border border-slate-500/30",children:"Plano Atual"}):null}function u(h){const m=h.toUpperCase();return m===i?"Plano Atual":i==="ULTRA"&&m==="PRO"?"Voc  ULTRA":h==="0"?"Plano Gratuito":"Assinar Agora"}return p.jsxs(Yn,{className:"py-12",children:[p.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[p.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-teal-500/10 rounded-full blur-3xl"}),p.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"})]}),p.jsxs("div",{className:"relative z-10",children:[p.jsxs(Qe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[p.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[p.jsx(Fo,{className:"w-8 h-8 text-teal-400"}),p.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white",children:"Escolha seu plano"})]}),p.jsx("p",{className:"text-slate-400 text-lg max-w-2xl mx-auto",children:"Escolha o plano que combina com o seu momento. Voc pode mudar de plano sempre que quiser."})]}),p.jsx("div",{className:"grid md:grid-cols-3 gap-6 max-w-6xl mx-auto",children:o.map((h,m)=>{const g=h.icone,v=h.nome.toUpperCase()===i,b=(function(S){const T=S.toUpperCase();return T===i||i==="ULTRA"&&T==="PRO"})(h.nome);return p.jsxs(Qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*m},className:`relative rounded-3xl p-6 border-2 transition-all hover:scale-[1.02] ${h.destaque?"border-teal-500/50 bg-gradient-to-b from-teal-500/5 to-transparent shadow-xl shadow-teal-500/10":v?"border-white/20 bg-slate-900/50":"border-white/10 bg-slate-900/30"} ${h.destaque?"transform md:scale-105":""}`,children:[h.destaque&&p.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2",children:p.jsx("span",{className:"inline-flex items-center px-4 py-1.5 rounded-full text-xs font-bold bg-gradient-to-r from-teal-400 to-emerald-400 text-slate-900 shadow-lg",children:" Mais Popular"})}),p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:`w-14 h-14 rounded-2xl bg-gradient-to-br ${h.cor} flex items-center justify-center shadow-lg`,children:p.jsx(g,{className:"w-7 h-7 text-white"})}),p.jsx("div",{children:p.jsx("h3",{className:"text-2xl font-bold text-white",children:h.nome})})]}),l(h.nome)]}),p.jsx("p",{className:"text-slate-400 text-sm mb-4",children:h.descricao}),h.preco!=="0"&&p.jsx("div",{className:"mb-6",children:p.jsxs("div",{className:"flex items-baseline gap-1",children:[p.jsxs("span",{className:"text-5xl font-bold text-white",children:[h.simbolo," ",h.preco]}),p.jsx("span",{className:"text-slate-400 text-lg",children:"/ms"})]})}),p.jsxs("div",{className:"space-y-3 mb-6",children:[p.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wide",children:"Inclui:"}),h.beneficios.map((S,T)=>p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(hT,{className:"w-5 h-5 text-teal-400 mt-0.5 flex-shrink-0"}),p.jsx("span",{className:"text-sm text-slate-300",children:S})]},T)),h.bloqueados.length>0&&p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide mt-4",children:"No inclui:"}),h.bloqueados.map((S,T)=>p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(Hg,{className:"w-5 h-5 text-slate-600 mt-0.5 flex-shrink-0"}),p.jsx("span",{className:"text-sm text-slate-500",children:S})]},T))]})]}),p.jsx("button",{onClick:()=>(function(S){const T=S.toUpperCase();i!=="ULTRA"||T!=="PRO"?T!=="FREE"?T==="PRO"?r?.("checkout-pro"):T==="ULTRA"&&r?.("checkout-ultra"):alert("Voc j tem acesso ao plano Free!"):alert(" Voc j tem o plano ULTRA! No  possvel fazer downgrade para PRO.")})(h.nome),disabled:b,className:"w-full py-3.5 rounded-xl font-semibold transition-all text-sm "+(b?"bg-slate-700/50 text-slate-500 cursor-not-allowed":h.destaque?"bg-gradient-to-r from-teal-500 to-emerald-500 text-white hover:shadow-lg hover:shadow-teal-500/50 hover:scale-105":"bg-white/10 text-white hover:bg-white/20"),children:u(h.nome)})]},h.nome)})}),p.jsxs(Qe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-center mt-12 space-y-2",children:[p.jsx("p",{className:"text-slate-500 text-sm",children:" Todos os planos incluem acesso  plataforma e atualizaes gratuitas."}),p.jsx("p",{className:"text-slate-500 text-sm",children:" Cancele quando quiser. Sem multas ou taxas escondidas."})]})]})]})}function Hj({onVerified:n}){const[e,t]=U.useState("");return p.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen text-center p-6 relative",children:[p.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#0f172a,#0e1e33,#0f2938)] opacity-90"}),p.jsx("div",{className:"absolute inset-0 backdrop-blur-sm"}),p.jsx(Fo,{className:"text-teal-300 w-10 h-10 mb-4 relative z-10"}),p.jsx("h1",{className:"text-2xl font-semibold text-white relative z-10",children:"Verifique seu e-mail "}),p.jsxs("p",{className:"text-slate-300 mt-2 max-w-sm relative z-10",children:["Enviamos um link de verificao para seu e-mail.",p.jsx("br",{}),"Clique no link e depois volte aqui."]}),p.jsx("p",{className:"text-slate-300 mt-2 max-w-sm relative z-10",children:"Cheque sua caixa de spam."}),e&&p.jsx("p",{className:"text-red-400 mt-3 text-sm relative z-10",children:e}),p.jsx("button",{onClick:async function(){try{await Et.currentUser.reload(),Et.currentUser&&Et.currentUser.emailVerified?(n(Et.currentUser),window.location.reload()):t("Seu email ainda no foi verificado.")}catch{t("Erro ao verificar.")}},className:"mt-6 px-6 py-3 rounded-xl bg-gradient-to-r from-teal-300 to-purple-300 text-black font-medium relative z-10 hover:brightness-105",children:"J verifiquei meu e-mail"}),p.jsx("p",{onClick:async function(){try{await Mw(Et.currentUser),t("Novo email enviado!")}catch{t("Erro ao reenviar email.")}},className:"mt-4 text-sm text-teal-300 underline cursor-pointer relative z-10 hover:text-teal-200 transition",children:"Reenviar email de verificao"}),p.jsx("p",{onClick:()=>Et.signOut(),className:"mt-4 text-sm text-purple-300 underline cursor-pointer relative z-10 hover:text-purple-200 transition",children:"Colocou o e-mail errado? Clique aqui e insira outro."})]})}function Wj(){const[n,e]=U.useState("Processando verificao...");return U.useEffect(()=>{if(typeof window>"u")return;const t=new URLSearchParams(window.location.search),r=t.get("mode"),i=t.get("oobCode");r==="verifyEmail"&&i?UC(Et,i).then(()=>{e("Email verificado com sucesso! Redirecionando..."),setTimeout(()=>{window.location.href="/"},1e3)}).catch(o=>{e("Erro ao verificar email. Tente novamente.")}):e("Link de verificao invlido ou expirado.")},[]),p.jsx("p",{className:"text-slate-200 text-sm",children:n})}function Gj({items:n=[],active:e,onSelect:t,className:r=""}){return n.length?p.jsx("nav",{className:`flex flex-col gap-3 text-sm font-medium w-full ${r}`,children:n.map(i=>{const o=e===i.value;return p.jsxs("button",{type:"button",onClick:()=>t?.(i.value),className:"flex items-center justify-start gap-2 px-4 py-3 rounded-xl transition border text-left w-full "+(o?"border-teal-300 bg-teal-300/10 text-slate-50 shadow-md":"border-white/10 bg-white/5 text-slate-300 hover:bg-white/10"),children:[i.icon&&p.jsx(i.icon,{className:"w-4 h-4"}),p.jsx("span",{children:i.label})]},i.value)})}):null}const ET="https://fyzenbackend.onrender.com";async function $b({uid:n,cancel:e=!0}){const t=await fetch(`${ET}/api/stripe/cancel-renewal`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:n,cancel:e})}),r=await t.json();if(!t.ok||!r.ok)throw new Error(r.error||"Erro ao cancelar renovao.");return r}function TT({priceId:n,plano:e="pro"}){const[t,r]=U.useState(!1),[i,o]=U.useState(null);return U.useEffect(()=>{const l=Lw(Et,u=>{o(u)});return()=>l()},[]),p.jsx("button",{className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg text-lg font-semibold transition-all disabled:opacity-50 justify-center w-full flex",disabled:t,onClick:async()=>{try{if(!i)return void alert("Voc precisa estar logado para assinar.");r(!0),await(async function({priceId:l,uid:u,email:h,plano:m}){const g=await fetch(`${ET}/api/stripe/create-checkout-session`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:l,uid:u,email:h,plano:m})}),v=await g.json();if(!g.ok||!v.url)throw new Error(v.error||"Erro ao criar sesso de pagamento.");window.location.href=v.url})({priceId:n,uid:i.uid,email:i.email,plano:e})}catch{alert("Erro ao iniciar o checkout."),r(!1)}},children:t?"Redirecionando...":"Assinar com Stripe"})}function Kj(){return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#050816] text-white px-4",children:p.jsxs("div",{className:"w-full max-w-lg rounded-3xl bg-[#0b1020] border border-white/5 shadow-xl p-8",children:[p.jsx("h1",{className:"text-2xl font-semibold text-center mb-2",children:"Assinatura PRO"}),p.jsx("p",{className:"text-center text-white/60 mb-6",children:"R$ 14,90 / ms"}),p.jsxs("div",{className:"space-y-2 text-sm text-white/80 mb-8",children:[p.jsx("p",{children:" Tudo do Free"}),p.jsx("p",{children:" Trocar exerccios da semana"}),p.jsx("p",{children:" Relatrio semanal (bsico)"}),p.jsx("p",{children:" Plano alimentar completo (5 refeies)"}),p.jsx("p",{children:" Treinos melhores e variados"})]}),p.jsx("p",{className:"text-xs text-center text-white/40 mb-4",children:"Pagamento seguro via Stripe."}),p.jsx(TT,{priceId:"price_1Scqen2LPaSfKXCC1IJ9q3XO",plano:"pro"}),p.jsx("button",{onClick:()=>history.back(),className:"mt-4 w-full text-sm text-white/60 hover:text-white transition-colors",children:"Voltar"})]})})}function Qj(){return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#050816] text-white px-4",children:p.jsxs("div",{className:"w-full max-w-lg rounded-3xl bg-[#0b1020] border border-white/5 shadow-xl p-8",children:[p.jsx("h1",{className:"text-2xl font-semibold text-center mb-2",children:"Assinatura ULTRA"}),p.jsx("p",{className:"text-center text-white/60 mb-6",children:"R$ 24,90 / ms"}),p.jsxs("div",{className:"space-y-2 text-sm text-white/80 mb-8",children:[p.jsx("p",{children:" Tudo do PRO"}),p.jsx("p",{children:" Painel Ultra com anlises avanadas"}),p.jsx("p",{children:" Relatrio alimentar mais detalhado"}),p.jsx("p",{children:" Ajustes finos de treino e nutrio"})]}),p.jsx("p",{className:"text-xs text-center text-white/40 mb-4",children:"Pagamento seguro via Stripe."}),p.jsx(TT,{priceId:"price_1Scqf02LPaSfKXCCDhxCWoTj",plano:"ultra"}),p.jsx("button",{onClick:()=>history.back(),className:"mt-4 w-full text-sm text-white/60 hover:text-white transition-colors",children:"Voltar"})]})})}function Yj({onSelectScreen:n}){const[e,t]=U.useState(null),[r,i]=U.useState(!0),[o,l]=U.useState("free");U.useEffect(()=>{(async function(){const _=Et.currentUser;if(_){i(!0);try{const D=Rt(rt,"assinaturas",_.uid),O=await dr(D),z=O.exists()?O.data():null;t(z);const P=await sm(_.uid);l(P.plano)}catch{}i(!1)}})()},[]);const u=Date.now(),h=e?.canceladoEm&&e.canceladoEm<=u,m=e?.canceladoEm&&e.canceladoEm>u,g=e?.renovaEm&&e.renovaEm<=u,v=e?.paymentMethod,b=v?.brand&&v?.last4?`${String(v.brand).toUpperCase()}  ${v.last4}`:v?.type?String(v.type):e?.stripeCustomerId?"Carto (Stripe)":"desconhecido",S=e?.plano||"free";if(r)return p.jsx("p",{className:"text-slate-400 text-sm",children:"Carregando assinatura"});if(o==="free")return p.jsxs("div",{className:"space-y-4",children:[p.jsx("h2",{className:"text-2xl font-bold text-slate-50",children:"Minha assinatura"}),p.jsxs("p",{className:"text-slate-400 text-sm",children:["Voc est no plano ",p.jsx("span",{className:"text-teal-300",children:"FREE"}),"."]}),p.jsx("button",{onClick:()=>n("premium"),className:"bg-teal-500/20 border border-teal-300/30 px-4 py-2 rounded-xl text-teal-300 hover:bg-teal-400/20 transition",children:"Ver planos Premium"})]});const T=S.toUpperCase();return p.jsx(Yn,{className:"py-8",children:p.jsxs("div",{className:"space-y-6",children:[p.jsxs("h2",{className:"text-2xl font-bold text-slate-50 flex items-center gap-2",children:[p.jsx(fT,{className:"w-5 h-5 text-teal-300"}),"Minha assinatura"]}),p.jsxs("div",{className:"glass-card rounded-2xl p-6 border border-white/10 space-y-5",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(pT,{className:"w-6 h-6 text-yellow-300"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-slate-50 font-semibold",children:T}),!h&&!g&&p.jsx("p",{className:"text-emerald-400 text-sm",children:"Assinatura ativa"}),h&&p.jsx("p",{className:"text-red-400 text-sm",children:"Cancelada  sem acesso"}),m&&p.jsxs("p",{className:"text-yellow-300 text-sm",children:["Renovao cancelada  acesso at ",new Date(e.canceladoEm).toLocaleDateString()]}),g&&!h&&p.jsx("p",{className:"text-red-400 text-sm",children:"Plano expirado"})]})]}),p.jsxs("div",{className:"text-sm text-slate-300 space-y-1",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Renovao em:"})," ",e?.renovaEm?new Date(e.renovaEm).toLocaleDateString():"--"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Mtodo:"})," ",b]}),h&&p.jsxs("p",{className:"flex items-center gap-2 text-red-400",children:[p.jsx(uj,{className:"w-4 h-4"}),"Cancelado em:"," ",new Date(e.canceladoEm).toLocaleDateString()]})]}),!h&&!m&&!g&&p.jsxs("div",{className:"flex gap-4",children:[p.jsx("button",{onClick:async function(){try{const _=Et.currentUser;if(!_)return;await $b({uid:_.uid,cancel:!0}),alert("Renovao cancelada com sucesso (no Stripe)."),window.location.reload()}catch(_){alert(_.message||"Erro ao cancelar renovao.")}},className:"flex-1 bg-red-500/10 border border-red-400/30 text-red-400 px-4 py-2 rounded-xl hover:bg-red-500/20 transition",children:"Cancelar renovao"}),p.jsx("button",{onClick:()=>n("premium"),className:"flex-1 bg-slate-700/40 border border-white/10 text-slate-200 px-4 py-2 rounded-xl hover:bg-slate-700/60 transition",children:"Mudar de plano"})]}),!h&&m&&!g&&p.jsxs("div",{className:"flex gap-4",children:[p.jsx("button",{onClick:async()=>{const _=Et.currentUser;_&&(await $b({uid:_.uid,cancel:!1}),alert("Renovao reativada com sucesso (no Stripe)."),window.location.reload())},className:"flex-1 bg-emerald-500/10 border border-emerald-400/30 text-emerald-300 px-4 py-2 rounded-xl hover:bg-emerald-500/20 transition",children:"Reativar renovao"}),p.jsx("button",{onClick:()=>n("premium"),className:"flex-1 bg-slate-700/40 border border-white/10 text-slate-200 px-4 py-2 rounded-xl hover:bg-slate-700/60 transition",children:"Mudar de plano"})]}),g&&!h&&p.jsx("button",{onClick:()=>n("premium"),className:"w-full bg-teal-500/20 border border-teal-300/30 text-teal-300 px-4 py-2 rounded-xl hover:bg-teal-400/20 transition",children:"Renovar assinatura"})]})]})})}const zu="home",qb="plan",Hb="nutrition",Wb="progress",Gb="goals",Kb="premium",Xj="checkout-pro",Jj="checkout-ultra",Qb="billing",Yb="ultra-dashboard",Xb="admin",Zj={initial:{opacity:0,y:12},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.22,ease:"easeOut"}};function e3(){const[n,e]=U.useState(null),[t,r]=U.useState("free"),[i,o]=U.useState(zu),[l,u]=U.useState(!0),[h,m]=U.useState(!1);if(new URLSearchParams(window.location.search).get("mode")==="verifyEmail")return p.jsx(Wj,{});if(U.useEffect(()=>{const S=Lw(Et,async T=>{if(u(!1),!T)return e(null),void r("free");e(T),m(!0);try{const _=await sm(T.uid);r(_.plano||"free")}catch{r("free")}m(!1)});return()=>S()},[]),U.useEffect(()=>{new URLSearchParams(window.location.search).get("status")==="sucesso"&&n&&[1e3,3e3,5e3,1e4].forEach(S=>{setTimeout(async()=>{try{const T=await sm(n.uid);T.plano!=="free"&&(r(T.plano),window.history.replaceState({},document.title,window.location.pathname))}catch{}},S)})},[n]),l)return p.jsx("div",{className:"min-h-screen flex items-center justify-center text-slate-200",children:"Carregando Fyzen..."});if(!n)return p.jsx(wj,{onLoginSuccess:e});if(n&&!n.emailVerified)return p.jsx(Hj,{onVerified:e});const g=(function(S){return S?S.displayName?.trim()?S.displayName.trim():(S.email?.split("@")[0]??"atleta").replace(/[._-]+/g," ").split(" ").map(T=>T.charAt(0).toUpperCase()+T.slice(1)).join(" "):"Atleta"})(n),v=n?.email?.toLowerCase()==="caiorissa@gmail.com",b=[{icon:nj,label:"Incio",value:zu},{icon:mT,label:"Treino",value:qb},{icon:qg,label:"Alimentao",value:Hb},{icon:ld,label:"Progresso",value:Wb},{icon:rm,label:"Metas",value:Gb},{icon:Fo,label:t!=="free"?"Seu plano":"Premium",value:Kb,highlight:t!=="free"},{icon:fT,label:"Minha assinatura",value:Qb}];return t?.toLowerCase()==="ultra"&&b.splice(2,0,{icon:Sa,label:"Painel Ultra",value:Yb}),v&&b.push({icon:ls,label:"Admin",value:Xb}),h?p.jsx("div",{className:"min-h-screen flex items-center justify-center text-slate-200",children:"Carregando plano Premium..."}):p.jsx(pj,{userPlan:t,children:p.jsxs("div",{className:"relative min-h-screen flex items-center justify-center px-3 py-4 sm:px-6 sm:py-8 overflow-hidden",children:[p.jsx("div",{className:"absolute -inset-40 bg-[radial-gradient(circle_at_top,_rgba(45,212,191,0.15),transparent_60%),radial-gradient(circle_at_bottom,_rgba(129,140,248,0.15),transparent_60%)] pointer-events-none"}),p.jsx("div",{className:"max-w-[1400px] w-full mx-auto relative rounded-3xl border border-white/10 bg-slate-900/40 backdrop-blur-xl shadow-[0_0_60px_rgba(0,0,0,0.6)] z-10 overflow-hidden min-h-[85vh]",children:p.jsxs("div",{className:"flex flex-col sm:flex-row h-full",children:[p.jsxs("aside",{className:"w-full sm:w-[280px] border-b sm:border-r border-white/10 bg-slate-950/40 backdrop-blur-lg flex flex-col sm:flex-shrink-0 h-full",children:[p.jsx("div",{className:"p-5 border-b border-white/10",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"p-2.5 rounded-xl bg-teal-400/20 border border-teal-300/30",children:p.jsx(ls,{className:"w-5 h-5 text-teal-300"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Fyzen"}),p.jsx("p",{className:"font-semibold text-sm text-slate-50 truncate max-w-[150px]",children:g.toLowerCase()})]})]})}),p.jsx("div",{className:"flex-1 p-5 overflow-y-auto",children:p.jsx(Gj,{items:b,active:i,onSelect:o,className:"hidden sm:flex"})}),p.jsxs("div",{className:"p-5 border-t border-white/10 text-xs text-slate-400 space-y-2",children:[p.jsxs("p",{children:["Plano atual:"," ",p.jsx("span",{className:"text-teal-300 font-medium uppercase",children:String(t).toUpperCase()})]}),p.jsxs("button",{onClick:async()=>{await(function(S){return Ot(S).signOut()})(Et),e(null),r("free"),o(zu)},className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full border border-white/15 bg-white/5 text-slate-200 hover:bg-white/10 transition",children:[p.jsx(sj,{className:"w-3.5 h-3.5"}),"Sair"]})]})]}),p.jsx("main",{className:"flex-1 p-5 sm:p-8 overflow-y-auto custom-scroll pb-28 sm:pb-7",children:p.jsx(nd,{mode:"wait",children:p.jsx(Qe.div,{...Zj,children:(()=>{switch(i){case zu:return p.jsx(Mb,{friendlyName:g});case qb:return p.jsx(Lj,{});case Hb:return p.jsx(Vj,{user:n,userPlan:t});case Wb:return p.jsx(Fj,{userPlan:t});case Gb:return p.jsx(zj,{});case Kb:return p.jsx(qj,{user:n,userPlan:t,onPlanChange:r,onSelectScreen:o});case Qb:return p.jsx(Yj,{onSelectScreen:o});case Xj:return p.jsx(Kj,{onSelectScreen:o});case Jj:return p.jsx(Qj,{onSelectScreen:o});case Xb:return v?p.jsx($j,{user:n,isAdmin:!0}):p.jsx("p",{className:"text-slate-300",children:"Voc no tem acesso ao painel administrativo."});case Yb:return p.jsx(vj,{onSelectScreen:o});default:return p.jsx(Mb,{friendlyName:g})}})()},i)})})]})}),p.jsx("div",{className:"fixed bottom-2 inset-x-3 sm:hidden z-20 pb-[env(safe-area-inset-bottom)]",children:p.jsx("div",{className:"glass-card rounded-2xl border border-white/10 bg-slate-950/70 backdrop-blur-xl px-2 py-1.5",children:p.jsx("div",{className:"flex items-stretch gap-1 overflow-x-auto no-scrollbar overscroll-x-contain scroll-smooth [-webkit-overflow-scrolling:touch]",children:b.map(S=>{const T=S.icon,_=i===S.value;return p.jsxs("button",{onClick:()=>o(S.value),className:"flex flex-col items-center justify-center shrink-0 min-w-[72px] px-2 py-2 rounded-xl text-[11px] leading-none gap-1 transition whitespace-nowrap "+(_?"bg-teal-400/20 text-teal-300":"text-slate-400 hover:text-slate-200"),children:[p.jsx(T,{className:"w-6 h-6"}),S.label]},S.value)})})})})]})})}function t3(){const n=U.useRef(null);return U.useEffect(()=>{const e=n.current,t=e.getContext("2d");let r=e.width=window.innerWidth,i=e.height=window.innerHeight;const o=Array.from({length:150},()=>({x:Math.random()*r,y:Math.random()*i,r:3.5*Math.random()+2,dx:.3*(Math.random()-.5),dy:.3*(Math.random()-.5)}));(function l(){t.clearRect(0,0,r,i),t.fillStyle="rgba(255,255,255,0.08)",o.forEach(u=>{u.x+=u.dx,u.y+=u.dy,(u.x<0||u.x>r)&&(u.dx*=-1),(u.y<0||u.y>i)&&(u.dy*=-1),t.beginPath(),t.arc(u.x,u.y,u.r,0,2*Math.PI),t.fill()}),requestAnimationFrame(l)})(),window.addEventListener("resize",()=>{r=e.width=window.innerWidth,i=e.height=window.innerHeight})},[]),p.jsx("canvas",{ref:n,className:"absolute inset-0 pointer-events-none z-0 opacity-70"})}function n3(){const n=Array.from({length:50});return p.jsx("div",{className:"absolute inset-0 overflow-hidden z-0",children:n.map((e,t)=>p.jsx(Qe.div,{className:"absolute rounded-full bg-white/10",style:{width:90*Math.random()+30+"px",height:90*Math.random()+30+"px",top:100*Math.random()+"%",left:100*Math.random()+"%"},animate:{y:[0,-30,0],opacity:[.6,1,.6]},transition:{duration:5*Math.random()+6,repeat:1/0,ease:"easeInOut",delay:2*Math.random()}},t))})}function r3(){const n=U.useRef(null);return U.useEffect(()=>{const e=n.current;if(!e)return;const t=r=>{const{innerWidth:i,innerHeight:o}=window,l=20*(r.clientX/i-.5),u=20*(r.clientY/o-.5);e.style.transform=`translate3d(${l}px, ${u}px, 0) scale(1.02)`};return window.addEventListener("mousemove",t),()=>window.removeEventListener("mousemove",t)},[]),p.jsxs("div",{ref:n,className:"fixed inset-0 -z-10 transition-transform duration-500 ease-out",style:{willChange:"transform"},children:[p.jsx("div",{className:"absolute inset-0"}),p.jsx(t3,{}),p.jsx(n3,{})]})}Sk.createRoot(document.getElementById("root")).render(p.jsxs(Oj,{children:[p.jsx(r3,{}),p.jsx(e3,{})]}));
